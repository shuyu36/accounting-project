(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();/**
* @vue/shared v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Wc(n,t){const r=new Set(n.split(","));return t?s=>r.has(s.toLowerCase()):s=>r.has(s)}const Oe={},Ds=[],Lt=()=>{},hT=()=>!1,Ho=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),nf=n=>n.startsWith("onUpdate:"),He=Object.assign,rf=(n,t)=>{const r=n.indexOf(t);r>-1&&n.splice(r,1)},fT=Object.prototype.hasOwnProperty,Re=(n,t)=>fT.call(n,t),te=Array.isArray,Ns=n=>pi(n)==="[object Map]",ms=n=>pi(n)==="[object Set]",up=n=>pi(n)==="[object Date]",dT=n=>pi(n)==="[object RegExp]",ce=n=>typeof n=="function",qe=n=>typeof n=="string",zn=n=>typeof n=="symbol",Ne=n=>n!==null&&typeof n=="object",sf=n=>(Ne(n)||ce(n))&&ce(n.then)&&ce(n.catch),i_=Object.prototype.toString,pi=n=>i_.call(n),pT=n=>pi(n).slice(8,-1),o_=n=>pi(n)==="[object Object]",of=n=>qe(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Vs=Wc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kc=n=>{const t=Object.create(null);return r=>t[r]||(t[r]=n(r))},mT=/-(\w)/g,xt=Kc(n=>n.replace(mT,(t,r)=>r?r.toUpperCase():"")),gT=/\B([A-Z])/g,Ht=Kc(n=>n.replace(gT,"-$1").toLowerCase()),qo=Kc(n=>n.charAt(0).toUpperCase()+n.slice(1)),Wi=Kc(n=>n?`on${qo(n)}`:""),on=(n,t)=>!Object.is(n,t),Ls=(n,t)=>{for(let r=0;r<n.length;r++)n[r](t)},a_=(n,t,r)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:r})},uc=n=>{const t=parseFloat(n);return isNaN(t)?n:t},hc=n=>{const t=qe(n)?Number(n):NaN;return isNaN(t)?n:t};let hp;const c_=()=>hp||(hp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),_T="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",yT=Wc(_T);function mi(n){if(te(n)){const t={};for(let r=0;r<n.length;r++){const s=n[r],i=qe(s)?TT(s):mi(s);if(i)for(const o in i)t[o]=i[o]}return t}else if(qe(n)||Ne(n))return n}const vT=/;(?![^(]*\))/g,ET=/:([^]+)/,wT=/\/\*[^]*?\*\//g;function TT(n){const t={};return n.replace(wT,"").split(vT).forEach(r=>{if(r){const s=r.split(ET);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function gi(n){let t="";if(qe(n))t=n;else if(te(n))for(let r=0;r<n.length;r++){const s=gi(n[r]);s&&(t+=s+" ")}else if(Ne(n))for(const r in n)n[r]&&(t+=r+" ");return t.trim()}function bT(n){if(!n)return null;let{class:t,style:r}=n;return t&&!qe(t)&&(n.class=gi(t)),r&&(n.style=mi(r)),n}const IT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",AT=Wc(IT);function l_(n){return!!n||n===""}function ST(n,t){if(n.length!==t.length)return!1;let r=!0;for(let s=0;r&&s<n.length;s++)r=Rr(n[s],t[s]);return r}function Rr(n,t){if(n===t)return!0;let r=up(n),s=up(t);if(r||s)return r&&s?n.getTime()===t.getTime():!1;if(r=zn(n),s=zn(t),r||s)return n===t;if(r=te(n),s=te(t),r||s)return r&&s?ST(n,t):!1;if(r=Ne(n),s=Ne(t),r||s){if(!r||!s)return!1;const i=Object.keys(n).length,o=Object.keys(t).length;if(i!==o)return!1;for(const a in n){const c=n.hasOwnProperty(a),l=t.hasOwnProperty(a);if(c&&!l||!c&&l||!Rr(n[a],t[a]))return!1}}return String(n)===String(t)}function zc(n,t){return n.findIndex(r=>Rr(r,t))}const gt=n=>qe(n)?n:n==null?"":te(n)||Ne(n)&&(n.toString===i_||!ce(n.toString))?JSON.stringify(n,u_,2):String(n),u_=(n,t)=>t&&t.__v_isRef?u_(n,t.value):Ns(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[s,i],o)=>(r[nu(s,o)+" =>"]=i,r),{})}:ms(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>nu(r))}:zn(t)?nu(t):Ne(t)&&!te(t)&&!o_(t)?String(t):t,nu=(n,t="")=>{var r;return zn(n)?`Symbol(${(r=n.description)!=null?r:t})`:n};/**
* @vue/reactivity v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $t;class af{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$t,!t&&$t&&(this.index=($t.scopes||($t.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=$t;try{return $t=this,t()}finally{$t=r}}}on(){$t=this}off(){$t=this.parent}stop(t){if(this._active){let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.scopes)for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function cf(n){return new af(n)}function h_(n,t=$t){t&&t.active&&t.effects.push(n)}function lf(){return $t}function f_(n){$t&&$t.cleanups.push(n)}let Xr;class zs{constructor(t,r,s,i){this.fn=t,this.trigger=r,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,h_(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Dr();for(let t=0;t<this._depsLength;t++){const r=this.deps[t];if(r.computed&&(RT(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Nr()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=wr,r=Xr;try{return wr=!0,Xr=this,this._runnings++,fp(this),this.fn()}finally{dp(this),this._runnings--,Xr=r,wr=t}}stop(){var t;this.active&&(fp(this),dp(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function RT(n){return n.value}function fp(n){n._trackId++,n._depsLength=0}function dp(n){if(n.deps.length>n._depsLength){for(let t=n._depsLength;t<n.deps.length;t++)d_(n.deps[t],n);n.deps.length=n._depsLength}}function d_(n,t){const r=n.get(t);r!==void 0&&t._trackId!==r&&(n.delete(t),n.size===0&&n.cleanup())}function CT(n,t){n.effect instanceof zs&&(n=n.effect.fn);const r=new zs(n,Lt,()=>{r.dirty&&r.run()});t&&(He(r,t),t.scope&&h_(r,t.scope)),(!t||!t.lazy)&&r.run();const s=r.run.bind(r);return s.effect=r,s}function PT(n){n.effect.stop()}let wr=!0,$u=0;const p_=[];function Dr(){p_.push(wr),wr=!1}function Nr(){const n=p_.pop();wr=n===void 0?!0:n}function uf(){$u++}function hf(){for($u--;!$u&&ju.length;)ju.shift()()}function m_(n,t,r){if(t.get(n)!==n._trackId){t.set(n,n._trackId);const s=n.deps[n._depsLength];s!==t?(s&&d_(s,n),n.deps[n._depsLength++]=t):n._depsLength++}}const ju=[];function g_(n,t,r){uf();for(const s of n.keys()){let i;s._dirtyLevel<t&&(i??(i=n.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=t),s._shouldSchedule&&(i??(i=n.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&ju.push(s.scheduler)))}hf()}const __=(n,t)=>{const r=new Map;return r.cleanup=n,r.computed=t,r},fc=new WeakMap,Zr=Symbol(""),Hu=Symbol("");function Ft(n,t,r){if(wr&&Xr){let s=fc.get(n);s||fc.set(n,s=new Map);let i=s.get(r);i||s.set(r,i=__(()=>s.delete(r))),m_(Xr,i)}}function $n(n,t,r,s,i,o){const a=fc.get(n);if(!a)return;let c=[];if(t==="clear")c=[...a.values()];else if(r==="length"&&te(n)){const l=Number(s);a.forEach((u,h)=>{(h==="length"||!zn(h)&&h>=l)&&c.push(u)})}else switch(r!==void 0&&c.push(a.get(r)),t){case"add":te(n)?of(r)&&c.push(a.get("length")):(c.push(a.get(Zr)),Ns(n)&&c.push(a.get(Hu)));break;case"delete":te(n)||(c.push(a.get(Zr)),Ns(n)&&c.push(a.get(Hu)));break;case"set":Ns(n)&&c.push(a.get(Zr));break}uf();for(const l of c)l&&g_(l,4);hf()}function kT(n,t){var r;return(r=fc.get(n))==null?void 0:r.get(t)}const OT=Wc("__proto__,__v_isRef,__isVue"),y_=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(zn)),pp=xT();function xT(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...r){const s=Ee(this);for(let o=0,a=this.length;o<a;o++)Ft(s,"get",o+"");const i=s[t](...r);return i===-1||i===!1?s[t](...r.map(Ee)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...r){Dr(),uf();const s=Ee(this)[t].apply(this,r);return hf(),Nr(),s}}),n}function DT(n){zn(n)||(n=String(n));const t=Ee(this);return Ft(t,"has",n),t.hasOwnProperty(n)}class v_{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,s){const i=this._isReadonly,o=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return o;if(r==="__v_raw")return s===(i?o?A_:I_:o?b_:T_).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const a=te(t);if(!i){if(a&&Re(pp,r))return Reflect.get(pp,r,s);if(r==="hasOwnProperty")return DT}const c=Reflect.get(t,r,s);return(zn(r)?y_.has(r):OT(r))||(i||Ft(t,"get",r),o)?c:ze(c)?a&&of(r)?c:c.value:Ne(c)?i?pf(c):Zn(c):c}}class E_ extends v_{constructor(t=!1){super(!1,t)}set(t,r,s,i){let o=t[r];if(!this._isShallow){const l=Gs(o);if(!co(s)&&!Gs(s)&&(o=Ee(o),s=Ee(s)),!te(t)&&ze(o)&&!ze(s))return l?!1:(o.value=s,!0)}const a=te(t)&&of(r)?Number(r)<t.length:Re(t,r),c=Reflect.set(t,r,s,i);return t===Ee(i)&&(a?on(s,o)&&$n(t,"set",r,s):$n(t,"add",r,s)),c}deleteProperty(t,r){const s=Re(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&s&&$n(t,"delete",r,void 0),i}has(t,r){const s=Reflect.has(t,r);return(!zn(r)||!y_.has(r))&&Ft(t,"has",r),s}ownKeys(t){return Ft(t,"iterate",te(t)?"length":Zr),Reflect.ownKeys(t)}}class w_ extends v_{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const NT=new E_,VT=new w_,LT=new E_(!0),MT=new w_(!0),ff=n=>n,Gc=n=>Reflect.getPrototypeOf(n);function ba(n,t,r=!1,s=!1){n=n.__v_raw;const i=Ee(n),o=Ee(t);r||(on(t,o)&&Ft(i,"get",t),Ft(i,"get",o));const{has:a}=Gc(i),c=s?ff:r?gf:lo;if(a.call(i,t))return c(n.get(t));if(a.call(i,o))return c(n.get(o));n!==i&&n.get(t)}function Ia(n,t=!1){const r=this.__v_raw,s=Ee(r),i=Ee(n);return t||(on(n,i)&&Ft(s,"has",n),Ft(s,"has",i)),n===i?r.has(n):r.has(n)||r.has(i)}function Aa(n,t=!1){return n=n.__v_raw,!t&&Ft(Ee(n),"iterate",Zr),Reflect.get(n,"size",n)}function mp(n){n=Ee(n);const t=Ee(this);return Gc(t).has.call(t,n)||(t.add(n),$n(t,"add",n,n)),this}function gp(n,t){t=Ee(t);const r=Ee(this),{has:s,get:i}=Gc(r);let o=s.call(r,n);o||(n=Ee(n),o=s.call(r,n));const a=i.call(r,n);return r.set(n,t),o?on(t,a)&&$n(r,"set",n,t):$n(r,"add",n,t),this}function _p(n){const t=Ee(this),{has:r,get:s}=Gc(t);let i=r.call(t,n);i||(n=Ee(n),i=r.call(t,n)),s&&s.call(t,n);const o=t.delete(n);return i&&$n(t,"delete",n,void 0),o}function yp(){const n=Ee(this),t=n.size!==0,r=n.clear();return t&&$n(n,"clear",void 0,void 0),r}function Sa(n,t){return function(s,i){const o=this,a=o.__v_raw,c=Ee(a),l=t?ff:n?gf:lo;return!n&&Ft(c,"iterate",Zr),a.forEach((u,h)=>s.call(i,l(u),l(h),o))}}function Ra(n,t,r){return function(...s){const i=this.__v_raw,o=Ee(i),a=Ns(o),c=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,u=i[n](...s),h=r?ff:t?gf:lo;return!t&&Ft(o,"iterate",l?Hu:Zr),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:c?[h(f[0]),h(f[1])]:h(f),done:d}},[Symbol.iterator](){return this}}}}function rr(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function FT(){const n={get(o){return ba(this,o)},get size(){return Aa(this)},has:Ia,add:mp,set:gp,delete:_p,clear:yp,forEach:Sa(!1,!1)},t={get(o){return ba(this,o,!1,!0)},get size(){return Aa(this)},has:Ia,add:mp,set:gp,delete:_p,clear:yp,forEach:Sa(!1,!0)},r={get(o){return ba(this,o,!0)},get size(){return Aa(this,!0)},has(o){return Ia.call(this,o,!0)},add:rr("add"),set:rr("set"),delete:rr("delete"),clear:rr("clear"),forEach:Sa(!0,!1)},s={get(o){return ba(this,o,!0,!0)},get size(){return Aa(this,!0)},has(o){return Ia.call(this,o,!0)},add:rr("add"),set:rr("set"),delete:rr("delete"),clear:rr("clear"),forEach:Sa(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Ra(o,!1,!1),r[o]=Ra(o,!0,!1),t[o]=Ra(o,!1,!0),s[o]=Ra(o,!0,!0)}),[n,r,t,s]}const[UT,BT,$T,jT]=FT();function Qc(n,t){const r=t?n?jT:$T:n?BT:UT;return(s,i,o)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(Re(r,i)&&i in s?r:s,i,o)}const HT={get:Qc(!1,!1)},qT={get:Qc(!1,!0)},WT={get:Qc(!0,!1)},KT={get:Qc(!0,!0)},T_=new WeakMap,b_=new WeakMap,I_=new WeakMap,A_=new WeakMap;function zT(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function GT(n){return n.__v_skip||!Object.isExtensible(n)?0:zT(pT(n))}function Zn(n){return Gs(n)?n:Jc(n,!1,NT,HT,T_)}function df(n){return Jc(n,!1,LT,qT,b_)}function pf(n){return Jc(n,!0,VT,WT,I_)}function QT(n){return Jc(n,!0,MT,KT,A_)}function Jc(n,t,r,s,i){if(!Ne(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const o=i.get(n);if(o)return o;const a=GT(n);if(a===0)return n;const c=new Proxy(n,a===2?s:r);return i.set(n,c),c}function jn(n){return Gs(n)?jn(n.__v_raw):!!(n&&n.__v_isReactive)}function Gs(n){return!!(n&&n.__v_isReadonly)}function co(n){return!!(n&&n.__v_isShallow)}function mf(n){return n?!!n.__v_raw:!1}function Ee(n){const t=n&&n.__v_raw;return t?Ee(t):n}function Yc(n){return Object.isExtensible(n)&&a_(n,"__v_skip",!0),n}const lo=n=>Ne(n)?Zn(n):n,gf=n=>Ne(n)?pf(n):n;class S_{constructor(t,r,s,i){this.getter=t,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new zs(()=>t(this._value),()=>Ms(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const t=Ee(this);return(!t._cacheable||t.effect.dirty)&&on(t._value,t._value=t.effect.run())&&Ms(t,4),_f(t),t.effect._dirtyLevel>=2&&Ms(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function JT(n,t,r=!1){let s,i;const o=ce(n);return o?(s=n,i=Lt):(s=n.get,i=n.set),new S_(s,i,o||!i,r)}function _f(n){var t;wr&&Xr&&(n=Ee(n),m_(Xr,(t=n.dep)!=null?t:n.dep=__(()=>n.dep=void 0,n instanceof S_?n:void 0)))}function Ms(n,t=4,r){n=Ee(n);const s=n.dep;s&&g_(s,t)}function ze(n){return!!(n&&n.__v_isRef===!0)}function _e(n){return C_(n,!1)}function R_(n){return C_(n,!0)}function C_(n,t){return ze(n)?n:new YT(n,t)}class YT{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Ee(t),this._value=r?t:lo(t)}get value(){return _f(this),this._value}set value(t){const r=this.__v_isShallow||co(t)||Gs(t);t=r?t:Ee(t),on(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:lo(t),Ms(this,4))}}function XT(n){Ms(n,4)}function Le(n){return ze(n)?n.value:n}function ZT(n){return ce(n)?n():Le(n)}const eb={get:(n,t,r)=>Le(Reflect.get(n,t,r)),set:(n,t,r,s)=>{const i=n[t];return ze(i)&&!ze(r)?(i.value=r,!0):Reflect.set(n,t,r,s)}};function yf(n){return jn(n)?n:new Proxy(n,eb)}class tb{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:s}=t(()=>_f(this),()=>Ms(this));this._get=r,this._set=s}get value(){return this._get()}set value(t){this._set(t)}}function P_(n){return new tb(n)}function Xc(n){const t=te(n)?new Array(n.length):{};for(const r in n)t[r]=O_(n,r);return t}class nb{constructor(t,r,s){this._object=t,this._key=r,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return kT(Ee(this._object),this._key)}}class rb{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function k_(n,t,r){return ze(n)?n:ce(n)?new rb(n):Ne(n)&&arguments.length>1?O_(n,t,r):_e(n)}function O_(n,t,r){const s=n[t];return ze(s)?s:new nb(n,t,r)}const sb={GET:"get",HAS:"has",ITERATE:"iterate"},ib={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ob(n,t){}const ab={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER"},cb={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://github.com/vuejs/core ."};function Hn(n,t,r,s){try{return s?n(...s):n()}catch(i){gs(i,t,r)}}function Wt(n,t,r,s){if(ce(n)){const i=Hn(n,t,r,s);return i&&sf(i)&&i.catch(o=>{gs(o,t,r)}),i}if(te(n)){const i=[];for(let o=0;o<n.length;o++)i.push(Wt(n[o],t,r,s));return i}}function gs(n,t,r,s=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](n,a,c)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Dr(),Hn(l,null,10,[n,a,c]),Nr();return}}lb(n,r,i,s)}function lb(n,t,r,s=!0){console.error(n)}let uo=!1,qu=!1;const It=[];let gn=0;const Fs=[];let hr=null,qr=0;const x_=Promise.resolve();let vf=null;function _s(n){const t=vf||x_;return n?t.then(this?n.bind(this):n):t}function ub(n){let t=gn+1,r=It.length;for(;t<r;){const s=t+r>>>1,i=It[s],o=ho(i);o<n||o===n&&i.pre?t=s+1:r=s}return t}function Zc(n){(!It.length||!It.includes(n,uo&&n.allowRecurse?gn+1:gn))&&(n.id==null?It.push(n):It.splice(ub(n.id),0,n),D_())}function D_(){!uo&&!qu&&(qu=!0,vf=x_.then(N_))}function hb(n){const t=It.indexOf(n);t>gn&&It.splice(t,1)}function dc(n){te(n)?Fs.push(...n):(!hr||!hr.includes(n,n.allowRecurse?qr+1:qr))&&Fs.push(n),D_()}function vp(n,t,r=uo?gn+1:0){for(;r<It.length;r++){const s=It[r];if(s&&s.pre){if(n&&s.id!==n.uid)continue;It.splice(r,1),r--,s()}}}function pc(n){if(Fs.length){const t=[...new Set(Fs)].sort((r,s)=>ho(r)-ho(s));if(Fs.length=0,hr){hr.push(...t);return}for(hr=t,qr=0;qr<hr.length;qr++)hr[qr]();hr=null,qr=0}}const ho=n=>n.id==null?1/0:n.id,fb=(n,t)=>{const r=ho(n)-ho(t);if(r===0){if(n.pre&&!t.pre)return-1;if(t.pre&&!n.pre)return 1}return r};function N_(n){qu=!1,uo=!0,It.sort(fb);try{for(gn=0;gn<It.length;gn++){const t=It[gn];t&&t.active!==!1&&Hn(t,null,14)}}finally{gn=0,It.length=0,pc(),uo=!1,vf=null,(It.length||Fs.length)&&N_()}}let Ss,Ca=[];function V_(n,t){var r,s;Ss=n,Ss?(Ss.enabled=!0,Ca.forEach(({event:i,args:o})=>Ss.emit(i,...o)),Ca=[]):typeof window<"u"&&window.HTMLElement&&!((s=(r=window.navigator)==null?void 0:r.userAgent)!=null&&s.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{V_(o,t)}),setTimeout(()=>{Ss||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Ca=[])},3e3)):Ca=[]}function db(n,t,...r){if(n.isUnmounted)return;const s=n.vnode.props||Oe;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in s){const h=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:d}=s[h]||Oe;d&&(i=r.map(p=>qe(p)?p.trim():p)),f&&(i=r.map(uc))}let c,l=s[c=Wi(t)]||s[c=Wi(xt(t))];!l&&o&&(l=s[c=Wi(Ht(t))]),l&&Wt(l,n,6,i);const u=s[c+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[c])return;n.emitted[c]=!0,Wt(u,n,6,i)}}function L_(n,t,r=!1){const s=t.emitsCache,i=s.get(n);if(i!==void 0)return i;const o=n.emits;let a={},c=!1;if(!ce(n)){const l=u=>{const h=L_(u,t,!0);h&&(c=!0,He(a,h))};!r&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!o&&!c?(Ne(n)&&s.set(n,null),null):(te(o)?o.forEach(l=>a[l]=null):He(a,o),Ne(n)&&s.set(n,a),a)}function el(n,t){return!n||!Ho(t)?!1:(t=t.slice(2).replace(/Once$/,""),Re(n,t[0].toLowerCase()+t.slice(1))||Re(n,Ht(t))||Re(n,t))}let nt=null,tl=null;function fo(n){const t=nt;return nt=n,tl=n&&n.type.__scopeId||null,t}function pb(n){tl=n}function mb(){tl=null}const gb=n=>lt;function lt(n,t=nt,r){if(!t||n._n)return n;const s=(...i)=>{s._d&&eh(-1);const o=fo(t);let a;try{a=n(...i)}finally{fo(o),s._d&&eh(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function za(n){const{type:t,vnode:r,proxy:s,withProxy:i,props:o,propsOptions:[a],slots:c,attrs:l,emit:u,render:h,renderCache:f,data:d,setupState:p,ctx:g,inheritAttrs:v}=n;let w,C;const T=fo(n);try{if(r.shapeFlag&4){const E=i||s,I=E;w=jt(h.call(I,E,f,o,p,d,g)),C=l}else{const E=t;w=jt(E.length>1?E(o,{attrs:l,slots:c,emit:u}):E(o,null)),C=t.props?l:yb(l)}}catch(E){Qi.length=0,gs(E,n,1),w=oe(At)}let y=w;if(C&&v!==!1){const E=Object.keys(C),{shapeFlag:I}=y;E.length&&I&7&&(a&&E.some(nf)&&(C=vb(C,a)),y=Cn(y,C))}return r.dirs&&(y=Cn(y),y.dirs=y.dirs?y.dirs.concat(r.dirs):r.dirs),r.transition&&(y.transition=r.transition),w=y,fo(T),w}function _b(n,t=!0){let r;for(let s=0;s<n.length;s++){const i=n[s];if(Cr(i)){if(i.type!==At||i.children==="v-if"){if(r)return;r=i}}else return}return r}const yb=n=>{let t;for(const r in n)(r==="class"||r==="style"||Ho(r))&&((t||(t={}))[r]=n[r]);return t},vb=(n,t)=>{const r={};for(const s in n)(!nf(s)||!(s.slice(9)in t))&&(r[s]=n[s]);return r};function Eb(n,t,r){const{props:s,children:i,component:o}=n,{props:a,children:c,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return s?Ep(s,a,u):!!a;if(l&8){const h=t.dynamicProps;for(let f=0;f<h.length;f++){const d=h[f];if(a[d]!==s[d]&&!el(u,d))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:s===a?!1:s?a?Ep(s,a,u):!0:!!a;return!1}function Ep(n,t,r){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const o=s[i];if(t[o]!==n[o]&&!el(r,o))return!0}return!1}function Ef({vnode:n,parent:t},r){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=r,t=t.parent;else break}}const wf="components",wb="directives";function po(n,t){return Tf(wf,n,!0,t)||n}const M_=Symbol.for("v-ndc");function Tb(n){return qe(n)?Tf(wf,n,!1)||n:n||M_}function bb(n){return Tf(wb,n)}function Tf(n,t,r=!0,s=!1){const i=nt||it;if(i){const o=i.type;if(n===wf){const c=ih(o,!1);if(c&&(c===t||c===xt(t)||c===qo(xt(t))))return o}const a=wp(i[n]||o[n],t)||wp(i.appContext[n],t);return!a&&s?o:a}}function wp(n,t){return n&&(n[t]||n[xt(t)]||n[qo(xt(t))])}const F_=n=>n.__isSuspense;let Wu=0;const Ib={name:"Suspense",__isSuspense:!0,process(n,t,r,s,i,o,a,c,l,u){if(n==null)Sb(t,r,s,i,o,a,c,l,u);else{if(o&&o.deps>0&&!n.suspense.isInFallback){t.suspense=n.suspense,t.suspense.vnode=t,t.el=n.el;return}Rb(n,t,r,s,i,a,c,l,u)}},hydrate:Cb,create:bf,normalize:Pb},Ab=Ib;function mo(n,t){const r=n.props&&n.props[t];ce(r)&&r()}function Sb(n,t,r,s,i,o,a,c,l){const{p:u,o:{createElement:h}}=l,f=h("div"),d=n.suspense=bf(n,i,s,t,f,r,o,a,c,l);u(null,d.pendingBranch=n.ssContent,f,null,s,d,o,a),d.deps>0?(mo(n,"onPending"),mo(n,"onFallback"),u(null,n.ssFallback,t,r,s,null,o,a),Us(d,n.ssFallback)):d.resolve(!1,!0)}function Rb(n,t,r,s,i,o,a,c,{p:l,um:u,o:{createElement:h}}){const f=t.suspense=n.suspense;f.vnode=t,t.el=n.el;const d=t.ssContent,p=t.ssFallback,{activeBranch:g,pendingBranch:v,isInFallback:w,isHydrating:C}=f;if(v)f.pendingBranch=d,sn(d,v)?(l(v,d,f.hiddenContainer,null,i,f,o,a,c),f.deps<=0?f.resolve():w&&(C||(l(g,p,r,s,i,null,o,a,c),Us(f,p)))):(f.pendingId=Wu++,C?(f.isHydrating=!1,f.activeBranch=v):u(v,i,f),f.deps=0,f.effects.length=0,f.hiddenContainer=h("div"),w?(l(null,d,f.hiddenContainer,null,i,f,o,a,c),f.deps<=0?f.resolve():(l(g,p,r,s,i,null,o,a,c),Us(f,p))):g&&sn(d,g)?(l(g,d,r,s,i,f,o,a,c),f.resolve(!0)):(l(null,d,f.hiddenContainer,null,i,f,o,a,c),f.deps<=0&&f.resolve()));else if(g&&sn(d,g))l(g,d,r,s,i,f,o,a,c),Us(f,d);else if(mo(t,"onPending"),f.pendingBranch=d,d.shapeFlag&512?f.pendingId=d.component.suspenseId:f.pendingId=Wu++,l(null,d,f.hiddenContainer,null,i,f,o,a,c),f.deps<=0)f.resolve();else{const{timeout:T,pendingId:y}=f;T>0?setTimeout(()=>{f.pendingId===y&&f.fallback(p)},T):T===0&&f.fallback(p)}}function bf(n,t,r,s,i,o,a,c,l,u,h=!1){const{p:f,m:d,um:p,n:g,o:{parentNode:v,remove:w}}=u;let C;const T=kb(n);T&&t!=null&&t.pendingBranch&&(C=t.pendingId,t.deps++);const y=n.props?hc(n.props.timeout):void 0,E=o,I={vnode:n,parent:t,parentComponent:r,namespace:a,container:s,hiddenContainer:i,deps:0,pendingId:Wu++,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(S=!1,k=!1){const{vnode:b,activeBranch:R,pendingBranch:A,pendingId:U,effects:N,parentComponent:q,container:ge}=I;let he=!1;I.isHydrating?I.isHydrating=!1:S||(he=R&&A.transition&&A.transition.mode==="out-in",he&&(R.transition.afterLeave=()=>{U===I.pendingId&&(d(A,ge,o===E?g(R):o,0),dc(N))}),R&&(v(R.el)!==I.hiddenContainer&&(o=g(R)),p(R,q,I,!0)),he||d(A,ge,o,0)),Us(I,A),I.pendingBranch=null,I.isInFallback=!1;let $=I.parent,ne=!1;for(;$;){if($.pendingBranch){$.effects.push(...N),ne=!0;break}$=$.parent}!ne&&!he&&dc(N),I.effects=[],T&&t&&t.pendingBranch&&C===t.pendingId&&(t.deps--,t.deps===0&&!k&&t.resolve()),mo(b,"onResolve")},fallback(S){if(!I.pendingBranch)return;const{vnode:k,activeBranch:b,parentComponent:R,container:A,namespace:U}=I;mo(k,"onFallback");const N=g(b),q=()=>{I.isInFallback&&(f(null,S,A,N,R,null,U,c,l),Us(I,S))},ge=S.transition&&S.transition.mode==="out-in";ge&&(b.transition.afterLeave=q),I.isInFallback=!0,p(b,R,null,!0),ge||q()},move(S,k,b){I.activeBranch&&d(I.activeBranch,S,k,b),I.container=S},next(){return I.activeBranch&&g(I.activeBranch)},registerDep(S,k){const b=!!I.pendingBranch;b&&I.deps++;const R=S.vnode.el;S.asyncDep.catch(A=>{gs(A,S,0)}).then(A=>{if(S.isUnmounted||I.isUnmounted||I.pendingId!==S.suspenseId)return;S.asyncResolved=!0;const{vnode:U}=S;rh(S,A,!1),R&&(U.el=R);const N=!R&&S.subTree.el;k(S,U,v(R||S.subTree.el),R?null:g(S.subTree),I,a,l),N&&w(N),Ef(S,U.el),b&&--I.deps===0&&I.resolve()})},unmount(S,k){I.isUnmounted=!0,I.activeBranch&&p(I.activeBranch,r,S,k),I.pendingBranch&&p(I.pendingBranch,r,S,k)}};return I}function Cb(n,t,r,s,i,o,a,c,l){const u=t.suspense=bf(t,s,r,n.parentNode,document.createElement("div"),null,i,o,a,c,!0),h=l(n,u.pendingBranch=t.ssContent,r,u,o,a);return u.deps===0&&u.resolve(!1,!0),h}function Pb(n){const{shapeFlag:t,children:r}=n,s=t&32;n.ssContent=Tp(s?r.default:r),n.ssFallback=s?Tp(r.fallback):oe(At)}function Tp(n){let t;if(ce(n)){const r=is&&n._c;r&&(n._d=!1,ye()),n=n(),r&&(n._d=!0,t=Mt,wy())}return te(n)&&(n=_b(n)),n=jt(n),t&&!n.dynamicChildren&&(n.dynamicChildren=t.filter(r=>r!==n)),n}function U_(n,t){t&&t.pendingBranch?te(n)?t.effects.push(...n):t.effects.push(n):dc(n)}function Us(n,t){n.activeBranch=t;const{vnode:r,parentComponent:s}=n;let i=t.el;for(;!i&&t.component;)t=t.component.subTree,i=t.el;r.el=i,s&&s.subTree===r&&(s.vnode.el=i,Ef(s,i))}function kb(n){var t;return((t=n.props)==null?void 0:t.suspensible)!=null&&n.props.suspensible!==!1}const B_=Symbol.for("v-scx"),$_=()=>Yt(B_);function Ku(n,t){return Wo(n,null,t)}function j_(n,t){return Wo(n,null,{flush:"post"})}function H_(n,t){return Wo(n,null,{flush:"sync"})}const Pa={};function Kt(n,t,r){return Wo(n,t,r)}function Wo(n,t,{immediate:r,deep:s,flush:i,once:o,onTrack:a,onTrigger:c}=Oe){if(t&&o){const S=t;t=(...k)=>{S(...k),I()}}const l=it,u=S=>s===!0?S:zr(S,s===!1?1:void 0);let h,f=!1,d=!1;if(ze(n)?(h=()=>n.value,f=co(n)):jn(n)?(h=()=>u(n),f=!0):te(n)?(d=!0,f=n.some(S=>jn(S)||co(S)),h=()=>n.map(S=>{if(ze(S))return S.value;if(jn(S))return u(S);if(ce(S))return Hn(S,l,2)})):ce(n)?t?h=()=>Hn(n,l,2):h=()=>(p&&p(),Wt(n,l,3,[g])):h=Lt,t&&s){const S=h;h=()=>zr(S())}let p,g=S=>{p=y.onStop=()=>{Hn(S,l,4),p=y.onStop=void 0}},v;if(Qo)if(g=Lt,t?r&&Wt(t,l,3,[h(),d?[]:void 0,g]):h(),i==="sync"){const S=$_();v=S.__watcherHandles||(S.__watcherHandles=[])}else return Lt;let w=d?new Array(n.length).fill(Pa):Pa;const C=()=>{if(!(!y.active||!y.dirty))if(t){const S=y.run();(s||f||(d?S.some((k,b)=>on(k,w[b])):on(S,w)))&&(p&&p(),Wt(t,l,3,[S,w===Pa?void 0:d&&w[0]===Pa?[]:w,g]),w=S)}else y.run()};C.allowRecurse=!!t;let T;i==="sync"?T=C:i==="post"?T=()=>pt(C,l&&l.suspense):(C.pre=!0,l&&(C.id=l.uid),T=()=>Zc(C));const y=new zs(h,Lt,T),E=lf(),I=()=>{y.stop(),E&&rf(E.effects,y)};return t?r?C():w=y.run():i==="post"?pt(y.run.bind(y),l&&l.suspense):y.run(),v&&v.push(I),I}function Ob(n,t,r){const s=this.proxy,i=qe(n)?n.includes(".")?q_(s,n):()=>s[n]:n.bind(s,s);let o;ce(t)?o=t:(o=t.handler,r=t);const a=os(this),c=Wo(i,o.bind(s),r);return a(),c}function q_(n,t){const r=t.split(".");return()=>{let s=n;for(let i=0;i<r.length&&s;i++)s=s[r[i]];return s}}function zr(n,t,r=0,s){if(!Ne(n)||n.__v_skip)return n;if(t&&t>0){if(r>=t)return n;r++}if(s=s||new Set,s.has(n))return n;if(s.add(n),ze(n))zr(n.value,t,r,s);else if(te(n))for(let i=0;i<n.length;i++)zr(n[i],t,r,s);else if(ms(n)||Ns(n))n.forEach(i=>{zr(i,t,r,s)});else if(o_(n))for(const i in n)zr(n[i],t,r,s);return n}function dt(n,t){if(nt===null)return n;const r=ol(nt)||nt.proxy,s=n.dirs||(n.dirs=[]);for(let i=0;i<t.length;i++){let[o,a,c,l=Oe]=t[i];o&&(ce(o)&&(o={mounted:o,updated:o}),o.deep&&zr(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:c,modifiers:l}))}return n}function mn(n,t,r,s){const i=n.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const c=i[a];o&&(c.oldValue=o[a].value);let l=c.dir[s];l&&(Dr(),Wt(l,r,8,[n.el,c,n,t]),Nr())}}const fr=Symbol("_leaveCb"),ka=Symbol("_enterCb");function If(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xn(()=>{n.isMounted=!0}),ys(()=>{n.isUnmounting=!0}),n}const Qt=[Function,Array],Af={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qt,onEnter:Qt,onAfterEnter:Qt,onEnterCancelled:Qt,onBeforeLeave:Qt,onLeave:Qt,onAfterLeave:Qt,onLeaveCancelled:Qt,onBeforeAppear:Qt,onAppear:Qt,onAfterAppear:Qt,onAppearCancelled:Qt},xb={name:"BaseTransition",props:Af,setup(n,{slots:t}){const r=tr(),s=If();return()=>{const i=t.default&&nl(t.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const d of i)if(d.type!==At){o=d;break}}const a=Ee(n),{mode:c}=a;if(s.isLeaving)return ru(o);const l=bp(o);if(!l)return ru(o);const u=Qs(l,a,s,r);rs(l,u);const h=r.subTree,f=h&&bp(h);if(f&&f.type!==At&&!sn(l,f)){const d=Qs(f,a,s,r);if(rs(f,d),c==="out-in")return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,r.update.active!==!1&&(r.effect.dirty=!0,r.update())},ru(o);c==="in-out"&&l.type!==At&&(d.delayLeave=(p,g,v)=>{const w=K_(s,f);w[String(f.key)]=f,p[fr]=()=>{g(),p[fr]=void 0,delete u.delayedLeave},u.delayedLeave=v})}return o}}},W_=xb;function K_(n,t){const{leavingVNodes:r}=n;let s=r.get(t.type);return s||(s=Object.create(null),r.set(t.type,s)),s}function Qs(n,t,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:f,onLeave:d,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:v,onAppear:w,onAfterAppear:C,onAppearCancelled:T}=t,y=String(n.key),E=K_(r,n),I=(b,R)=>{b&&Wt(b,s,9,R)},S=(b,R)=>{const A=R[1];I(b,R),te(b)?b.every(U=>U.length<=1)&&A():b.length<=1&&A()},k={mode:o,persisted:a,beforeEnter(b){let R=c;if(!r.isMounted)if(i)R=v||c;else return;b[fr]&&b[fr](!0);const A=E[y];A&&sn(n,A)&&A.el[fr]&&A.el[fr](),I(R,[b])},enter(b){let R=l,A=u,U=h;if(!r.isMounted)if(i)R=w||l,A=C||u,U=T||h;else return;let N=!1;const q=b[ka]=ge=>{N||(N=!0,ge?I(U,[b]):I(A,[b]),k.delayedLeave&&k.delayedLeave(),b[ka]=void 0)};R?S(R,[b,q]):q()},leave(b,R){const A=String(n.key);if(b[ka]&&b[ka](!0),r.isUnmounting)return R();I(f,[b]);let U=!1;const N=b[fr]=q=>{U||(U=!0,R(),q?I(g,[b]):I(p,[b]),b[fr]=void 0,E[A]===n&&delete E[A])};E[A]=n,d?S(d,[b,N]):N()},clone(b){return Qs(b,t,r,s)}};return k}function ru(n){if(zo(n))return n=Cn(n),n.children=null,n}function bp(n){return zo(n)?n.children?n.children[0]:void 0:n}function rs(n,t){n.shapeFlag&6&&n.component?rs(n.component.subTree,t):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function nl(n,t=!1,r){let s=[],i=0;for(let o=0;o<n.length;o++){let a=n[o];const c=r==null?a.key:String(r)+String(a.key!=null?a.key:o);a.type===Ke?(a.patchFlag&128&&i++,s=s.concat(nl(a.children,t,c))):(t||a.type!==At)&&s.push(c!=null?Cn(a,{key:c}):a)}if(i>1)for(let o=0;o<s.length;o++)s[o].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Ko(n,t){return ce(n)?He({name:n.name},t,{setup:n}):n}const es=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Db(n){ce(n)&&(n={loader:n});const{loader:t,loadingComponent:r,errorComponent:s,delay:i=200,timeout:o,suspensible:a=!0,onError:c}=n;let l=null,u,h=0;const f=()=>(h++,l=null,d()),d=()=>{let p;return l||(p=l=t().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),c)return new Promise((v,w)=>{c(g,()=>v(f()),()=>w(g),h+1)});throw g}).then(g=>p!==l&&l?l:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return Ko({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return u},setup(){const p=it;if(u)return()=>su(u,p);const g=T=>{l=null,gs(T,p,13,!s)};if(a&&p.suspense||Qo)return d().then(T=>()=>su(T,p)).catch(T=>(g(T),()=>s?oe(s,{error:T}):null));const v=_e(!1),w=_e(),C=_e(!!i);return i&&setTimeout(()=>{C.value=!1},i),o!=null&&setTimeout(()=>{if(!v.value&&!w.value){const T=new Error(`Async component timed out after ${o}ms.`);g(T),w.value=T}},o),d().then(()=>{v.value=!0,p.parent&&zo(p.parent.vnode)&&(p.parent.effect.dirty=!0,Zc(p.parent.update))}).catch(T=>{g(T),w.value=T}),()=>{if(v.value&&u)return su(u,p);if(w.value&&s)return oe(s,{error:w.value});if(r&&!C.value)return oe(r)}}})}function su(n,t){const{ref:r,props:s,children:i,ce:o}=t.vnode,a=oe(n,s,i);return a.ref=r,a.ce=o,delete t.vnode.ce,a}const zo=n=>n.type.__isKeepAlive,Nb={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:t}){const r=tr(),s=r.ctx;if(!s.renderer)return()=>{const T=t.default&&t.default();return T&&T.length===1?T[0]:T};const i=new Map,o=new Set;let a=null;const c=r.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:f}}}=s,d=f("div");s.activate=(T,y,E,I,S)=>{const k=T.component;u(T,y,E,0,c),l(k.vnode,T,y,E,k,c,I,T.slotScopeIds,S),pt(()=>{k.isDeactivated=!1,k.a&&Ls(k.a);const b=T.props&&T.props.onVnodeMounted;b&&Dt(b,k.parent,T)},c)},s.deactivate=T=>{const y=T.component;u(T,d,null,1,c),pt(()=>{y.da&&Ls(y.da);const E=T.props&&T.props.onVnodeUnmounted;E&&Dt(E,y.parent,T),y.isDeactivated=!0},c)};function p(T){iu(T),h(T,r,c,!0)}function g(T){i.forEach((y,E)=>{const I=ih(y.type);I&&(!T||!T(I))&&v(E)})}function v(T){const y=i.get(T);!a||!sn(y,a)?p(y):a&&iu(a),i.delete(T),o.delete(T)}Kt(()=>[n.include,n.exclude],([T,y])=>{T&&g(E=>Mi(T,E)),y&&g(E=>!Mi(y,E))},{flush:"post",deep:!0});let w=null;const C=()=>{w!=null&&i.set(w,ou(r.subTree))};return xn(C),sl(C),ys(()=>{i.forEach(T=>{const{subTree:y,suspense:E}=r,I=ou(y);if(T.type===I.type&&T.key===I.key){iu(I);const S=I.component.da;S&&pt(S,E);return}p(T)})}),()=>{if(w=null,!t.default)return a=null;const T=t.default(),y=T[0];if(T.length>1)return a=null,T;if(!Cr(y)||!(y.shapeFlag&4)&&!(y.shapeFlag&128))return a=null,y;let E=ou(y);const I=E.type,S=ih(es(E)?E.type.__asyncResolved||{}:I),{include:k,exclude:b,max:R}=n;if(k&&(!S||!Mi(k,S))||b&&S&&Mi(b,S))return a=E,y;const A=E.key==null?I:E.key,U=i.get(A);return E.el&&(E=Cn(E),y.shapeFlag&128&&(y.ssContent=E)),w=A,U?(E.el=U.el,E.component=U.component,E.transition&&rs(E,E.transition),E.shapeFlag|=512,o.delete(A),o.add(A)):(o.add(A),R&&o.size>parseInt(R,10)&&v(o.values().next().value)),E.shapeFlag|=256,a=E,F_(y.type)?y:E}}},Vb=Nb;function Mi(n,t){return te(n)?n.some(r=>Mi(r,t)):qe(n)?n.split(",").includes(t):dT(n)?n.test(t):!1}function z_(n,t){Q_(n,"a",t)}function G_(n,t){Q_(n,"da",t)}function Q_(n,t,r=it){const s=n.__wdc||(n.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(rl(t,s,r),r){let i=r.parent;for(;i&&i.parent;)zo(i.parent.vnode)&&Lb(s,t,r,i),i=i.parent}}function Lb(n,t,r,s){const i=rl(t,n,s,!0);il(()=>{rf(s[t],i)},r)}function iu(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function ou(n){return n.shapeFlag&128?n.ssContent:n}function rl(n,t,r=it,s=!1){if(r){const i=r[n]||(r[n]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;Dr();const c=os(r),l=Wt(t,r,n,a);return c(),Nr(),l});return s?i.unshift(o):i.push(o),o}}const er=n=>(t,r=it)=>(!Qo||n==="sp")&&rl(n,(...s)=>t(...s),r),J_=er("bm"),xn=er("m"),Y_=er("bu"),sl=er("u"),ys=er("bum"),il=er("um"),X_=er("sp"),Z_=er("rtg"),ey=er("rtc");function ty(n,t=it){rl("ec",n,t)}function go(n,t,r,s){let i;const o=r&&r[s];if(te(n)||qe(n)){i=new Array(n.length);for(let a=0,c=n.length;a<c;a++)i[a]=t(n[a],a,void 0,o&&o[a])}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Ne(n))if(n[Symbol.iterator])i=Array.from(n,(a,c)=>t(a,c,void 0,o&&o[c]));else{const a=Object.keys(n);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];i[c]=t(n[u],u,c,o&&o[c])}}else i=[];return r&&(r[s]=i),i}function Mb(n,t){for(let r=0;r<t.length;r++){const s=t[r];if(te(s))for(let i=0;i<s.length;i++)n[s[i].name]=s[i].fn;else s&&(n[s.name]=s.key?(...i)=>{const o=s.fn(...i);return o&&(o.key=s.key),o}:s.fn)}return n}function mc(n,t,r={},s,i){if(nt.isCE||nt.parent&&es(nt.parent)&&nt.parent.isCE)return t!=="default"&&(r.name=t),oe("slot",r,s&&s());let o=n[t];o&&o._c&&(o._d=!1),ye();const a=o&&ny(o(r)),c=Go(Ke,{key:r.key||a&&a.key||`_${t}`},a||(s?s():[]),a&&n._===1?64:-2);return!i&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),o&&o._c&&(o._d=!0),c}function ny(n){return n.some(t=>Cr(t)?!(t.type===At||t.type===Ke&&!ny(t.children)):!0)?n:null}function Fb(n,t){const r={};for(const s in n)r[t&&/[A-Z]/.test(s)?`on:${s}`:Wi(s)]=n[s];return r}const zu=n=>n?Cy(n)?ol(n)||n.proxy:zu(n.parent):null,Ki=He(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>zu(n.parent),$root:n=>zu(n.root),$emit:n=>n.emit,$options:n=>Sf(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,Zc(n.update)}),$nextTick:n=>n.n||(n.n=_s.bind(n.proxy)),$watch:n=>Ob.bind(n)}),au=(n,t)=>n!==Oe&&!n.__isScriptSetup&&Re(n,t),Gu={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:s,data:i,props:o,accessCache:a,type:c,appContext:l}=n;let u;if(t[0]!=="$"){const p=a[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(au(s,t))return a[t]=1,s[t];if(i!==Oe&&Re(i,t))return a[t]=2,i[t];if((u=n.propsOptions[0])&&Re(u,t))return a[t]=3,o[t];if(r!==Oe&&Re(r,t))return a[t]=4,r[t];Qu&&(a[t]=0)}}const h=Ki[t];let f,d;if(h)return t==="$attrs"&&Ft(n.attrs,"get",""),h(n);if((f=c.__cssModules)&&(f=f[t]))return f;if(r!==Oe&&Re(r,t))return a[t]=4,r[t];if(d=l.config.globalProperties,Re(d,t))return d[t]},set({_:n},t,r){const{data:s,setupState:i,ctx:o}=n;return au(i,t)?(i[t]=r,!0):s!==Oe&&Re(s,t)?(s[t]=r,!0):Re(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(o[t]=r,!0)},has({_:{data:n,setupState:t,accessCache:r,ctx:s,appContext:i,propsOptions:o}},a){let c;return!!r[a]||n!==Oe&&Re(n,a)||au(t,a)||(c=o[0])&&Re(c,a)||Re(s,a)||Re(Ki,a)||Re(i.config.globalProperties,a)},defineProperty(n,t,r){return r.get!=null?n._.accessCache[t]=0:Re(r,"value")&&this.set(n,t,r.value,null),Reflect.defineProperty(n,t,r)}},Ub=He({},Gu,{get(n,t){if(t!==Symbol.unscopables)return Gu.get(n,t,n)},has(n,t){return t[0]!=="_"&&!yT(t)}});function Bb(){return null}function $b(){return null}function jb(n){}function Hb(n){}function qb(){return null}function Wb(){}function Kb(n,t){return null}function ry(){return sy().slots}function zb(){return sy().attrs}function sy(){const n=tr();return n.setupContext||(n.setupContext=Oy(n))}function _o(n){return te(n)?n.reduce((t,r)=>(t[r]=null,t),{}):n}function Gb(n,t){const r=_o(n);for(const s in t){if(s.startsWith("__skip"))continue;let i=r[s];i?te(i)||ce(i)?i=r[s]={type:i,default:t[s]}:i.default=t[s]:i===null&&(i=r[s]={default:t[s]}),i&&t[`__skip_${s}`]&&(i.skipFactory=!0)}return r}function Qb(n,t){return!n||!t?n||t:te(n)&&te(t)?n.concat(t):He({},_o(n),_o(t))}function Jb(n,t){const r={};for(const s in n)t.includes(s)||Object.defineProperty(r,s,{enumerable:!0,get:()=>n[s]});return r}function Yb(n){const t=tr();let r=n();return nh(),sf(r)&&(r=r.catch(s=>{throw os(t),s})),[r,()=>os(t)]}let Qu=!0;function Xb(n){const t=Sf(n),r=n.proxy,s=n.ctx;Qu=!1,t.beforeCreate&&Ip(t.beforeCreate,n,"bc");const{data:i,computed:o,methods:a,watch:c,provide:l,inject:u,created:h,beforeMount:f,mounted:d,beforeUpdate:p,updated:g,activated:v,deactivated:w,beforeDestroy:C,beforeUnmount:T,destroyed:y,unmounted:E,render:I,renderTracked:S,renderTriggered:k,errorCaptured:b,serverPrefetch:R,expose:A,inheritAttrs:U,components:N,directives:q,filters:ge}=t;if(u&&Zb(u,s,null),a)for(const ne in a){const G=a[ne];ce(G)&&(s[ne]=G.bind(r))}if(i){const ne=i.call(r,r);Ne(ne)&&(n.data=Zn(ne))}if(Qu=!0,o)for(const ne in o){const G=o[ne],Pe=ce(G)?G.bind(r,r):ce(G.get)?G.get.bind(r,r):Lt,Ve=!ce(G)&&ce(G.set)?G.set.bind(r):Lt,Je=Ye({get:Pe,set:Ve});Object.defineProperty(s,ne,{enumerable:!0,configurable:!0,get:()=>Je.value,set:We=>Je.value=We})}if(c)for(const ne in c)iy(c[ne],s,r,ne);if(l){const ne=ce(l)?l.call(r):l;Reflect.ownKeys(ne).forEach(G=>{zi(G,ne[G])})}h&&Ip(h,n,"c");function $(ne,G){te(G)?G.forEach(Pe=>ne(Pe.bind(r))):G&&ne(G.bind(r))}if($(J_,f),$(xn,d),$(Y_,p),$(sl,g),$(z_,v),$(G_,w),$(ty,b),$(ey,S),$(Z_,k),$(ys,T),$(il,E),$(X_,R),te(A))if(A.length){const ne=n.exposed||(n.exposed={});A.forEach(G=>{Object.defineProperty(ne,G,{get:()=>r[G],set:Pe=>r[G]=Pe})})}else n.exposed||(n.exposed={});I&&n.render===Lt&&(n.render=I),U!=null&&(n.inheritAttrs=U),N&&(n.components=N),q&&(n.directives=q)}function Zb(n,t,r=Lt){te(n)&&(n=Ju(n));for(const s in n){const i=n[s];let o;Ne(i)?"default"in i?o=Yt(i.from||s,i.default,!0):o=Yt(i.from||s):o=Yt(i),ze(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[s]=o}}function Ip(n,t,r){Wt(te(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,r)}function iy(n,t,r,s){const i=s.includes(".")?q_(r,s):()=>r[s];if(qe(n)){const o=t[n];ce(o)&&Kt(i,o)}else if(ce(n))Kt(i,n.bind(r));else if(Ne(n))if(te(n))n.forEach(o=>iy(o,t,r,s));else{const o=ce(n.handler)?n.handler.bind(r):t[n.handler];ce(o)&&Kt(i,o,n)}}function Sf(n){const t=n.type,{mixins:r,extends:s}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=n.appContext,c=o.get(t);let l;return c?l=c:!i.length&&!r&&!s?l=t:(l={},i.length&&i.forEach(u=>gc(l,u,a,!0)),gc(l,t,a)),Ne(t)&&o.set(t,l),l}function gc(n,t,r,s=!1){const{mixins:i,extends:o}=t;o&&gc(n,o,r,!0),i&&i.forEach(a=>gc(n,a,r,!0));for(const a in t)if(!(s&&a==="expose")){const c=eI[a]||r&&r[a];n[a]=c?c(n[a],t[a]):t[a]}return n}const eI={data:Ap,props:Sp,emits:Sp,methods:Fi,computed:Fi,beforeCreate:kt,created:kt,beforeMount:kt,mounted:kt,beforeUpdate:kt,updated:kt,beforeDestroy:kt,beforeUnmount:kt,destroyed:kt,unmounted:kt,activated:kt,deactivated:kt,errorCaptured:kt,serverPrefetch:kt,components:Fi,directives:Fi,watch:nI,provide:Ap,inject:tI};function Ap(n,t){return t?n?function(){return He(ce(n)?n.call(this,this):n,ce(t)?t.call(this,this):t)}:t:n}function tI(n,t){return Fi(Ju(n),Ju(t))}function Ju(n){if(te(n)){const t={};for(let r=0;r<n.length;r++)t[n[r]]=n[r];return t}return n}function kt(n,t){return n?[...new Set([].concat(n,t))]:t}function Fi(n,t){return n?He(Object.create(null),n,t):t}function Sp(n,t){return n?te(n)&&te(t)?[...new Set([...n,...t])]:He(Object.create(null),_o(n),_o(t??{})):t}function nI(n,t){if(!n)return t;if(!t)return n;const r=He(Object.create(null),n);for(const s in t)r[s]=kt(n[s],t[s]);return r}function oy(){return{app:null,config:{isNativeTag:hT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rI=0;function sI(n,t){return function(s,i=null){ce(s)||(s=He({},s)),i!=null&&!Ne(i)&&(i=null);const o=oy(),a=new WeakSet;let c=!1;const l=o.app={_uid:rI++,_component:s,_props:i,_container:null,_context:o,_instance:null,version:Dy,get config(){return o.config},set config(u){},use(u,...h){return a.has(u)||(u&&ce(u.install)?(a.add(u),u.install(l,...h)):ce(u)&&(a.add(u),u(l,...h))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,h){return h?(o.components[u]=h,l):o.components[u]},directive(u,h){return h?(o.directives[u]=h,l):o.directives[u]},mount(u,h,f){if(!c){const d=oe(s,i);return d.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),h&&t?t(d,u):n(d,u,f),c=!0,l._container=u,u.__vue_app__=l,ol(d.component)||d.component.proxy}},unmount(){c&&(n(null,l._container),delete l._container.__vue_app__)},provide(u,h){return o.provides[u]=h,l},runWithContext(u){const h=Bs;Bs=l;try{return u()}finally{Bs=h}}};return l}}let Bs=null;function zi(n,t){if(it){let r=it.provides;const s=it.parent&&it.parent.provides;s===r&&(r=it.provides=Object.create(s)),r[n]=t}}function Yt(n,t,r=!1){const s=it||nt;if(s||Bs){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Bs._context.provides;if(i&&n in i)return i[n];if(arguments.length>1)return r&&ce(t)?t.call(s&&s.proxy):t}}function ay(){return!!(it||nt||Bs)}const cy=Object.create(null),Yu=()=>Object.create(cy),ly=n=>Object.getPrototypeOf(n)===cy;function iI(n,t,r,s=!1){const i={},o=Yu();n.propsDefaults=Object.create(null),uy(n,t,i,o);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);r?n.props=s?i:df(i):n.type.props?n.props=i:n.props=o,n.attrs=o}function oI(n,t,r,s){const{props:i,attrs:o,vnode:{patchFlag:a}}=n,c=Ee(i),[l]=n.propsOptions;let u=!1;if((s||a>0)&&!(a&16)){if(a&8){const h=n.vnode.dynamicProps;for(let f=0;f<h.length;f++){let d=h[f];if(el(n.emitsOptions,d))continue;const p=t[d];if(l)if(Re(o,d))p!==o[d]&&(o[d]=p,u=!0);else{const g=xt(d);i[g]=Xu(l,c,g,p,n,!1)}else p!==o[d]&&(o[d]=p,u=!0)}}}else{uy(n,t,i,o)&&(u=!0);let h;for(const f in c)(!t||!Re(t,f)&&((h=Ht(f))===f||!Re(t,h)))&&(l?r&&(r[f]!==void 0||r[h]!==void 0)&&(i[f]=Xu(l,c,f,void 0,n,!0)):delete i[f]);if(o!==c)for(const f in o)(!t||!Re(t,f))&&(delete o[f],u=!0)}u&&$n(n.attrs,"set","")}function uy(n,t,r,s){const[i,o]=n.propsOptions;let a=!1,c;if(t)for(let l in t){if(Vs(l))continue;const u=t[l];let h;i&&Re(i,h=xt(l))?!o||!o.includes(h)?r[h]=u:(c||(c={}))[h]=u:el(n.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,a=!0)}if(o){const l=Ee(r),u=c||Oe;for(let h=0;h<o.length;h++){const f=o[h];r[f]=Xu(i,l,f,u[f],n,!Re(u,f))}}return a}function Xu(n,t,r,s,i,o){const a=n[r];if(a!=null){const c=Re(a,"default");if(c&&s===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ce(l)){const{propsDefaults:u}=i;if(r in u)s=u[r];else{const h=os(i);s=u[r]=l.call(null,t),h()}}else s=l}a[0]&&(o&&!c?s=!1:a[1]&&(s===""||s===Ht(r))&&(s=!0))}return s}function hy(n,t,r=!1){const s=t.propsCache,i=s.get(n);if(i)return i;const o=n.props,a={},c=[];let l=!1;if(!ce(n)){const h=f=>{l=!0;const[d,p]=hy(f,t,!0);He(a,d),p&&c.push(...p)};!r&&t.mixins.length&&t.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!o&&!l)return Ne(n)&&s.set(n,Ds),Ds;if(te(o))for(let h=0;h<o.length;h++){const f=xt(o[h]);Rp(f)&&(a[f]=Oe)}else if(o)for(const h in o){const f=xt(h);if(Rp(f)){const d=o[h],p=a[f]=te(d)||ce(d)?{type:d}:He({},d);if(p){const g=kp(Boolean,p.type),v=kp(String,p.type);p[0]=g>-1,p[1]=v<0||g<v,(g>-1||Re(p,"default"))&&c.push(f)}}}const u=[a,c];return Ne(n)&&s.set(n,u),u}function Rp(n){return n[0]!=="$"&&!Vs(n)}function Cp(n){return n===null?"null":typeof n=="function"?n.name||"":typeof n=="object"&&n.constructor&&n.constructor.name||""}function Pp(n,t){return Cp(n)===Cp(t)}function kp(n,t){return te(t)?t.findIndex(r=>Pp(r,n)):ce(t)&&Pp(t,n)?0:-1}const fy=n=>n[0]==="_"||n==="$stable",Rf=n=>te(n)?n.map(jt):[jt(n)],aI=(n,t,r)=>{if(t._n)return t;const s=lt((...i)=>Rf(t(...i)),r);return s._c=!1,s},dy=(n,t,r)=>{const s=n._ctx;for(const i in n){if(fy(i))continue;const o=n[i];if(ce(o))t[i]=aI(i,o,s);else if(o!=null){const a=Rf(o);t[i]=()=>a}}},py=(n,t)=>{const r=Rf(t);n.slots.default=()=>r},cI=(n,t)=>{if(n.vnode.shapeFlag&32){const r=t._;r?(n.slots=Ee(t),a_(n.slots,"_",r)):dy(t,n.slots=Yu())}else n.slots=Yu(),t&&py(n,t)},lI=(n,t,r)=>{const{vnode:s,slots:i}=n;let o=!0,a=Oe;if(s.shapeFlag&32){const c=t._;c?r&&c===1?o=!1:(He(i,t),!r&&c===1&&delete i._):(o=!t.$stable,dy(t,i)),a=t}else t&&(py(n,t),a={default:1});if(o)for(const c in i)!fy(c)&&a[c]==null&&delete i[c]};function _c(n,t,r,s,i=!1){if(te(n)){n.forEach((d,p)=>_c(d,t&&(te(t)?t[p]:t),r,s,i));return}if(es(s)&&!i)return;const o=s.shapeFlag&4?ol(s.component)||s.component.proxy:s.el,a=i?null:o,{i:c,r:l}=n,u=t&&t.r,h=c.refs===Oe?c.refs={}:c.refs,f=c.setupState;if(u!=null&&u!==l&&(qe(u)?(h[u]=null,Re(f,u)&&(f[u]=null)):ze(u)&&(u.value=null)),ce(l))Hn(l,c,12,[a,h]);else{const d=qe(l),p=ze(l);if(d||p){const g=()=>{if(n.f){const v=d?Re(f,l)?f[l]:h[l]:l.value;i?te(v)&&rf(v,o):te(v)?v.includes(o)||v.push(o):d?(h[l]=[o],Re(f,l)&&(f[l]=h[l])):(l.value=[o],n.k&&(h[n.k]=l.value))}else d?(h[l]=a,Re(f,l)&&(f[l]=a)):p&&(l.value=a,n.k&&(h[n.k]=a))};a?(g.id=-1,pt(g,r)):g()}}}let sr=!1;const uI=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",hI=n=>n.namespaceURI.includes("MathML"),Oa=n=>{if(uI(n))return"svg";if(hI(n))return"mathml"},xa=n=>n.nodeType===8;function fI(n){const{mt:t,p:r,o:{patchProp:s,createText:i,nextSibling:o,parentNode:a,remove:c,insert:l,createComment:u}}=n,h=(y,E)=>{if(!E.hasChildNodes()){r(null,y,E),pc(),E._vnode=y;return}sr=!1,f(E.firstChild,y,null,null,null),pc(),E._vnode=y,sr&&console.error("Hydration completed but contains mismatches.")},f=(y,E,I,S,k,b=!1)=>{b=b||!!E.dynamicChildren;const R=xa(y)&&y.data==="[",A=()=>v(y,E,I,S,k,R),{type:U,ref:N,shapeFlag:q,patchFlag:ge}=E;let he=y.nodeType;E.el=y,ge===-2&&(b=!1,E.dynamicChildren=null);let $=null;switch(U){case ss:he!==3?E.children===""?(l(E.el=i(""),a(y),y),$=y):$=A():(y.data!==E.children&&(sr=!0,y.data=E.children),$=o(y));break;case At:T(y)?($=o(y),C(E.el=y.content.firstChild,y,I)):he!==8||R?$=A():$=o(y);break;case ts:if(R&&(y=o(y),he=y.nodeType),he===1||he===3){$=y;const ne=!E.children.length;for(let G=0;G<E.staticCount;G++)ne&&(E.children+=$.nodeType===1?$.outerHTML:$.data),G===E.staticCount-1&&(E.anchor=$),$=o($);return R?o($):$}else A();break;case Ke:R?$=g(y,E,I,S,k,b):$=A();break;default:if(q&1)(he!==1||E.type.toLowerCase()!==y.tagName.toLowerCase())&&!T(y)?$=A():$=d(y,E,I,S,k,b);else if(q&6){E.slotScopeIds=k;const ne=a(y);if(R?$=w(y):xa(y)&&y.data==="teleport start"?$=w(y,y.data,"teleport end"):$=o(y),t(E,ne,null,I,S,Oa(ne),b),es(E)){let G;R?(G=oe(Ke),G.anchor=$?$.previousSibling:ne.lastChild):G=y.nodeType===3?je(""):oe("div"),G.el=y,E.component.subTree=G}}else q&64?he!==8?$=A():$=E.type.hydrate(y,E,I,S,k,b,n,p):q&128&&($=E.type.hydrate(y,E,I,S,Oa(a(y)),k,b,n,f))}return N!=null&&_c(N,null,S,E),$},d=(y,E,I,S,k,b)=>{b=b||!!E.dynamicChildren;const{type:R,props:A,patchFlag:U,shapeFlag:N,dirs:q,transition:ge}=E,he=R==="input"||R==="option";if(he||U!==-1){q&&mn(E,null,I,"created");let $=!1;if(T(y)){$=yy(S,ge)&&I&&I.vnode.props&&I.vnode.props.appear;const G=y.content.firstChild;$&&ge.beforeEnter(G),C(G,y,I),E.el=y=G}if(N&16&&!(A&&(A.innerHTML||A.textContent))){let G=p(y.firstChild,E,y,I,S,k,b);for(;G;){sr=!0;const Pe=G;G=G.nextSibling,c(Pe)}}else N&8&&y.textContent!==E.children&&(sr=!0,y.textContent=E.children);if(A)if(he||!b||U&48)for(const G in A)(he&&(G.endsWith("value")||G==="indeterminate")||Ho(G)&&!Vs(G)||G[0]===".")&&s(y,G,null,A[G],void 0,void 0,I);else A.onClick&&s(y,"onClick",null,A.onClick,void 0,void 0,I);let ne;(ne=A&&A.onVnodeBeforeMount)&&Dt(ne,I,E),q&&mn(E,null,I,"beforeMount"),((ne=A&&A.onVnodeMounted)||q||$)&&U_(()=>{ne&&Dt(ne,I,E),$&&ge.enter(y),q&&mn(E,null,I,"mounted")},S)}return y.nextSibling},p=(y,E,I,S,k,b,R)=>{R=R||!!E.dynamicChildren;const A=E.children,U=A.length;for(let N=0;N<U;N++){const q=R?A[N]:A[N]=jt(A[N]);if(y)y=f(y,q,S,k,b,R);else{if(q.type===ss&&!q.children)continue;sr=!0,r(null,q,I,null,S,k,Oa(I),b)}}return y},g=(y,E,I,S,k,b)=>{const{slotScopeIds:R}=E;R&&(k=k?k.concat(R):R);const A=a(y),U=p(o(y),E,A,I,S,k,b);return U&&xa(U)&&U.data==="]"?o(E.anchor=U):(sr=!0,l(E.anchor=u("]"),A,U),U)},v=(y,E,I,S,k,b)=>{if(sr=!0,E.el=null,b){const U=w(y);for(;;){const N=o(y);if(N&&N!==U)c(N);else break}}const R=o(y),A=a(y);return c(y),r(null,E,A,R,I,S,Oa(A),k),R},w=(y,E="[",I="]")=>{let S=0;for(;y;)if(y=o(y),y&&xa(y)&&(y.data===E&&S++,y.data===I)){if(S===0)return o(y);S--}return y},C=(y,E,I)=>{const S=E.parentNode;S&&S.replaceChild(y,E);let k=I;for(;k;)k.vnode.el===E&&(k.vnode.el=k.subTree.el=y),k=k.parent},T=y=>y.nodeType===1&&y.tagName.toLowerCase()==="template";return[h,f]}const pt=U_;function my(n){return _y(n)}function gy(n){return _y(n,fI)}function _y(n,t){const r=c_();r.__VUE__=!0;const{insert:s,remove:i,patchProp:o,createElement:a,createText:c,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:d,setScopeId:p=Lt,insertStaticContent:g}=n,v=(m,_,P,V=null,x=null,j=null,J=void 0,H=null,z=!!_.dynamicChildren)=>{if(m===_)return;m&&!sn(m,_)&&(V=D(m),We(m,x,j,!0),m=null),_.patchFlag===-2&&(z=!1,_.dynamicChildren=null);const{type:B,ref:ee,shapeFlag:ie}=_;switch(B){case ss:w(m,_,P,V);break;case At:C(m,_,P,V);break;case ts:m==null&&T(_,P,V,J);break;case Ke:N(m,_,P,V,x,j,J,H,z);break;default:ie&1?I(m,_,P,V,x,j,J,H,z):ie&6?q(m,_,P,V,x,j,J,H,z):(ie&64||ie&128)&&B.process(m,_,P,V,x,j,J,H,z,W)}ee!=null&&x&&_c(ee,m&&m.ref,j,_||m,!_)},w=(m,_,P,V)=>{if(m==null)s(_.el=c(_.children),P,V);else{const x=_.el=m.el;_.children!==m.children&&u(x,_.children)}},C=(m,_,P,V)=>{m==null?s(_.el=l(_.children||""),P,V):_.el=m.el},T=(m,_,P,V)=>{[m.el,m.anchor]=g(m.children,_,P,V,m.el,m.anchor)},y=({el:m,anchor:_},P,V)=>{let x;for(;m&&m!==_;)x=d(m),s(m,P,V),m=x;s(_,P,V)},E=({el:m,anchor:_})=>{let P;for(;m&&m!==_;)P=d(m),i(m),m=P;i(_)},I=(m,_,P,V,x,j,J,H,z)=>{_.type==="svg"?J="svg":_.type==="math"&&(J="mathml"),m==null?S(_,P,V,x,j,J,H,z):R(m,_,x,j,J,H,z)},S=(m,_,P,V,x,j,J,H)=>{let z,B;const{props:ee,shapeFlag:ie,transition:re,dirs:fe}=m;if(z=m.el=a(m.type,j,ee&&ee.is,ee),ie&8?h(z,m.children):ie&16&&b(m.children,z,null,V,x,cu(m,j),J,H),fe&&mn(m,null,V,"created"),k(z,m,m.scopeId,J,V),ee){for(const De in ee)De!=="value"&&!Vs(De)&&o(z,De,null,ee[De],j,m.children,V,x,Be);"value"in ee&&o(z,"value",null,ee.value,j),(B=ee.onVnodeBeforeMount)&&Dt(B,V,m)}fe&&mn(m,null,V,"beforeMount");const we=yy(x,re);we&&re.beforeEnter(z),s(z,_,P),((B=ee&&ee.onVnodeMounted)||we||fe)&&pt(()=>{B&&Dt(B,V,m),we&&re.enter(z),fe&&mn(m,null,V,"mounted")},x)},k=(m,_,P,V,x)=>{if(P&&p(m,P),V)for(let j=0;j<V.length;j++)p(m,V[j]);if(x){let j=x.subTree;if(_===j){const J=x.vnode;k(m,J,J.scopeId,J.slotScopeIds,x.parent)}}},b=(m,_,P,V,x,j,J,H,z=0)=>{for(let B=z;B<m.length;B++){const ee=m[B]=H?dr(m[B]):jt(m[B]);v(null,ee,_,P,V,x,j,J,H)}},R=(m,_,P,V,x,j,J)=>{const H=_.el=m.el;let{patchFlag:z,dynamicChildren:B,dirs:ee}=_;z|=m.patchFlag&16;const ie=m.props||Oe,re=_.props||Oe;let fe;if(P&&$r(P,!1),(fe=re.onVnodeBeforeUpdate)&&Dt(fe,P,_,m),ee&&mn(_,m,P,"beforeUpdate"),P&&$r(P,!0),B?A(m.dynamicChildren,B,H,P,V,cu(_,x),j):J||G(m,_,H,null,P,V,cu(_,x),j,!1),z>0){if(z&16)U(H,_,ie,re,P,V,x);else if(z&2&&ie.class!==re.class&&o(H,"class",null,re.class,x),z&4&&o(H,"style",ie.style,re.style,x),z&8){const we=_.dynamicProps;for(let De=0;De<we.length;De++){const $e=we[De],at=ie[$e],rn=re[$e];(rn!==at||$e==="value")&&o(H,$e,at,rn,x,m.children,P,V,Be)}}z&1&&m.children!==_.children&&h(H,_.children)}else!J&&B==null&&U(H,_,ie,re,P,V,x);((fe=re.onVnodeUpdated)||ee)&&pt(()=>{fe&&Dt(fe,P,_,m),ee&&mn(_,m,P,"updated")},V)},A=(m,_,P,V,x,j,J)=>{for(let H=0;H<_.length;H++){const z=m[H],B=_[H],ee=z.el&&(z.type===Ke||!sn(z,B)||z.shapeFlag&70)?f(z.el):P;v(z,B,ee,null,V,x,j,J,!0)}},U=(m,_,P,V,x,j,J)=>{if(P!==V){if(P!==Oe)for(const H in P)!Vs(H)&&!(H in V)&&o(m,H,P[H],null,J,_.children,x,j,Be);for(const H in V){if(Vs(H))continue;const z=V[H],B=P[H];z!==B&&H!=="value"&&o(m,H,B,z,J,_.children,x,j,Be)}"value"in V&&o(m,"value",P.value,V.value,J)}},N=(m,_,P,V,x,j,J,H,z)=>{const B=_.el=m?m.el:c(""),ee=_.anchor=m?m.anchor:c("");let{patchFlag:ie,dynamicChildren:re,slotScopeIds:fe}=_;fe&&(H=H?H.concat(fe):fe),m==null?(s(B,P,V),s(ee,P,V),b(_.children||[],P,ee,x,j,J,H,z)):ie>0&&ie&64&&re&&m.dynamicChildren?(A(m.dynamicChildren,re,P,x,j,J,H),(_.key!=null||x&&_===x.subTree)&&Cf(m,_,!0)):G(m,_,P,ee,x,j,J,H,z)},q=(m,_,P,V,x,j,J,H,z)=>{_.slotScopeIds=H,m==null?_.shapeFlag&512?x.ctx.activate(_,P,V,J,z):ge(_,P,V,x,j,J,z):he(m,_,z)},ge=(m,_,P,V,x,j,J)=>{const H=m.component=Ry(m,V,x);if(zo(m)&&(H.ctx.renderer=W),Py(H),H.asyncDep){if(x&&x.registerDep(H,$),!m.el){const z=H.subTree=oe(At);C(null,z,_,P)}}else $(H,m,_,P,x,j,J)},he=(m,_,P)=>{const V=_.component=m.component;if(Eb(m,_,P))if(V.asyncDep&&!V.asyncResolved){ne(V,_,P);return}else V.next=_,hb(V.update),V.effect.dirty=!0,V.update();else _.el=m.el,V.vnode=_},$=(m,_,P,V,x,j,J)=>{const H=()=>{if(m.isMounted){let{next:ee,bu:ie,u:re,parent:fe,vnode:we}=m;{const bs=vy(m);if(bs){ee&&(ee.el=we.el,ne(m,ee,J)),bs.asyncDep.then(()=>{m.isUnmounted||H()});return}}let De=ee,$e;$r(m,!1),ee?(ee.el=we.el,ne(m,ee,J)):ee=we,ie&&Ls(ie),($e=ee.props&&ee.props.onVnodeBeforeUpdate)&&Dt($e,fe,ee,we),$r(m,!0);const at=za(m),rn=m.subTree;m.subTree=at,v(rn,at,f(rn.el),D(rn),m,x,j),ee.el=at.el,De===null&&Ef(m,at.el),re&&pt(re,x),($e=ee.props&&ee.props.onVnodeUpdated)&&pt(()=>Dt($e,fe,ee,we),x)}else{let ee;const{el:ie,props:re}=_,{bm:fe,m:we,parent:De}=m,$e=es(_);if($r(m,!1),fe&&Ls(fe),!$e&&(ee=re&&re.onVnodeBeforeMount)&&Dt(ee,De,_),$r(m,!0),ie&&ve){const at=()=>{m.subTree=za(m),ve(ie,m.subTree,m,x,null)};$e?_.type.__asyncLoader().then(()=>!m.isUnmounted&&at()):at()}else{const at=m.subTree=za(m);v(null,at,P,V,m,x,j),_.el=at.el}if(we&&pt(we,x),!$e&&(ee=re&&re.onVnodeMounted)){const at=_;pt(()=>Dt(ee,De,at),x)}(_.shapeFlag&256||De&&es(De.vnode)&&De.vnode.shapeFlag&256)&&m.a&&pt(m.a,x),m.isMounted=!0,_=P=V=null}},z=m.effect=new zs(H,Lt,()=>Zc(B),m.scope),B=m.update=()=>{z.dirty&&z.run()};B.id=m.uid,$r(m,!0),B()},ne=(m,_,P)=>{_.component=m;const V=m.vnode.props;m.vnode=_,m.next=null,oI(m,_.props,V,P),lI(m,_.children,P),Dr(),vp(m),Nr()},G=(m,_,P,V,x,j,J,H,z=!1)=>{const B=m&&m.children,ee=m?m.shapeFlag:0,ie=_.children,{patchFlag:re,shapeFlag:fe}=_;if(re>0){if(re&128){Ve(B,ie,P,V,x,j,J,H,z);return}else if(re&256){Pe(B,ie,P,V,x,j,J,H,z);return}}fe&8?(ee&16&&Be(B,x,j),ie!==B&&h(P,ie)):ee&16?fe&16?Ve(B,ie,P,V,x,j,J,H,z):Be(B,x,j,!0):(ee&8&&h(P,""),fe&16&&b(ie,P,V,x,j,J,H,z))},Pe=(m,_,P,V,x,j,J,H,z)=>{m=m||Ds,_=_||Ds;const B=m.length,ee=_.length,ie=Math.min(B,ee);let re;for(re=0;re<ie;re++){const fe=_[re]=z?dr(_[re]):jt(_[re]);v(m[re],fe,P,null,x,j,J,H,z)}B>ee?Be(m,x,j,!0,!1,ie):b(_,P,V,x,j,J,H,z,ie)},Ve=(m,_,P,V,x,j,J,H,z)=>{let B=0;const ee=_.length;let ie=m.length-1,re=ee-1;for(;B<=ie&&B<=re;){const fe=m[B],we=_[B]=z?dr(_[B]):jt(_[B]);if(sn(fe,we))v(fe,we,P,null,x,j,J,H,z);else break;B++}for(;B<=ie&&B<=re;){const fe=m[ie],we=_[re]=z?dr(_[re]):jt(_[re]);if(sn(fe,we))v(fe,we,P,null,x,j,J,H,z);else break;ie--,re--}if(B>ie){if(B<=re){const fe=re+1,we=fe<ee?_[fe].el:V;for(;B<=re;)v(null,_[B]=z?dr(_[B]):jt(_[B]),P,we,x,j,J,H,z),B++}}else if(B>re)for(;B<=ie;)We(m[B],x,j,!0),B++;else{const fe=B,we=B,De=new Map;for(B=we;B<=re;B++){const Bt=_[B]=z?dr(_[B]):jt(_[B]);Bt.key!=null&&De.set(Bt.key,B)}let $e,at=0;const rn=re-we+1;let bs=!1,ap=0;const Ci=new Array(rn);for(B=0;B<rn;B++)Ci[B]=0;for(B=fe;B<=ie;B++){const Bt=m[B];if(at>=rn){We(Bt,x,j,!0);continue}let pn;if(Bt.key!=null)pn=De.get(Bt.key);else for($e=we;$e<=re;$e++)if(Ci[$e-we]===0&&sn(Bt,_[$e])){pn=$e;break}pn===void 0?We(Bt,x,j,!0):(Ci[pn-we]=B+1,pn>=ap?ap=pn:bs=!0,v(Bt,_[pn],P,null,x,j,J,H,z),at++)}const cp=bs?dI(Ci):Ds;for($e=cp.length-1,B=rn-1;B>=0;B--){const Bt=we+B,pn=_[Bt],lp=Bt+1<ee?_[Bt+1].el:V;Ci[B]===0?v(null,pn,P,lp,x,j,J,H,z):bs&&($e<0||B!==cp[$e]?Je(pn,P,lp,2):$e--)}}},Je=(m,_,P,V,x=null)=>{const{el:j,type:J,transition:H,children:z,shapeFlag:B}=m;if(B&6){Je(m.component.subTree,_,P,V);return}if(B&128){m.suspense.move(_,P,V);return}if(B&64){J.move(m,_,P,W);return}if(J===Ke){s(j,_,P);for(let ie=0;ie<z.length;ie++)Je(z[ie],_,P,V);s(m.anchor,_,P);return}if(J===ts){y(m,_,P);return}if(V!==2&&B&1&&H)if(V===0)H.beforeEnter(j),s(j,_,P),pt(()=>H.enter(j),x);else{const{leave:ie,delayLeave:re,afterLeave:fe}=H,we=()=>s(j,_,P),De=()=>{ie(j,()=>{we(),fe&&fe()})};re?re(j,we,De):De()}else s(j,_,P)},We=(m,_,P,V=!1,x=!1)=>{const{type:j,props:J,ref:H,children:z,dynamicChildren:B,shapeFlag:ee,patchFlag:ie,dirs:re}=m;if(H!=null&&_c(H,null,P,m,!0),ee&256){_.ctx.deactivate(m);return}const fe=ee&1&&re,we=!es(m);let De;if(we&&(De=J&&J.onVnodeBeforeUnmount)&&Dt(De,_,m),ee&6)st(m.component,P,V);else{if(ee&128){m.suspense.unmount(P,V);return}fe&&mn(m,null,_,"beforeUnmount"),ee&64?m.type.remove(m,_,P,x,W,V):B&&(j!==Ke||ie>0&&ie&64)?Be(B,_,P,!1,!0):(j===Ke&&ie&384||!x&&ee&16)&&Be(z,_,P),V&&Ut(m)}(we&&(De=J&&J.onVnodeUnmounted)||fe)&&pt(()=>{De&&Dt(De,_,m),fe&&mn(m,null,_,"unmounted")},P)},Ut=m=>{const{type:_,el:P,anchor:V,transition:x}=m;if(_===Ke){Pt(P,V);return}if(_===ts){E(m);return}const j=()=>{i(P),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(m.shapeFlag&1&&x&&!x.persisted){const{leave:J,delayLeave:H}=x,z=()=>J(P,j);H?H(m.el,j,z):z()}else j()},Pt=(m,_)=>{let P;for(;m!==_;)P=d(m),i(m),m=P;i(_)},st=(m,_,P)=>{const{bum:V,scope:x,update:j,subTree:J,um:H}=m;V&&Ls(V),x.stop(),j&&(j.active=!1,We(J,m,_,P)),H&&pt(H,_),pt(()=>{m.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},Be=(m,_,P,V=!1,x=!1,j=0)=>{for(let J=j;J<m.length;J++)We(m[J],_,P,V,x)},D=m=>m.shapeFlag&6?D(m.component.subTree):m.shapeFlag&128?m.suspense.next():d(m.anchor||m.el);let Q=!1;const O=(m,_,P)=>{m==null?_._vnode&&We(_._vnode,null,null,!0):v(_._vnode||null,m,_,null,null,null,P),Q||(Q=!0,vp(),pc(),Q=!1),_._vnode=m},W={p:v,um:We,m:Je,r:Ut,mt:ge,mc:b,pc:G,pbc:A,n:D,o:n};let pe,ve;return t&&([pe,ve]=t(W)),{render:O,hydrate:pe,createApp:sI(O,pe)}}function cu({type:n,props:t},r){return r==="svg"&&n==="foreignObject"||r==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function $r({effect:n,update:t},r){n.allowRecurse=t.allowRecurse=r}function yy(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Cf(n,t,r=!1){const s=n.children,i=t.children;if(te(s)&&te(i))for(let o=0;o<s.length;o++){const a=s[o];let c=i[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[o]=dr(i[o]),c.el=a.el),r||Cf(a,c)),c.type===ss&&(c.el=a.el)}}function dI(n){const t=n.slice(),r=[0];let s,i,o,a,c;const l=n.length;for(s=0;s<l;s++){const u=n[s];if(u!==0){if(i=r[r.length-1],n[i]<u){t[s]=i,r.push(s);continue}for(o=0,a=r.length-1;o<a;)c=o+a>>1,n[r[c]]<u?o=c+1:a=c;u<n[r[o]]&&(o>0&&(t[s]=r[o-1]),r[o]=s)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}function vy(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:vy(t)}const pI=n=>n.__isTeleport,Gi=n=>n&&(n.disabled||n.disabled===""),Op=n=>typeof SVGElement<"u"&&n instanceof SVGElement,xp=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Zu=(n,t)=>{const r=n&&n.to;return qe(r)?t?t(r):null:r},mI={name:"Teleport",__isTeleport:!0,process(n,t,r,s,i,o,a,c,l,u){const{mc:h,pc:f,pbc:d,o:{insert:p,querySelector:g,createText:v,createComment:w}}=u,C=Gi(t.props);let{shapeFlag:T,children:y,dynamicChildren:E}=t;if(n==null){const I=t.el=v(""),S=t.anchor=v("");p(I,r,s),p(S,r,s);const k=t.target=Zu(t.props,g),b=t.targetAnchor=v("");k&&(p(b,k),a==="svg"||Op(k)?a="svg":(a==="mathml"||xp(k))&&(a="mathml"));const R=(A,U)=>{T&16&&h(y,A,U,i,o,a,c,l)};C?R(r,S):k&&R(k,b)}else{t.el=n.el;const I=t.anchor=n.anchor,S=t.target=n.target,k=t.targetAnchor=n.targetAnchor,b=Gi(n.props),R=b?r:S,A=b?I:k;if(a==="svg"||Op(S)?a="svg":(a==="mathml"||xp(S))&&(a="mathml"),E?(d(n.dynamicChildren,E,R,i,o,a,c),Cf(n,t,!0)):l||f(n,t,R,A,i,o,a,c,!1),C)b?t.props&&n.props&&t.props.to!==n.props.to&&(t.props.to=n.props.to):Da(t,r,I,u,1);else if((t.props&&t.props.to)!==(n.props&&n.props.to)){const U=t.target=Zu(t.props,g);U&&Da(t,U,null,u,0)}else b&&Da(t,S,k,u,1)}Ey(t)},remove(n,t,r,s,{um:i,o:{remove:o}},a){const{shapeFlag:c,children:l,anchor:u,targetAnchor:h,target:f,props:d}=n;if(f&&o(h),a&&o(u),c&16){const p=a||!Gi(d);for(let g=0;g<l.length;g++){const v=l[g];i(v,t,r,p,!!v.dynamicChildren)}}},move:Da,hydrate:gI};function Da(n,t,r,{o:{insert:s},m:i},o=2){o===0&&s(n.targetAnchor,t,r);const{el:a,anchor:c,shapeFlag:l,children:u,props:h}=n,f=o===2;if(f&&s(a,t,r),(!f||Gi(h))&&l&16)for(let d=0;d<u.length;d++)i(u[d],t,r,2);f&&s(c,t,r)}function gI(n,t,r,s,i,o,{o:{nextSibling:a,parentNode:c,querySelector:l}},u){const h=t.target=Zu(t.props,l);if(h){const f=h._lpa||h.firstChild;if(t.shapeFlag&16)if(Gi(t.props))t.anchor=u(a(n),t,c(n),r,s,i,o),t.targetAnchor=f;else{t.anchor=a(n);let d=f;for(;d;)if(d=a(d),d&&d.nodeType===8&&d.data==="teleport anchor"){t.targetAnchor=d,h._lpa=t.targetAnchor&&a(t.targetAnchor);break}u(f,t,h,r,s,i,o)}Ey(t)}return t.anchor&&a(t.anchor)}const _I=mI;function Ey(n){const t=n.ctx;if(t&&t.ut){let r=n.children[0].el;for(;r&&r!==n.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}const Ke=Symbol.for("v-fgt"),ss=Symbol.for("v-txt"),At=Symbol.for("v-cmt"),ts=Symbol.for("v-stc"),Qi=[];let Mt=null;function ye(n=!1){Qi.push(Mt=n?null:[])}function wy(){Qi.pop(),Mt=Qi[Qi.length-1]||null}let is=1;function eh(n){is+=n}function Ty(n){return n.dynamicChildren=is>0?Mt||Ds:null,wy(),is>0&&Mt&&Mt.push(n),n}function Se(n,t,r,s,i,o){return Ty(K(n,t,r,s,i,o,!0))}function Go(n,t,r,s,i){return Ty(oe(n,t,r,s,i,!0))}function Cr(n){return n?n.__v_isVNode===!0:!1}function sn(n,t){return n.type===t.type&&n.key===t.key}function yI(n){}const by=({key:n})=>n??null,Ga=({ref:n,ref_key:t,ref_for:r})=>(typeof n=="number"&&(n=""+n),n!=null?qe(n)||ze(n)||ce(n)?{i:nt,r:n,k:t,f:!!r}:n:null);function K(n,t=null,r=null,s=0,i=null,o=n===Ke?0:1,a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&by(t),ref:t&&Ga(t),scopeId:tl,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:nt};return c?(Pf(l,r),o&128&&n.normalize(l)):r&&(l.shapeFlag|=qe(r)?8:16),is>0&&!a&&Mt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Mt.push(l),l}const oe=vI;function vI(n,t=null,r=null,s=0,i=null,o=!1){if((!n||n===M_)&&(n=At),Cr(n)){const c=Cn(n,t,!0);return r&&Pf(c,r),is>0&&!o&&Mt&&(c.shapeFlag&6?Mt[Mt.indexOf(n)]=c:Mt.push(c)),c.patchFlag|=-2,c}if(SI(n)&&(n=n.__vccOpts),t){t=Iy(t);let{class:c,style:l}=t;c&&!qe(c)&&(t.class=gi(c)),Ne(l)&&(mf(l)&&!te(l)&&(l=He({},l)),t.style=mi(l))}const a=qe(n)?1:F_(n)?128:pI(n)?64:Ne(n)?4:ce(n)?2:0;return K(n,t,r,s,i,a,o,!0)}function Iy(n){return n?mf(n)||ly(n)?He({},n):n:null}function Cn(n,t,r=!1){const{props:s,ref:i,patchFlag:o,children:a}=n,c=t?Sy(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&by(c),ref:t&&t.ref?r&&i?te(i)?i.concat(Ga(t)):[i,Ga(t)]:Ga(t):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Ke?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Cn(n.ssContent),ssFallback:n.ssFallback&&Cn(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function je(n=" ",t=0){return oe(ss,null,n,t)}function Ay(n,t){const r=oe(ts,null,n);return r.staticCount=t,r}function Gn(n="",t=!1){return t?(ye(),Go(At,null,n)):oe(At,null,n)}function jt(n){return n==null||typeof n=="boolean"?oe(At):te(n)?oe(Ke,null,n.slice()):typeof n=="object"?dr(n):oe(ss,null,String(n))}function dr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Cn(n)}function Pf(n,t){let r=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(te(t))r=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Pf(n,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!ly(t)?t._ctx=nt:i===3&&nt&&(nt.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else ce(t)?(t={default:t,_ctx:nt},r=32):(t=String(t),s&64?(r=16,t=[je(t)]):r=8);n.children=t,n.shapeFlag|=r}function Sy(...n){const t={};for(let r=0;r<n.length;r++){const s=n[r];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=gi([t.class,s.class]));else if(i==="style")t.style=mi([t.style,s.style]);else if(Ho(i)){const o=t[i],a=s[i];a&&o!==a&&!(te(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=s[i])}return t}function Dt(n,t,r,s=null){Wt(n,t,7,[r,s])}const EI=oy();let wI=0;function Ry(n,t,r){const s=n.type,i=(t?t.appContext:n.appContext)||EI,o={uid:wI++,vnode:n,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new af(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hy(s,i),emitsOptions:L_(s,i),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:s.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=db.bind(null,o),n.ce&&n.ce(o),o}let it=null;const tr=()=>it||nt;let yc,th;{const n=c_(),t=(r,s)=>{let i;return(i=n[r])||(i=n[r]=[]),i.push(s),o=>{i.length>1?i.forEach(a=>a(o)):i[0](o)}};yc=t("__VUE_INSTANCE_SETTERS__",r=>it=r),th=t("__VUE_SSR_SETTERS__",r=>Qo=r)}const os=n=>{const t=it;return yc(n),n.scope.on(),()=>{n.scope.off(),yc(t)}},nh=()=>{it&&it.scope.off(),yc(null)};function Cy(n){return n.vnode.shapeFlag&4}let Qo=!1;function Py(n,t=!1){t&&th(t);const{props:r,children:s}=n.vnode,i=Cy(n);iI(n,r,i,t),cI(n,s);const o=i?TI(n,t):void 0;return t&&th(!1),o}function TI(n,t){const r=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Gu);const{setup:s}=r;if(s){const i=n.setupContext=s.length>1?Oy(n):null,o=os(n);Dr();const a=Hn(s,n,0,[n.props,i]);if(Nr(),o(),sf(a)){if(a.then(nh,nh),t)return a.then(c=>{rh(n,c,t)}).catch(c=>{gs(c,n,0)});n.asyncDep=a}else rh(n,a,t)}else ky(n,t)}function rh(n,t,r){ce(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Ne(t)&&(n.setupState=yf(t)),ky(n,r)}let vc,sh;function bI(n){vc=n,sh=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,Ub))}}const II=()=>!vc;function ky(n,t,r){const s=n.type;if(!n.render){if(!t&&vc&&!s.render){const i=s.template||Sf(n).template;if(i){const{isCustomElement:o,compilerOptions:a}=n.appContext.config,{delimiters:c,compilerOptions:l}=s,u=He(He({isCustomElement:o,delimiters:c},a),l);s.render=vc(i,u)}}n.render=s.render||Lt,sh&&sh(n)}{const i=os(n);Dr();try{Xb(n)}finally{Nr(),i()}}}const AI={get(n,t){return Ft(n,"get",""),n[t]}};function Oy(n){const t=r=>{n.exposed=r||{}};return{attrs:new Proxy(n.attrs,AI),slots:n.slots,emit:n.emit,expose:t}}function ol(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(yf(Yc(n.exposed)),{get(t,r){if(r in t)return t[r];if(r in Ki)return Ki[r](n)},has(t,r){return r in t||r in Ki}}))}function ih(n,t=!0){return ce(n)?n.displayName||n.name:n.name||t&&n.__name}function SI(n){return ce(n)&&"__vccOpts"in n}const Ye=(n,t)=>JT(n,t,Qo);function RI(n,t,r=Oe){const s=tr(),i=xt(t),o=Ht(t),a=P_((l,u)=>{let h;return H_(()=>{const f=n[t];on(h,f)&&(h=f,u())}),{get(){return l(),r.get?r.get(h):h},set(f){const d=s.vnode.props;!(d&&(t in d||i in d||o in d)&&(`onUpdate:${t}`in d||`onUpdate:${i}`in d||`onUpdate:${o}`in d))&&on(f,h)&&(h=f,u()),s.emit(`update:${t}`,r.set?r.set(f):f)}}}),c=t==="modelValue"?"modelModifiers":`${t}Modifiers`;return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?n[c]||{}:a,done:!1}:{done:!0}}}},a}function al(n,t,r){const s=arguments.length;return s===2?Ne(t)&&!te(t)?Cr(t)?oe(n,null,[t]):oe(n,t):oe(n,null,t):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&Cr(r)&&(r=[r]),oe(n,t,r))}function CI(){}function PI(n,t,r,s){const i=r[s];if(i&&xy(i,n))return i;const o=t();return o.memo=n.slice(),r[s]=o}function xy(n,t){const r=n.memo;if(r.length!=t.length)return!1;for(let s=0;s<r.length;s++)if(on(r[s],t[s]))return!1;return is>0&&Mt&&Mt.push(n),!0}const Dy="3.4.23",kI=Lt,OI=cb,xI=Ss,DI=V_,NI={createComponentInstance:Ry,setupComponent:Py,renderComponentRoot:za,setCurrentRenderingInstance:fo,isVNode:Cr,normalizeVNode:jt},VI=NI,LI=null,MI=null,FI=null;/**
* @vue/runtime-dom v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const UI="http://www.w3.org/2000/svg",BI="http://www.w3.org/1998/Math/MathML",pr=typeof document<"u"?document:null,Dp=pr&&pr.createElement("template"),$I={insert:(n,t,r)=>{t.insertBefore(n,r||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,r,s)=>{const i=t==="svg"?pr.createElementNS(UI,n):t==="mathml"?pr.createElementNS(BI,n):pr.createElement(n,r?{is:r}:void 0);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>pr.createTextNode(n),createComment:n=>pr.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>pr.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,r,s,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{Dp.innerHTML=s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n;const c=Dp.content;if(s==="svg"||s==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}t.insertBefore(c,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},ir="transition",Pi="animation",Js=Symbol("_vtc"),cl=(n,{slots:t})=>al(W_,Vy(n),t);cl.displayName="Transition";const Ny={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},jI=cl.props=He({},Af,Ny),jr=(n,t=[])=>{te(n)?n.forEach(r=>r(...t)):n&&n(...t)},Np=n=>n?te(n)?n.some(t=>t.length>1):n.length>1:!1;function Vy(n){const t={};for(const N in n)N in Ny||(t[N]=n[N]);if(n.css===!1)return t;const{name:r="v",type:s,duration:i,enterFromClass:o=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:c=`${r}-enter-to`,appearFromClass:l=o,appearActiveClass:u=a,appearToClass:h=c,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:d=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=n,g=HI(i),v=g&&g[0],w=g&&g[1],{onBeforeEnter:C,onEnter:T,onEnterCancelled:y,onLeave:E,onLeaveCancelled:I,onBeforeAppear:S=C,onAppear:k=T,onAppearCancelled:b=y}=t,R=(N,q,ge)=>{lr(N,q?h:c),lr(N,q?u:a),ge&&ge()},A=(N,q)=>{N._isLeaving=!1,lr(N,f),lr(N,p),lr(N,d),q&&q()},U=N=>(q,ge)=>{const he=N?k:T,$=()=>R(q,N,ge);jr(he,[q,$]),Vp(()=>{lr(q,N?l:o),Vn(q,N?h:c),Np(he)||Lp(q,s,v,$)})};return He(t,{onBeforeEnter(N){jr(C,[N]),Vn(N,o),Vn(N,a)},onBeforeAppear(N){jr(S,[N]),Vn(N,l),Vn(N,u)},onEnter:U(!1),onAppear:U(!0),onLeave(N,q){N._isLeaving=!0;const ge=()=>A(N,q);Vn(N,f),My(),Vn(N,d),Vp(()=>{N._isLeaving&&(lr(N,f),Vn(N,p),Np(E)||Lp(N,s,w,ge))}),jr(E,[N,ge])},onEnterCancelled(N){R(N,!1),jr(y,[N])},onAppearCancelled(N){R(N,!0),jr(b,[N])},onLeaveCancelled(N){A(N),jr(I,[N])}})}function HI(n){if(n==null)return null;if(Ne(n))return[lu(n.enter),lu(n.leave)];{const t=lu(n);return[t,t]}}function lu(n){return hc(n)}function Vn(n,t){t.split(/\s+/).forEach(r=>r&&n.classList.add(r)),(n[Js]||(n[Js]=new Set)).add(t)}function lr(n,t){t.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const r=n[Js];r&&(r.delete(t),r.size||(n[Js]=void 0))}function Vp(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let qI=0;function Lp(n,t,r,s){const i=n._endId=++qI,o=()=>{i===n._endId&&s()};if(r)return setTimeout(o,r);const{type:a,timeout:c,propCount:l}=Ly(n,t);if(!a)return s();const u=a+"end";let h=0;const f=()=>{n.removeEventListener(u,d),o()},d=p=>{p.target===n&&++h>=l&&f()};setTimeout(()=>{h<l&&f()},c+1),n.addEventListener(u,d)}function Ly(n,t){const r=window.getComputedStyle(n),s=g=>(r[g]||"").split(", "),i=s(`${ir}Delay`),o=s(`${ir}Duration`),a=Mp(i,o),c=s(`${Pi}Delay`),l=s(`${Pi}Duration`),u=Mp(c,l);let h=null,f=0,d=0;t===ir?a>0&&(h=ir,f=a,d=o.length):t===Pi?u>0&&(h=Pi,f=u,d=l.length):(f=Math.max(a,u),h=f>0?a>u?ir:Pi:null,d=h?h===ir?o.length:l.length:0);const p=h===ir&&/\b(transform|all)(,|$)/.test(s(`${ir}Property`).toString());return{type:h,timeout:f,propCount:d,hasTransform:p}}function Mp(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max(...t.map((r,s)=>Fp(r)+Fp(n[s])))}function Fp(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function My(){return document.body.offsetHeight}function WI(n,t,r){const s=n[Js];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):r?n.setAttribute("class",t):n.className=t}const Ec=Symbol("_vod"),Fy=Symbol("_vsh"),yo={beforeMount(n,{value:t},{transition:r}){n[Ec]=n.style.display==="none"?"":n.style.display,r&&t?r.beforeEnter(n):ki(n,t)},mounted(n,{value:t},{transition:r}){r&&t&&r.enter(n)},updated(n,{value:t,oldValue:r},{transition:s}){!t!=!r&&(s?t?(s.beforeEnter(n),ki(n,!0),s.enter(n)):s.leave(n,()=>{ki(n,!1)}):ki(n,t))},beforeUnmount(n,{value:t}){ki(n,t)}};function ki(n,t){n.style.display=t?n[Ec]:"none",n[Fy]=!t}function KI(){yo.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}const Uy=Symbol("");function By(n){const t=tr();if(!t)return;const r=t.ut=(i=n(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(o=>ah(o,i))},s=()=>{const i=n(t.proxy);oh(t.subTree,i),r(i)};xn(()=>{j_(s);const i=new MutationObserver(s);i.observe(t.subTree.el.parentNode,{childList:!0}),il(()=>i.disconnect())})}function oh(n,t){if(n.shapeFlag&128){const r=n.suspense;n=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{oh(r.activeBranch,t)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)ah(n.el,t);else if(n.type===Ke)n.children.forEach(r=>oh(r,t));else if(n.type===ts){let{el:r,anchor:s}=n;for(;r&&(ah(r,t),r!==s);)r=r.nextSibling}}function ah(n,t){if(n.nodeType===1){const r=n.style;let s="";for(const i in t)r.setProperty(`--${i}`,t[i]),s+=`--${i}: ${t[i]};`;r[Uy]=s}}const zI=/(^|;)\s*display\s*:/;function GI(n,t,r){const s=n.style,i=qe(r);let o=!1;if(r&&!i){if(t)if(qe(t))for(const a of t.split(";")){const c=a.slice(0,a.indexOf(":")).trim();r[c]==null&&Qa(s,c,"")}else for(const a in t)r[a]==null&&Qa(s,a,"");for(const a in r)a==="display"&&(o=!0),Qa(s,a,r[a])}else if(i){if(t!==r){const a=s[Uy];a&&(r+=";"+a),s.cssText=r,o=zI.test(r)}}else t&&n.removeAttribute("style");Ec in n&&(n[Ec]=o?s.display:"",n[Fy]&&(s.display="none"))}const Up=/\s*!important$/;function Qa(n,t,r){if(te(r))r.forEach(s=>Qa(n,t,s));else if(r==null&&(r=""),t.startsWith("--"))n.setProperty(t,r);else{const s=QI(n,t);Up.test(r)?n.setProperty(Ht(s),r.replace(Up,""),"important"):n[s]=r}}const Bp=["Webkit","Moz","ms"],uu={};function QI(n,t){const r=uu[t];if(r)return r;let s=xt(t);if(s!=="filter"&&s in n)return uu[t]=s;s=qo(s);for(let i=0;i<Bp.length;i++){const o=Bp[i]+s;if(o in n)return uu[t]=o}return t}const $p="http://www.w3.org/1999/xlink";function JI(n,t,r,s,i){if(s&&t.startsWith("xlink:"))r==null?n.removeAttributeNS($p,t.slice(6,t.length)):n.setAttributeNS($p,t,r);else{const o=AT(t);r==null||o&&!l_(r)?n.removeAttribute(t):n.setAttribute(t,o?"":r)}}function YI(n,t,r,s,i,o,a){if(t==="innerHTML"||t==="textContent"){s&&a(s,i,o),n[t]=r??"";return}const c=n.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){const u=c==="OPTION"?n.getAttribute("value")||"":n.value,h=r??"";(u!==h||!("_value"in n))&&(n.value=h),r==null&&n.removeAttribute(t),n._value=r;return}let l=!1;if(r===""||r==null){const u=typeof n[t];u==="boolean"?r=l_(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{n[t]=r}catch{}l&&n.removeAttribute(t)}function Ln(n,t,r,s){n.addEventListener(t,r,s)}function XI(n,t,r,s){n.removeEventListener(t,r,s)}const jp=Symbol("_vei");function ZI(n,t,r,s,i=null){const o=n[jp]||(n[jp]={}),a=o[t];if(s&&a)a.value=s;else{const[c,l]=eA(t);if(s){const u=o[t]=rA(s,i);Ln(n,c,u,l)}else a&&(XI(n,c,a,l),o[t]=void 0)}}const Hp=/(?:Once|Passive|Capture)$/;function eA(n){let t;if(Hp.test(n)){t={};let s;for(;s=n.match(Hp);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Ht(n.slice(2)),t]}let hu=0;const tA=Promise.resolve(),nA=()=>hu||(tA.then(()=>hu=0),hu=Date.now());function rA(n,t){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;Wt(sA(s,r.value),t,5,[s])};return r.value=n,r.attached=nA(),r}function sA(n,t){if(te(t)){const r=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{r.call(n),n._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const qp=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,iA=(n,t,r,s,i,o,a,c,l)=>{const u=i==="svg";t==="class"?WI(n,s,u):t==="style"?GI(n,r,s):Ho(t)?nf(t)||ZI(n,t,r,s,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):oA(n,t,s,u))?YI(n,t,s,o,a,c,l):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),JI(n,t,s,u))};function oA(n,t,r,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&qp(t)&&ce(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return qp(t)&&qe(r)?!1:t in n}/*! #__NO_SIDE_EFFECTS__ */function $y(n,t){const r=Ko(n);class s extends ll{constructor(o){super(r,o,t)}}return s.def=r,s}/*! #__NO_SIDE_EFFECTS__ */const aA=n=>$y(n,Xy),cA=typeof HTMLElement<"u"?HTMLElement:class{};class ll extends cA{constructor(t,r={},s){super(),this._def=t,this._props=r,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&s?s(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,this._ob&&(this._ob.disconnect(),this._ob=null),_s(()=>{this._connected||(ch(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let s=0;s<this.attributes.length;s++)this._setAttr(this.attributes[s].name);this._ob=new MutationObserver(s=>{for(const i of s)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(s,i=!1)=>{const{props:o,styles:a}=s;let c;if(o&&!te(o))for(const l in o){const u=o[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=hc(this._props[l])),(c||(c=Object.create(null)))[xt(l)]=!0)}this._numberProps=c,i&&this._resolveProps(s),this._applyStyles(a),this._update()},r=this._def.__asyncLoader;r?r().then(s=>t(s,!0)):t(this._def)}_resolveProps(t){const{props:r}=t,s=te(r)?r:Object.keys(r||{});for(const i of Object.keys(this))i[0]!=="_"&&s.includes(i)&&this._setProp(i,this[i],!0,!1);for(const i of s.map(xt))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(o){this._setProp(i,o)}})}_setAttr(t){let r=this.hasAttribute(t)?this.getAttribute(t):void 0;const s=xt(t);this._numberProps&&this._numberProps[s]&&(r=hc(r)),this._setProp(s,r,!1)}_getProp(t){return this._props[t]}_setProp(t,r,s=!0,i=!0){r!==this._props[t]&&(this._props[t]=r,i&&this._instance&&this._update(),s&&(r===!0?this.setAttribute(Ht(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(Ht(t),r+""):r||this.removeAttribute(Ht(t))))}_update(){ch(this._createVNode(),this.shadowRoot)}_createVNode(){const t=oe(this._def,He({},this._props));return this._instance||(t.ce=r=>{this._instance=r,r.isCE=!0;const s=(o,a)=>{this.dispatchEvent(new CustomEvent(o,{detail:a}))};r.emit=(o,...a)=>{s(o,a),Ht(o)!==o&&s(Ht(o),a)};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof ll){r.parent=i._instance,r.provides=i._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(r=>{const s=document.createElement("style");s.textContent=r,this.shadowRoot.appendChild(s)})}}function lA(n="$style"){{const t=tr();if(!t)return Oe;const r=t.type.__cssModules;if(!r)return Oe;const s=r[n];return s||Oe}}const jy=new WeakMap,Hy=new WeakMap,wc=Symbol("_moveCb"),Wp=Symbol("_enterCb"),qy={name:"TransitionGroup",props:He({},jI,{tag:String,moveClass:String}),setup(n,{slots:t}){const r=tr(),s=If();let i,o;return sl(()=>{if(!i.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!mA(i[0].el,r.vnode.el,a))return;i.forEach(fA),i.forEach(dA);const c=i.filter(pA);My(),c.forEach(l=>{const u=l.el,h=u.style;Vn(u,a),h.transform=h.webkitTransform=h.transitionDuration="";const f=u[wc]=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",f),u[wc]=null,lr(u,a))};u.addEventListener("transitionend",f)})}),()=>{const a=Ee(n),c=Vy(a);let l=a.tag||Ke;if(i=[],o)for(let u=0;u<o.length;u++){const h=o[u];h.el&&h.el instanceof Element&&(i.push(h),rs(h,Qs(h,c,s,r)),jy.set(h,h.el.getBoundingClientRect()))}o=t.default?nl(t.default()):[];for(let u=0;u<o.length;u++){const h=o[u];h.key!=null&&rs(h,Qs(h,c,s,r))}return oe(l,null,o)}}},uA=n=>delete n.mode;qy.props;const hA=qy;function fA(n){const t=n.el;t[wc]&&t[wc](),t[Wp]&&t[Wp]()}function dA(n){Hy.set(n,n.el.getBoundingClientRect())}function pA(n){const t=jy.get(n),r=Hy.get(n),s=t.left-r.left,i=t.top-r.top;if(s||i){const o=n.el.style;return o.transform=o.webkitTransform=`translate(${s}px,${i}px)`,o.transitionDuration="0s",n}}function mA(n,t,r){const s=n.cloneNode(),i=n[Js];i&&i.forEach(c=>{c.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),r.split(/\s+/).forEach(c=>c&&s.classList.add(c)),s.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(s);const{hasTransform:a}=Ly(s);return o.removeChild(s),a}const Pr=n=>{const t=n.props["onUpdate:modelValue"]||!1;return te(t)?r=>Ls(t,r):t};function gA(n){n.target.composing=!0}function Kp(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Xt=Symbol("_assign"),Nt={created(n,{modifiers:{lazy:t,trim:r,number:s}},i){n[Xt]=Pr(i);const o=s||i.props&&i.props.type==="number";Ln(n,t?"change":"input",a=>{if(a.target.composing)return;let c=n.value;r&&(c=c.trim()),o&&(c=uc(c)),n[Xt](c)}),r&&Ln(n,"change",()=>{n.value=n.value.trim()}),t||(Ln(n,"compositionstart",gA),Ln(n,"compositionend",Kp),Ln(n,"change",Kp))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,modifiers:{lazy:r,trim:s,number:i}},o){if(n[Xt]=Pr(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?uc(n.value):n.value,c=t??"";a!==c&&(document.activeElement===n&&n.type!=="range"&&(r||s&&n.value.trim()===c)||(n.value=c))}},kf={deep:!0,created(n,t,r){n[Xt]=Pr(r),Ln(n,"change",()=>{const s=n._modelValue,i=Ys(n),o=n.checked,a=n[Xt];if(te(s)){const c=zc(s,i),l=c!==-1;if(o&&!l)a(s.concat(i));else if(!o&&l){const u=[...s];u.splice(c,1),a(u)}}else if(ms(s)){const c=new Set(s);o?c.add(i):c.delete(i),a(c)}else a(Wy(n,o))})},mounted:zp,beforeUpdate(n,t,r){n[Xt]=Pr(r),zp(n,t,r)}};function zp(n,{value:t,oldValue:r},s){n._modelValue=t,te(t)?n.checked=zc(t,s.props.value)>-1:ms(t)?n.checked=t.has(s.props.value):t!==r&&(n.checked=Rr(t,Wy(n,!0)))}const Of={created(n,{value:t},r){n.checked=Rr(t,r.props.value),n[Xt]=Pr(r),Ln(n,"change",()=>{n[Xt](Ys(n))})},beforeUpdate(n,{value:t,oldValue:r},s){n[Xt]=Pr(s),t!==r&&(n.checked=Rr(t,s.props.value))}},vo={deep:!0,created(n,{value:t,modifiers:{number:r}},s){const i=ms(t);Ln(n,"change",()=>{const o=Array.prototype.filter.call(n.options,a=>a.selected).map(a=>r?uc(Ys(a)):Ys(a));n[Xt](n.multiple?i?new Set(o):o:o[0]),n._assigning=!0,_s(()=>{n._assigning=!1})}),n[Xt]=Pr(s)},mounted(n,{value:t,modifiers:{number:r}}){Gp(n,t)},beforeUpdate(n,t,r){n[Xt]=Pr(r)},updated(n,{value:t,modifiers:{number:r}}){n._assigning||Gp(n,t)}};function Gp(n,t,r){const s=n.multiple,i=te(t);if(!(s&&!i&&!ms(t))){for(let o=0,a=n.options.length;o<a;o++){const c=n.options[o],l=Ys(c);if(s)if(i){const u=typeof l;u==="string"||u==="number"?c.selected=t.some(h=>String(h)===String(l)):c.selected=zc(t,l)>-1}else c.selected=t.has(l);else if(Rr(Ys(c),t)){n.selectedIndex!==o&&(n.selectedIndex=o);return}}!s&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Ys(n){return"_value"in n?n._value:n.value}function Wy(n,t){const r=t?"_trueValue":"_falseValue";return r in n?n[r]:t}const Ky={created(n,t,r){Na(n,t,r,null,"created")},mounted(n,t,r){Na(n,t,r,null,"mounted")},beforeUpdate(n,t,r,s){Na(n,t,r,s,"beforeUpdate")},updated(n,t,r,s){Na(n,t,r,s,"updated")}};function zy(n,t){switch(n){case"SELECT":return vo;case"TEXTAREA":return Nt;default:switch(t){case"checkbox":return kf;case"radio":return Of;default:return Nt}}}function Na(n,t,r,s,i){const a=zy(n.tagName,r.props&&r.props.type)[i];a&&a(n,t,r,s)}function _A(){Nt.getSSRProps=({value:n})=>({value:n}),Of.getSSRProps=({value:n},t)=>{if(t.props&&Rr(t.props.value,n))return{checked:!0}},kf.getSSRProps=({value:n},t)=>{if(te(n)){if(t.props&&zc(n,t.props.value)>-1)return{checked:!0}}else if(ms(n)){if(t.props&&n.has(t.props.value))return{checked:!0}}else if(n)return{checked:!0}},Ky.getSSRProps=(n,t)=>{if(typeof t.type!="string")return;const r=zy(t.type.toUpperCase(),t.props&&t.props.type);if(r.getSSRProps)return r.getSSRProps(n,t)}}const yA=["ctrl","shift","alt","meta"],vA={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>yA.some(r=>n[`${r}Key`]&&!t.includes(r))},EA=(n,t)=>{const r=n._withMods||(n._withMods={}),s=t.join(".");return r[s]||(r[s]=(i,...o)=>{for(let a=0;a<t.length;a++){const c=vA[t[a]];if(c&&c(i,t))return}return n(i,...o)})},wA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Gy=(n,t)=>{const r=n._withKeys||(n._withKeys={}),s=t.join(".");return r[s]||(r[s]=i=>{if(!("key"in i))return;const o=Ht(i.key);if(t.some(a=>a===o||wA[a]===o))return n(i)})},Qy=He({patchProp:iA},$I);let Ji,Qp=!1;function Jy(){return Ji||(Ji=my(Qy))}function Yy(){return Ji=Qp?Ji:gy(Qy),Qp=!0,Ji}const ch=(...n)=>{Jy().render(...n)},Xy=(...n)=>{Yy().hydrate(...n)},Zy=(...n)=>{const t=Jy().createApp(...n),{mount:r}=t;return t.mount=s=>{const i=tv(s);if(!i)return;const o=t._component;!ce(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,ev(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t},TA=(...n)=>{const t=Yy().createApp(...n),{mount:r}=t;return t.mount=s=>{const i=tv(s);if(i)return r(i,!0,ev(i))},t};function ev(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function tv(n){return qe(n)?document.querySelector(n):n}let Jp=!1;const bA=()=>{Jp||(Jp=!0,_A(),KI())};/**
* vue v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const IA=()=>{},AA=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:W_,BaseTransitionPropsValidators:Af,Comment:At,DeprecationTypes:FI,EffectScope:af,ErrorCodes:ab,ErrorTypeStrings:OI,Fragment:Ke,KeepAlive:Vb,ReactiveEffect:zs,Static:ts,Suspense:Ab,Teleport:_I,Text:ss,TrackOpTypes:sb,Transition:cl,TransitionGroup:hA,TriggerOpTypes:ib,VueElement:ll,assertNumber:ob,callWithAsyncErrorHandling:Wt,callWithErrorHandling:Hn,camelize:xt,capitalize:qo,cloneVNode:Cn,compatUtils:MI,compile:IA,computed:Ye,createApp:Zy,createBlock:Go,createCommentVNode:Gn,createElementBlock:Se,createElementVNode:K,createHydrationRenderer:gy,createPropsRestProxy:Jb,createRenderer:my,createSSRApp:TA,createSlots:Mb,createStaticVNode:Ay,createTextVNode:je,createVNode:oe,customRef:P_,defineAsyncComponent:Db,defineComponent:Ko,defineCustomElement:$y,defineEmits:$b,defineExpose:jb,defineModel:Wb,defineOptions:Hb,defineProps:Bb,defineSSRCustomElement:aA,defineSlots:qb,devtools:xI,effect:CT,effectScope:cf,getCurrentInstance:tr,getCurrentScope:lf,getTransitionRawChildren:nl,guardReactiveProps:Iy,h:al,handleError:gs,hasInjectionContext:ay,hydrate:Xy,initCustomFormatter:CI,initDirectivesForSSR:bA,inject:Yt,isMemoSame:xy,isProxy:mf,isReactive:jn,isReadonly:Gs,isRef:ze,isRuntimeOnly:II,isShallow:co,isVNode:Cr,markRaw:Yc,mergeDefaults:Gb,mergeModels:Qb,mergeProps:Sy,nextTick:_s,normalizeClass:gi,normalizeProps:bT,normalizeStyle:mi,onActivated:z_,onBeforeMount:J_,onBeforeUnmount:ys,onBeforeUpdate:Y_,onDeactivated:G_,onErrorCaptured:ty,onMounted:xn,onRenderTracked:ey,onRenderTriggered:Z_,onScopeDispose:f_,onServerPrefetch:X_,onUnmounted:il,onUpdated:sl,openBlock:ye,popScopeId:mb,provide:zi,proxyRefs:yf,pushScopeId:pb,queuePostFlushCb:dc,reactive:Zn,readonly:pf,ref:_e,registerRuntimeCompiler:bI,render:ch,renderList:go,renderSlot:mc,resolveComponent:po,resolveDirective:bb,resolveDynamicComponent:Tb,resolveFilter:LI,resolveTransitionHooks:Qs,setBlockTracking:eh,setDevtoolsHook:DI,setTransitionHooks:rs,shallowReactive:df,shallowReadonly:QT,shallowRef:R_,ssrContextKey:B_,ssrUtils:VI,stop:PT,toDisplayString:gt,toHandlerKey:Wi,toHandlers:Fb,toRaw:Ee,toRef:k_,toRefs:Xc,toValue:ZT,transformVNodeArgs:yI,triggerRef:XT,unref:Le,useAttrs:zb,useCssModule:lA,useCssVars:By,useModel:RI,useSSRContext:$_,useSlots:ry,useTransitionState:If,vModelCheckbox:kf,vModelDynamic:Ky,vModelRadio:Of,vModelSelect:vo,vModelText:Nt,vShow:yo,version:Dy,warn:kI,watch:Kt,watchEffect:Ku,watchPostEffect:j_,watchSyncEffect:H_,withAsyncContext:Yb,withCtx:lt,withDefaults:Kb,withDirectives:dt,withKeys:Gy,withMemo:PI,withModifiers:EA,withScopeId:gb},Symbol.toStringTag,{value:"Module"}));var SA=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let nv;const ul=n=>nv=n,rv=Symbol();function lh(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Yi;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Yi||(Yi={}));function RA(){const n=cf(!0),t=n.run(()=>_e({}));let r=[],s=[];const i=Yc({install(o){ul(i),i._a=o,o.provide(rv,i),o.config.globalProperties.$pinia=i,s.forEach(a=>r.push(a)),s=[]},use(o){return!this._a&&!SA?s.push(o):r.push(o),this},_p:r,_a:null,_e:n,_s:new Map,state:t});return i}const sv=()=>{};function Yp(n,t,r,s=sv){n.push(t);const i=()=>{const o=n.indexOf(t);o>-1&&(n.splice(o,1),s())};return!r&&lf()&&f_(i),i}function Is(n,...t){n.slice().forEach(r=>{r(...t)})}const CA=n=>n();function uh(n,t){n instanceof Map&&t instanceof Map&&t.forEach((r,s)=>n.set(s,r)),n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const r in t){if(!t.hasOwnProperty(r))continue;const s=t[r],i=n[r];lh(i)&&lh(s)&&n.hasOwnProperty(r)&&!ze(s)&&!jn(s)?n[r]=uh(i,s):n[r]=s}return n}const PA=Symbol();function kA(n){return!lh(n)||!n.hasOwnProperty(PA)}const{assign:ur}=Object;function OA(n){return!!(ze(n)&&n.effect)}function xA(n,t,r,s){const{state:i,actions:o,getters:a}=t,c=r.state.value[n];let l;function u(){c||(r.state.value[n]=i?i():{});const h=Xc(r.state.value[n]);return ur(h,o,Object.keys(a||{}).reduce((f,d)=>(f[d]=Yc(Ye(()=>{ul(r);const p=r._s.get(n);return a[d].call(p,p)})),f),{}))}return l=iv(n,u,t,r,s,!0),l}function iv(n,t,r={},s,i,o){let a;const c=ur({actions:{}},r),l={deep:!0};let u,h,f=[],d=[],p;const g=s.state.value[n];!o&&!g&&(s.state.value[n]={}),_e({});let v;function w(b){let R;u=h=!1,typeof b=="function"?(b(s.state.value[n]),R={type:Yi.patchFunction,storeId:n,events:p}):(uh(s.state.value[n],b),R={type:Yi.patchObject,payload:b,storeId:n,events:p});const A=v=Symbol();_s().then(()=>{v===A&&(u=!0)}),h=!0,Is(f,R,s.state.value[n])}const C=o?function(){const{state:R}=r,A=R?R():{};this.$patch(U=>{ur(U,A)})}:sv;function T(){a.stop(),f=[],d=[],s._s.delete(n)}function y(b,R){return function(){ul(s);const A=Array.from(arguments),U=[],N=[];function q($){U.push($)}function ge($){N.push($)}Is(d,{args:A,name:b,store:I,after:q,onError:ge});let he;try{he=R.apply(this&&this.$id===n?this:I,A)}catch($){throw Is(N,$),$}return he instanceof Promise?he.then($=>(Is(U,$),$)).catch($=>(Is(N,$),Promise.reject($))):(Is(U,he),he)}}const E={_p:s,$id:n,$onAction:Yp.bind(null,d),$patch:w,$reset:C,$subscribe(b,R={}){const A=Yp(f,b,R.detached,()=>U()),U=a.run(()=>Kt(()=>s.state.value[n],N=>{(R.flush==="sync"?h:u)&&b({storeId:n,type:Yi.direct,events:p},N)},ur({},l,R)));return A},$dispose:T},I=Zn(E);s._s.set(n,I);const k=(s._a&&s._a.runWithContext||CA)(()=>s._e.run(()=>(a=cf()).run(t)));for(const b in k){const R=k[b];if(ze(R)&&!OA(R)||jn(R))o||(g&&kA(R)&&(ze(R)?R.value=g[b]:uh(R,g[b])),s.state.value[n][b]=R);else if(typeof R=="function"){const A=y(b,R);k[b]=A,c.actions[b]=R}}return ur(I,k),ur(Ee(I),k),Object.defineProperty(I,"$state",{get:()=>s.state.value[n],set:b=>{w(R=>{ur(R,b)})}}),s._p.forEach(b=>{ur(I,a.run(()=>b({store:I,app:s._a,pinia:s,options:c})))}),g&&o&&r.hydrate&&r.hydrate(I.$state,g),u=!0,h=!0,I}function DA(n,t,r){let s,i;const o=typeof t=="function";typeof n=="string"?(s=n,i=o?r:t):(i=n,s=n.id);function a(c,l){const u=ay();return c=c||(u?Yt(rv,null):null),c&&ul(c),c=nv,c._s.has(s)||(o?iv(s,t,i,c):xA(s,i,c)),c._s.get(s)}return a.$id=s,a}function _i(n){{n=Ee(n);const t={};for(const r in n){const s=n[r];(ze(s)||jn(s))&&(t[r]=k_(n,r))}return t}}var Xp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=function(n){const t=[];let r=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128)}return t},NA=function(n){const t=[];let r=0,s=0;for(;r<n.length;){const i=n[r++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[r++];t[s++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[r++],a=n[r++],c=n[r++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;t[s++]=String.fromCharCode(55296+(l>>10)),t[s++]=String.fromCharCode(56320+(l&1023))}else{const o=n[r++],a=n[r++];t[s++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return t.join("")},av={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const o=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=o>>2,f=(o&3)<<4|c>>4;let d=(c&15)<<2|u>>6,p=u&63;l||(p=64,a||(d=64)),s.push(r[h],r[f],r[d],r[p])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(ov(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):NA(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const o=r[n.charAt(i++)],c=i<n.length?r[n.charAt(i)]:0;++i;const u=i<n.length?r[n.charAt(i)]:64;++i;const f=i<n.length?r[n.charAt(i)]:64;if(++i,o==null||c==null||u==null||f==null)throw new VA;const d=o<<2|c>>4;if(s.push(d),u!==64){const p=c<<4&240|u>>2;if(s.push(p),f!==64){const g=u<<6&192|f;s.push(g)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class VA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LA=function(n){const t=ov(n);return av.encodeByteArray(t,!0)},Tc=function(n){return LA(n).replace(/\./g,"")},cv=function(n){try{return av.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=()=>MA().__FIREBASE_DEFAULTS__,UA=()=>{if(typeof process>"u"||typeof Xp>"u")return;const n=Xp.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&cv(n[1]);return t&&JSON.parse(t)},hl=()=>{try{return FA()||UA()||BA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lv=n=>{var t,r;return(r=(t=hl())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[n]},$A=n=>{const t=lv(n);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),s]:[t.substring(0,r),s]},uv=()=>{var n;return(n=hl())===null||n===void 0?void 0:n.config},hv=n=>{var t;return(t=hl())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=t||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Tc(JSON.stringify(r)),Tc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function WA(){var n;const t=(n=hl())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GA(){const n=rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QA(){return!WA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fv(){try{return typeof indexedDB=="object"}catch{return!1}}function JA(){return new Promise((n,t)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="FirebaseError";class nr extends Error{constructor(t,r,s){super(r),this.code=t,this.customData=s,this.name=YA,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jo.prototype.create)}}class Jo{constructor(t,r,s){this.service=t,this.serviceName=r,this.errors=s}create(t,...r){const s=r[0]||{},i=`${this.service}/${t}`,o=this.errors[t],a=o?XA(o,s):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new nr(i,c,s)}}function XA(n,t){return n.replace(ZA,(r,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const ZA=/\{\$([^}]+)}/g;function eS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function bc(n,t){if(n===t)return!0;const r=Object.keys(n),s=Object.keys(t);for(const i of r){if(!s.includes(i))return!1;const o=n[i],a=t[i];if(Zp(o)&&Zp(a)){if(!bc(o,a))return!1}else if(o!==a)return!1}for(const i of s)if(!r.includes(i))return!1;return!0}function Zp(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(n){const t=[];for(const[r,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Ui(n){const t={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,o]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function Bi(n){const t=n.indexOf("?");if(!t)return"";const r=n.indexOf("#",t);return n.substring(t,r>0?r:void 0)}function tS(n,t){const r=new nS(n,t);return r.subscribe.bind(r)}class nS{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,s){let i;if(t===void 0&&r===void 0&&s===void 0)throw new Error("Missing Observer.");rS(t,["next","error","complete"])?i=t:i={next:t,error:r,complete:s},i.next===void 0&&(i.next=fu),i.error===void 0&&(i.error=fu),i.complete===void 0&&(i.complete=fu);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rS(n,t){if(typeof n!="object"||n===null)return!1;for(const r of t)if(r in n&&typeof n[r]=="function")return!0;return!1}function fu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(n){return n&&n._delegate?n._delegate:n}class as{constructor(t,r,s){this.name=t,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const s=new jA;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(oS(t))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});s.resolve(o)}catch{}}}}clearInstance(t=Hr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Hr){return this.instances.has(t)}getOptions(t=Hr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);s===c&&a.resolve(i)}return i}onInit(t,r){var s;const i=this.normalizeInstanceIdentifier(r),o=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;o.add(t),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&t(a,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,r){const s=this.onInitCallbacks.get(r);if(s)for(const i of s)try{i(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iS(t),options:r}),this.instances.set(t,s),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Hr){return this.component?this.component.multipleInstances?t:Hr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iS(n){return n===Hr?void 0:n}function oS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new sS(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(be||(be={}));const cS={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},lS=be.INFO,uS={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},hS=(n,t,...r)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),i=uS[t];if(i)console[i](`[${s}]  ${n.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class xf{constructor(t){this.name=t,this._logLevel=lS,this._logHandler=hS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in be))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?cS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...t),this._logHandler(this,be.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...t),this._logHandler(this,be.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,be.INFO,...t),this._logHandler(this,be.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,be.WARN,...t),this._logHandler(this,be.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...t),this._logHandler(this,be.ERROR,...t)}}const fS=(n,t)=>t.some(r=>n instanceof r);let em,tm;function dS(){return em||(em=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pS(){return tm||(tm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dv=new WeakMap,hh=new WeakMap,pv=new WeakMap,du=new WeakMap,Df=new WeakMap;function mS(n){const t=new Promise((r,s)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{r(Tr(n.result)),i()},a=()=>{s(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return t.then(r=>{r instanceof IDBCursor&&dv.set(r,n)}).catch(()=>{}),Df.set(t,n),t}function gS(n){if(hh.has(n))return;const t=new Promise((r,s)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{r(),i()},a=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});hh.set(n,t)}let fh={get(n,t,r){if(n instanceof IDBTransaction){if(t==="done")return hh.get(n);if(t==="objectStoreNames")return n.objectStoreNames||pv.get(n);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Tr(n[t])},set(n,t,r){return n[t]=r,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function _S(n){fh=n(fh)}function yS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const s=n.call(pu(this),t,...r);return pv.set(s,t.sort?t.sort():[t]),Tr(s)}:pS().includes(n)?function(...t){return n.apply(pu(this),t),Tr(dv.get(this))}:function(...t){return Tr(n.apply(pu(this),t))}}function vS(n){return typeof n=="function"?yS(n):(n instanceof IDBTransaction&&gS(n),fS(n,dS())?new Proxy(n,fh):n)}function Tr(n){if(n instanceof IDBRequest)return mS(n);if(du.has(n))return du.get(n);const t=vS(n);return t!==n&&(du.set(n,t),Df.set(t,n)),t}const pu=n=>Df.get(n);function ES(n,t,{blocked:r,upgrade:s,blocking:i,terminated:o}={}){const a=indexedDB.open(n,t),c=Tr(a);return s&&a.addEventListener("upgradeneeded",l=>{s(Tr(a.result),l.oldVersion,l.newVersion,Tr(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const wS=["get","getKey","getAll","getAllKeys","count"],TS=["put","add","delete","clear"],mu=new Map;function nm(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(mu.get(t))return mu.get(t);const r=t.replace(/FromIndex$/,""),s=t!==r,i=TS.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(i||wS.includes(r)))return;const o=async function(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(c.shift())),(await Promise.all([u[r](...c),i&&l.done]))[0]};return mu.set(t,o),o}_S(n=>({...n,get:(t,r,s)=>nm(t,r)||n.get(t,r,s),has:(t,r)=>!!nm(t,r)||n.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(IS(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function IS(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const dh="@firebase/app",rm="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new xf("@firebase/app"),AS="@firebase/app-compat",SS="@firebase/analytics-compat",RS="@firebase/analytics",CS="@firebase/app-check-compat",PS="@firebase/app-check",kS="@firebase/auth",OS="@firebase/auth-compat",xS="@firebase/database",DS="@firebase/database-compat",NS="@firebase/functions",VS="@firebase/functions-compat",LS="@firebase/installations",MS="@firebase/installations-compat",FS="@firebase/messaging",US="@firebase/messaging-compat",BS="@firebase/performance",$S="@firebase/performance-compat",jS="@firebase/remote-config",HS="@firebase/remote-config-compat",qS="@firebase/storage",WS="@firebase/storage-compat",KS="@firebase/firestore",zS="@firebase/firestore-compat",GS="firebase",QS="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="[DEFAULT]",JS={[dh]:"fire-core",[AS]:"fire-core-compat",[RS]:"fire-analytics",[SS]:"fire-analytics-compat",[PS]:"fire-app-check",[CS]:"fire-app-check-compat",[kS]:"fire-auth",[OS]:"fire-auth-compat",[xS]:"fire-rtdb",[DS]:"fire-rtdb-compat",[NS]:"fire-fn",[VS]:"fire-fn-compat",[LS]:"fire-iid",[MS]:"fire-iid-compat",[FS]:"fire-fcm",[US]:"fire-fcm-compat",[BS]:"fire-perf",[$S]:"fire-perf-compat",[jS]:"fire-rc",[HS]:"fire-rc-compat",[qS]:"fire-gcs",[WS]:"fire-gcs-compat",[KS]:"fire-fst",[zS]:"fire-fst-compat","fire-js":"fire-js",[GS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,YS=new Map,mh=new Map;function sm(n,t){try{n.container.addComponent(t)}catch(r){cs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,r)}}function Xs(n){const t=n.name;if(mh.has(t))return cs.debug(`There were multiple attempts to register component ${t}.`),!1;mh.set(t,n);for(const r of Ic.values())sm(r,n);for(const r of YS.values())sm(r,n);return!0}function Nf(n,t){const r=n.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),n.container.getProvider(t)}function yn(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new Jo("app","Firebase",XS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t,r,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=QS;function mv(n,t={}){let r=n;typeof t!="object"&&(t={name:t});const s=Object.assign({name:ph,automaticDataCollectionEnabled:!1},t),i=s.name;if(typeof i!="string"||!i)throw br.create("bad-app-name",{appName:String(i)});if(r||(r=uv()),!r)throw br.create("no-options");const o=Ic.get(i);if(o){if(bc(r,o.options)&&bc(s,o.config))return o;throw br.create("duplicate-app",{appName:i})}const a=new aS(i);for(const l of mh.values())a.addComponent(l);const c=new ZS(r,s,a);return Ic.set(i,c),c}function gv(n=ph){const t=Ic.get(n);if(!t&&n===ph&&uv())return mv();if(!t)throw br.create("no-app",{appName:n});return t}function Ir(n,t,r){var s;let i=(s=JS[n])!==null&&s!==void 0?s:n;r&&(i+=`-${r}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const c=[`Unable to register library "${i}" with version "${t}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),cs.warn(c.join(" "));return}Xs(new as(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="firebase-heartbeat-database",tR=1,Eo="firebase-heartbeat-store";let gu=null;function _v(){return gu||(gu=ES(eR,tR,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Eo)}catch(r){console.warn(r)}}}}).catch(n=>{throw br.create("idb-open",{originalErrorMessage:n.message})})),gu}async function nR(n){try{const r=(await _v()).transaction(Eo),s=await r.objectStore(Eo).get(yv(n));return await r.done,s}catch(t){if(t instanceof nr)cs.warn(t.message);else{const r=br.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});cs.warn(r.message)}}}async function im(n,t){try{const s=(await _v()).transaction(Eo,"readwrite");await s.objectStore(Eo).put(t,yv(n)),await s.done}catch(r){if(r instanceof nr)cs.warn(r.message);else{const s=br.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});cs.warn(s.message)}}}function yv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=1024,sR=30*24*60*60*1e3;class iR{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new aR(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,r;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=om();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=sR}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=om(),{heartbeatsToSend:s,unsentEntries:i}=oR(this._heartbeatsCache.heartbeats),o=Tc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function om(){return new Date().toISOString().substring(0,10)}function oR(n,t=rR){const r=[];let s=n.slice();for(const i of n){const o=r.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),am(r)>t){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),am(r)>t){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class aR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fv()?JA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await nR(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return im(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return im(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function am(n){return Tc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(n){Xs(new as("platform-logger",t=>new bS(t),"PRIVATE")),Xs(new as("heartbeat",t=>new iR(t),"PRIVATE")),Ir(dh,rm,n),Ir(dh,rm,"esm2017"),Ir("fire-js","")}cR("");var lR="firebase",uR="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(lR,uR,"app");const hR={apiKey:"AIzaSyCFMnrQ9wJoq1V1-V-Xht7reaU5cS_QndI",authDomain:"todoproject-64b38.firebaseapp.com",databaseURL:"https://todoproject-64b38-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"todoproject-64b38",storageBucket:"todoproject-64b38.appspot.com",messagingSenderId:"1031823051610",appId:"1:1031823051610:web:c5d9fb656c7d4620310163",measurementId:"G-6HLK2H14LD"},ls=mv(hR);function Vf(n,t){var r={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(r[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(r[s[i]]=n[s[i]]);return r}function vv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fR=vv,Ev=new Jo("auth","Firebase",vv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new xf("@firebase/auth");function dR(n,...t){Ac.logLevel<=be.WARN&&Ac.warn(`Auth (${yi}): ${n}`,...t)}function Ja(n,...t){Ac.logLevel<=be.ERROR&&Ac.error(`Auth (${yi}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(n,...t){throw Lf(n,...t)}function Tn(n,...t){return Lf(n,...t)}function wv(n,t,r){const s=Object.assign(Object.assign({},fR()),{[t]:r});return new Jo("auth","Firebase",s).create(t,{appName:n.name})}function qn(n){return wv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lf(n,...t){if(typeof n!="string"){const r=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(r,...s)}return Ev.create(n,...t)}function ae(n,t,...r){if(!n)throw Lf(t,...r)}function Mn(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Ja(t),new Error(t)}function Qn(n,t){n||Mn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function pR(){return cm()==="http:"||cm()==="https:"}function cm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pR()||KA()||"connection"in navigator)?navigator.onLine:!0}function gR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,r){this.shortDelay=t,this.longDelay=r,Qn(r>t,"Short delay should be less than long delay!"),this.isMobile=qA()||zA()}get(){return mR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n,t){Qn(n.emulator,"Emulator should always be set here");const{url:r}=n.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{static initialize(t,r,s){this.fetchImpl=t,r&&(this.headersImpl=r),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new Xo(3e4,6e4);function Vr(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function Lr(n,t,r,s,i={}){return bv(n,i,async()=>{let o={},a={};s&&(t==="GET"?a=s:o={body:JSON.stringify(s)});const c=Yo(Object.assign({key:n.config.apiKey},a)).slice(1),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),Tv.fetch()(Iv(n,n.config.apiHost,r,c),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},o))})}async function bv(n,t,r){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},_R),t);try{const i=new ER(n),o=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Va(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Va(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Va(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Va(n,"user-disabled",a);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw wv(n,h,u);an(n,h)}}catch(i){if(i instanceof nr)throw i;an(n,"network-request-failed",{message:String(i)})}}async function Zo(n,t,r,s,i={}){const o=await Lr(n,t,r,s,i);return"mfaPendingCredential"in o&&an(n,"multi-factor-auth-required",{_serverResponse:o}),o}function Iv(n,t,r,s){const i=`${t}${r}?${s}`;return n.config.emulator?Mf(n.config,i):`${n.config.apiScheme}://${i}`}function vR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ER{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,s)=>{this.timer=setTimeout(()=>s(Tn(this.auth,"network-request-failed")),yR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Va(n,t,r){const s={appName:n.name};r.email&&(s.email=r.email),r.phoneNumber&&(s.phoneNumber=r.phoneNumber);const i=Tn(n,t,s);return i.customData._tokenResponse=r,i}function lm(n){return n!==void 0&&n.enterprise!==void 0}class wR{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return vR(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}async function TR(n,t){return Lr(n,"GET","/v2/recaptchaConfig",Vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(n,t){return Lr(n,"POST","/v1/accounts:delete",t)}async function Av(n,t){return Lr(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function IR(n,t=!1){const r=ut(n),s=await r.getIdToken(t),i=Ff(s);ae(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:s,authTime:Xi(_u(i.auth_time)),issuedAtTime:Xi(_u(i.iat)),expirationTime:Xi(_u(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function _u(n){return Number(n)*1e3}function Ff(n){const[t,r,s]=n.split(".");if(t===void 0||r===void 0||s===void 0)return Ja("JWT malformed, contained fewer than 3 sections"),null;try{const i=cv(r);return i?JSON.parse(i):(Ja("Failed to decode base64 JWT payload"),null)}catch(i){return Ja("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function um(n){const t=Ff(n);return ae(t,"internal-error"),ae(typeof t.exp<"u","internal-error"),ae(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(n,t,r=!1){if(r)return t;try{return await t}catch(s){throw s instanceof nr&&AR(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function AR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xi(this.lastLoginAt),this.creationTime=Xi(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(n){var t;const r=n.auth,s=await n.getIdToken(),i=await wo(n,Av(r,{idToken:s}));ae(i==null?void 0:i.users.length,r,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?Sv(o.providerUserInfo):[],c=CR(n.providerData,a),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),h=l?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new _h(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function RR(n){const t=ut(n);await Sc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function CR(n,t){return[...n.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function Sv(n){return n.map(t=>{var{providerId:r}=t,s=Vf(t,["providerId"]);return{providerId:r,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(n,t){const r=await bv(n,{},async()=>{const s=Yo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=Iv(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Tv.fetch()(a,{method:"POST",headers:c,body:s})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function kR(n,t){return Lr(n,"POST","/v2/accounts:revokeToken",Vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ae(t.idToken,"internal-error"),ae(typeof t.idToken<"u","internal-error"),ae(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):um(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){ae(t.length!==0,"internal-error");const r=um(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:s,refreshToken:i,expiresIn:o}=await PR(t,r);this.updateTokensAndExpiration(s,i,Number(o))}updateTokensAndExpiration(t,r,s){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,r){const{refreshToken:s,accessToken:i,expirationTime:o}=r,a=new $s;return s&&(ae(typeof s=="string","internal-error",{appName:t}),a.refreshToken=s),i&&(ae(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),o&&(ae(typeof o=="number","internal-error",{appName:t}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new $s,this.toJSON())}_performRefresh(){return Mn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(n,t){ae(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Fn{constructor(t){var{uid:r,auth:s,stsTokenManager:i}=t,o=Vf(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _h(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const r=await wo(this,this.stsTokenManager.getToken(this.auth,t));return ae(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return IR(this,t)}reload(){return RR(this)}_assign(t){this!==t&&(ae(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Fn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),r&&await Sc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(qn(this.auth));const t=await this.getIdToken();return await wo(this,bR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var s,i,o,a,c,l,u,h;const f=(s=r.displayName)!==null&&s!==void 0?s:void 0,d=(i=r.email)!==null&&i!==void 0?i:void 0,p=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,g=(a=r.photoURL)!==null&&a!==void 0?a:void 0,v=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,C=(u=r.createdAt)!==null&&u!==void 0?u:void 0,T=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:y,emailVerified:E,isAnonymous:I,providerData:S,stsTokenManager:k}=r;ae(y&&k,t,"internal-error");const b=$s.fromJSON(this.name,k);ae(typeof y=="string",t,"internal-error"),or(f,t.name),or(d,t.name),ae(typeof E=="boolean",t,"internal-error"),ae(typeof I=="boolean",t,"internal-error"),or(p,t.name),or(g,t.name),or(v,t.name),or(w,t.name),or(C,t.name),or(T,t.name);const R=new Fn({uid:y,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:I,photoURL:g,phoneNumber:p,tenantId:v,stsTokenManager:b,createdAt:C,lastLoginAt:T});return S&&Array.isArray(S)&&(R.providerData=S.map(A=>Object.assign({},A))),w&&(R._redirectEventId=w),R}static async _fromIdTokenResponse(t,r,s=!1){const i=new $s;i.updateFromServerResponse(r);const o=new Fn({uid:r.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await Sc(o),o}static async _fromGetAccountInfoResponse(t,r,s){const i=r.users[0];ae(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Sv(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new $s;c.updateFromIdToken(s);const l=new Fn({uid:i.localId,auth:t,stsTokenManager:c,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _h(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=new Map;function Un(n){Qn(n instanceof Function,"Expected a class definition");let t=hm.get(n);return t?(Qn(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,hm.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}Rv.type="NONE";const fm=Rv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(n,t,r){return`firebase:${n}:${t}:${r}`}class js{constructor(t,r,s){this.persistence=t,this.auth=r,this.userKey=s;const{config:i,name:o}=this.auth;this.fullUserKey=Ya(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ya("persistence",i.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Fn._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,s="authUser"){if(!r.length)return new js(Un(fm),t,s);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Un(fm);const a=Ya(s,t.config.apiKey,t.name);let c=null;for(const u of r)try{const h=await u._get(a);if(h){const f=Fn._fromJSON(t,h);u!==o&&(c=f),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new js(o,t,s):(o=l[0],c&&await o._set(a,c.toJSON()),await Promise.all(r.map(async u=>{if(u!==o)try{await u._remove(a)}catch{}})),new js(o,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Cv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xv(t))return"Blackberry";if(Dv(t))return"Webos";if(Uf(t))return"Safari";if((t.includes("chrome/")||Pv(t))&&!t.includes("edge/"))return"Chrome";if(Ov(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(r);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Cv(n=rt()){return/firefox\//i.test(n)}function Uf(n=rt()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Pv(n=rt()){return/crios\//i.test(n)}function kv(n=rt()){return/iemobile/i.test(n)}function Ov(n=rt()){return/android/i.test(n)}function xv(n=rt()){return/blackberry/i.test(n)}function Dv(n=rt()){return/webos/i.test(n)}function fl(n=rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function OR(n=rt()){var t;return fl(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function xR(){return GA()&&document.documentMode===10}function Nv(n=rt()){return fl(n)||Ov(n)||Dv(n)||xv(n)||/windows phone/i.test(n)||kv(n)}function DR(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(n,t=[]){let r;switch(n){case"Browser":r=dm(rt());break;case"Worker":r=`${dm(rt())}-${n}`;break;default:r=n}const s=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${yi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const s=o=>new Promise((a,c)=>{try{const l=t(o);a(l)}catch(l){c(l)}});s.onAbort=r,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const s of this.queue)await s(t),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,t={}){return Lr(n,"GET","/v2/passwordPolicy",Vr(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=6;class MR{constructor(t){var r,s,i,o;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:LR,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,s,i,o,a,c;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(t,r){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(r.meetsMinPasswordLength=t.length>=s),i&&(r.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,r,s,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(t,r,s,i){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pm(this),this.idTokenSubscription=new pm(this),this.beforeStateQueue=new NR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ev,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Un(r)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await js.create(this,t),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await Av(this,{idToken:t}),s=await Fn._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(s)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===c)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Sc(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=gR()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(yn(this.app))return Promise.reject(qn(this));const r=t?ut(t):null;return r&&ae(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&ae(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return yn(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await VR(this),r=new MR(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Jo("auth","Firebase",t())}onAuthStateChanged(t,r,s){return this.registerStateListener(this.authStateSubscription,t,r,s)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,s){return this.registerStateListener(this.idTokenSubscription,t,r,s)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(s.tenantId=this.tenantId),await kR(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const s=await this.getOrInitRedirectPersistenceManager(r);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Un(t)||this._popupRedirectResolver;ae(r,this,"argument-error"),this.redirectPersistenceManager=await js.create(this,[Un(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,s;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,s,i){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const l=t.addObserver(r,s,i);return()=>{a=!0,l()}}else{const l=t.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Vv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(r["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var t;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&dR(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function vs(n){return ut(n)}class pm{constructor(t){this.auth=t,this.observer=null,this.addObserver=tS(r=>this.observer=r)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UR(n){dl=n}function Lv(n){return dl.loadJS(n)}function BR(){return dl.recaptchaEnterpriseScript}function $R(){return dl.gapiScript}function jR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const HR="recaptcha-enterprise",qR="NO_RECAPTCHA";class WR{constructor(t){this.type=HR,this.auth=vs(t)}async verify(t="verify",r=!1){async function s(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{TR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new wR(l);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,a(u.siteKey)}}).catch(l=>{c(l)})})}function i(o,a,c){const l=window.grecaptcha;lm(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:t}).then(u=>{a(u)}).catch(()=>{a(qR)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{s(this.auth).then(c=>{if(!r&&lm(window.grecaptcha))i(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=BR();l.length!==0&&(l+=c),Lv(l).then(()=>{i(c,o,a)}).catch(u=>{a(u)})}}).catch(c=>{a(c)})})}}async function mm(n,t,r,s=!1){const i=new WR(n);let o;try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const a=Object.assign({},t);return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function yh(n,t,r,s){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await mm(n,t,r,r==="getOobCode");return s(n,o)}else return s(n,t).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await mm(n,t,r,r==="getOobCode");return s(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(n,t){const r=Nf(n,"auth");if(r.isInitialized()){const i=r.getImmediate(),o=r.getOptions();if(bc(o,t??{}))return i;an(i,"already-initialized")}return r.initialize({options:t})}function zR(n,t){const r=(t==null?void 0:t.persistence)||[],s=(Array.isArray(r)?r:[r]).map(Un);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function GR(n,t,r){const s=vs(n);ae(s._canInitEmulator,s,"emulator-config-failed"),ae(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),o=Mv(t),{host:a,port:c}=QR(t),l=c===null?"":`:${c}`;s.config.emulator={url:`${o}//${a}${l}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||JR()}function Mv(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function QR(n){const t=Mv(n),r=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!r)return{host:"",port:null};const s=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const o=i[1];return{host:o,port:gm(s.substr(o.length+1))}}else{const[o,a]=s.split(":");return{host:o,port:gm(a)}}}function gm(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function JR(){function n(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Mn("not implemented")}_getIdTokenResponse(t){return Mn("not implemented")}_linkToIdToken(t,r){return Mn("not implemented")}_getReauthenticationResolver(t){return Mn("not implemented")}}async function YR(n,t){return Lr(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(n,t){return Zo(n,"POST","/v1/accounts:signInWithPassword",Vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(n,t){return Zo(n,"POST","/v1/accounts:signInWithEmailLink",Vr(n,t))}async function eC(n,t){return Zo(n,"POST","/v1/accounts:signInWithEmailLink",Vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Bf{constructor(t,r,s,i=null){super("password",s),this._email=t,this._password=r,this._tenantId=i}static _fromEmailAndPassword(t,r){return new To(t,r,"password")}static _fromEmailAndCode(t,r,s=null){return new To(t,r,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yh(t,r,"signInWithPassword",XR);case"emailLink":return ZR(t,{email:this._email,oobCode:this._password});default:an(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const s={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yh(t,s,"signUpPassword",YR);case"emailLink":return eC(t,{idToken:r,email:this._email,oobCode:this._password});default:an(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(n,t){return Zo(n,"POST","/v1/accounts:signInWithIdp",Vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="http://localhost";class us extends Bf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new us(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):an("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i}=r,o=Vf(r,["providerId","signInMethod"]);if(!s||!i)return null;const a=new us(s,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(t){const r=this.buildRequest();return Hs(t,r)}_linkToIdToken(t,r){const s=this.buildRequest();return s.idToken=r,Hs(t,s)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Hs(t,r)}buildRequest(){const t={requestUri:tC,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Yo(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rC(n){const t=Ui(Bi(n)).link,r=t?Ui(Bi(t)).deep_link_id:null,s=Ui(Bi(n)).deep_link_id;return(s?Ui(Bi(s)).link:null)||s||r||t||n}class $f{constructor(t){var r,s,i,o,a,c;const l=Ui(Bi(t)),u=(r=l.apiKey)!==null&&r!==void 0?r:null,h=(s=l.oobCode)!==null&&s!==void 0?s:null,f=nC((i=l.mode)!==null&&i!==void 0?i:null);ae(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){const r=rC(t);try{return new $f(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.providerId=vi.PROVIDER_ID}static credential(t,r){return To._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const s=$f.parseLink(r);return ae(s,"argument-error"),To._fromEmailAndCode(t,s.code,s.tenantId)}}vi.PROVIDER_ID="password";vi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Fv{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends ea{constructor(){super("facebook.com")}static credential(t){return us._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return gr.credentialFromTaggedObject(t)}static credentialFromError(t){return gr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return gr.credential(t.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends ea{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return us._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return _r.credentialFromTaggedObject(t)}static credentialFromError(t){return _r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:s}=t;if(!r&&!s)return null;try{return _r.credential(r,s)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends ea{constructor(){super("github.com")}static credential(t){return us._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return yr.credentialFromTaggedObject(t)}static credentialFromError(t){return yr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return yr.credential(t.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends ea{constructor(){super("twitter.com")}static credential(t,r){return us._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return vr.credentialFromTaggedObject(t)}static credentialFromError(t){return vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:s}=t;if(!r||!s)return null;try{return vr.credential(r,s)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(n,t){return Zo(n,"POST","/v1/accounts:signUp",Vr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,s,i=!1){const o=await Fn._fromIdTokenResponse(t,s,i),a=_m(s);return new hs({user:o,providerId:a,_tokenResponse:s,operationType:r})}static async _forOperation(t,r,s){await t._updateTokensIfNecessary(s,!0);const i=_m(s);return new hs({user:t,providerId:i,_tokenResponse:s,operationType:r})}}function _m(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends nr{constructor(t,r,s,i){var o;super(r.code,r.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,r,s,i){return new Rc(t,r,s,i)}}function Uv(n,t,r,s){return(t==="reauthenticate"?r._getReauthenticationResolver(n):r._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Rc._fromErrorAndOperation(n,o,t,s):o})}async function iC(n,t,r=!1){const s=await wo(n,t._linkToIdToken(n.auth,await n.getIdToken()),r);return hs._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(n,t,r=!1){const{auth:s}=n;if(yn(s.app))return Promise.reject(qn(s));const i="reauthenticate";try{const o=await wo(n,Uv(s,i,t,n),r);ae(o.idToken,s,"internal-error");const a=Ff(o.idToken);ae(a,s,"internal-error");const{sub:c}=a;return ae(n.uid===c,s,"user-mismatch"),hs._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&an(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bv(n,t,r=!1){if(yn(n.app))return Promise.reject(qn(n));const s="signIn",i=await Uv(n,s,t),o=await hs._fromIdTokenResponse(n,s,i);return r||await n._updateCurrentUser(o.user),o}async function aC(n,t){return Bv(vs(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $v(n){const t=vs(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function cC(n,t,r){if(yn(n.app))return Promise.reject(qn(n));const s=vs(n),a=await yh(s,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sC).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&$v(n),l}),c=await hs._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(c.user),c}function lC(n,t,r){return yn(n.app)?Promise.reject(qn(n)):aC(ut(n),vi.credential(t,r)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&$v(n),s})}function uC(n,t,r,s){return ut(n).onIdTokenChanged(t,r,s)}function hC(n,t,r){return ut(n).beforeAuthStateChanged(t,r)}function fC(n,t,r,s){return ut(n).onAuthStateChanged(t,r,s)}function dC(n){return ut(n).signOut()}const Cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Cc,"1"),this.storage.removeItem(Cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){const n=rt();return Uf(n)||fl(n)}const mC=1e3,gC=10;class Hv extends jv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=pC()&&DR(),this.fallbackToPolling=Nv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const s=this.storage.getItem(r),i=this.localCache[r];s!==i&&t(r,i,s)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}const s=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(s);if(t.newValue!==a)t.newValue!==null?this.storage.setItem(s,t.newValue):this.storage.removeItem(s);else if(this.localCache[s]===t.newValue&&!r)return}const i=()=>{const a=this.storage.getItem(s);!r&&this.localCache[s]===a||this.notifyListeners(s,a)},o=this.storage.getItem(s);xR()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,gC):i()}notifyListeners(t,r){this.localCache[t]=r;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:s}),!0)})},mC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}Hv.type="LOCAL";const _C=Hv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends jv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}qv.type="SESSION";const Wv=qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(i=>i.isListeningto(t));if(r)return r;const s=new pl(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:s,eventType:i,data:o}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const c=Array.from(a).map(async u=>u(r.origin,o)),l=await yC(c);r.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(n="",t=10){let r="";for(let s=0;s<t;s++)r+=Math.floor(Math.random()*10);return n+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((c,l)=>{const u=jf("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);a={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(d.data.response);break;default:clearTimeout(h),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function EC(n){bn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function wC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function bC(){return Kv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="firebaseLocalStorageDb",IC=1,Pc="firebaseLocalStorage",Gv="fbase_key";class ta{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function ml(n,t){return n.transaction([Pc],t?"readwrite":"readonly").objectStore(Pc)}function AC(){const n=indexedDB.deleteDatabase(zv);return new ta(n).toPromise()}function vh(){const n=indexedDB.open(zv,IC);return new Promise((t,r)=>{n.addEventListener("error",()=>{r(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Pc,{keyPath:Gv})}catch(i){r(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Pc)?t(s):(s.close(),await AC(),t(await vh()))})})}async function ym(n,t,r){const s=ml(n,!0).put({[Gv]:t,value:r});return new ta(s).toPromise()}async function SC(n,t){const r=ml(n,!1).get(t),s=await new ta(r).toPromise();return s===void 0?null:s.value}function vm(n,t){const r=ml(n,!0).delete(t);return new ta(r).toPromise()}const RC=800,CC=3;class Qv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vh(),this.db)}async _withRetries(t){let r=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(r++>CC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pl._getInstance(bC()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await wC(),!this.activeServiceWorker)return;this.sender=new vC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((r=s[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||TC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await vh();return await ym(t,Cc,"1"),await vm(t,Cc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(s=>ym(s,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(s=>SC(s,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>vm(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const o=ml(i,!1).getAll();return new ta(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:o}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(t,r){this.localCache[t]=r;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qv.type="LOCAL";const PC=Qv;new Xo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n,t){return t?Un(t):(ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf extends Bf{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Hs(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Hs(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Hs(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function OC(n){return Bv(n.auth,new Hf(n),n.bypassAuthState)}function xC(n){const{auth:t,user:r}=n;return ae(r,t,"internal-error"),oC(r,new Hf(n),n.bypassAuthState)}async function DC(n){const{auth:t,user:r}=n;return ae(r,t,"internal-error"),iC(r,new Hf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(t,r,s,i,o=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:s,postBody:i,tenantId:o,error:a,type:c}=t;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:s,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return OC;case"linkViaPopup":case"linkViaRedirect":return DC;case"reauthViaPopup":case"reauthViaRedirect":return xC;default:an(this.auth,"internal-error")}}resolve(t){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Xo(2e3,1e4);class Os extends Jv{constructor(t,r,s,i,o){super(t,r,i,o),this.provider=s,this.authWindow=null,this.pollId=null,Os.currentPopupAction&&Os.currentPopupAction.cancel(),Os.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ae(t,this.auth,"internal-error"),t}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const t=jf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Os.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,s;if(!((s=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,NC.get())};t()}}Os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="pendingRedirect",Xa=new Map;class LC extends Jv{constructor(t,r,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,s),this.eventId=null}async execute(){let t=Xa.get(this.auth._key());if(!t){try{const s=await MC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(r){t=()=>Promise.reject(r)}Xa.set(this.auth._key(),t)}return this.bypassAuthState||Xa.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MC(n,t){const r=BC(t),s=UC(n);if(!await s._isAvailable())return!1;const i=await s._get(r)==="true";return await s._remove(r),i}function FC(n,t){Xa.set(n._key(),t)}function UC(n){return Un(n._redirectPersistence)}function BC(n){return Ya(VC,n.config.apiKey,n.name)}async function $C(n,t,r=!1){if(yn(n.app))return Promise.reject(qn(n));const s=vs(n),i=kC(s,t),a=await new LC(s,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=10*60*1e3;class HC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(r=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!qC(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var s;if(t.error&&!Yv(t)){const i=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";r.onError(Tn(this.auth,i))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const s=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=jC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Em(t))}saveEventToCache(t){this.cachedEventUids.add(Em(t)),this.lastProcessedEventTime=Date.now()}}function Em(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function Yv({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function qC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(n,t={}){return Lr(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zC=/^https?/;async function GC(n){if(n.config.emulator)return;const{authorizedDomains:t}=await WC(n);for(const r of t)try{if(QC(r))return}catch{}an(n,"unauthorized-domain")}function QC(n){const t=gh(),{protocol:r,hostname:s}=new URL(t);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&s===""?r==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===s}if(!zC.test(r))return!1;if(KC.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new Xo(3e4,6e4);function wm(){const n=bn().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let r=0;r<n.CP.length;r++)n.CP[r]=null}}function YC(n){return new Promise((t,r)=>{var s,i,o;function a(){wm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wm(),r(Tn(n,"network-request-failed"))},timeout:JC.get()})}if(!((i=(s=bn().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=bn().gapi)===null||o===void 0)&&o.load)a();else{const c=jR("iframefcb");return bn()[c]=()=>{gapi.load?a():r(Tn(n,"network-request-failed"))},Lv(`${$R()}?onload=${c}`).catch(l=>r(l))}}).catch(t=>{throw Za=null,t})}let Za=null;function XC(n){return Za=Za||YC(n),Za}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new Xo(5e3,15e3),eP="__/auth/iframe",tP="emulator/auth/iframe",nP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sP(n){const t=n.config;ae(t.authDomain,n,"auth-domain-config-required");const r=t.emulator?Mf(t,tP):`https://${n.config.authDomain}/${eP}`,s={apiKey:t.apiKey,appName:n.name,v:yi},i=rP.get(n.config.apiHost);i&&(s.eid=i);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${r}?${Yo(s).slice(1)}`}async function iP(n){const t=await XC(n),r=bn().gapi;return ae(r,n,"internal-error"),t.open({where:document.body,url:sP(n),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nP,dontclear:!0},s=>new Promise(async(i,o)=>{await s.restyle({setHideOnLeave:!1});const a=Tn(n,"network-request-failed"),c=bn().setTimeout(()=>{o(a)},ZC.get());function l(){bn().clearTimeout(c),i(s)}s.ping(l).then(l,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aP=500,cP=600,lP="_blank",uP="http://localhost";class Tm{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hP(n,t,r,s=aP,i=cP){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const l=Object.assign(Object.assign({},oP),{width:s.toString(),height:i.toString(),top:o,left:a}),u=rt().toLowerCase();r&&(c=Pv(u)?lP:r),Cv(u)&&(t=t||uP,l.scrollbars="yes");const h=Object.entries(l).reduce((d,[p,g])=>`${d}${p}=${g},`,"");if(OR(u)&&c!=="_self")return fP(t||"",c),new Tm(null);const f=window.open(t||"",c,h);ae(f,n,"popup-blocked");try{f.focus()}catch{}return new Tm(f)}function fP(n,t){const r=document.createElement("a");r.href=n,r.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="__/auth/handler",pP="emulator/auth/handler",mP=encodeURIComponent("fac");async function bm(n,t,r,s,i,o){ae(n.config.authDomain,n,"auth-domain-config-required"),ae(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:s,v:yi,eventId:i};if(t instanceof Fv){t.setDefaultLanguage(n.languageCode),a.providerId=t.providerId||"",eS(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,f]of Object.entries(o||{}))a[h]=f}if(t instanceof ea){const h=t.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const l=await n._getAppCheckToken(),u=l?`#${mP}=${encodeURIComponent(l)}`:"";return`${gP(n)}?${Yo(c).slice(1)}${u}`}function gP({config:n}){return n.emulator?Mf(n,pP):`https://${n.authDomain}/${dP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu="webStorageSupport";class _P{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wv,this._completeRedirectFn=$C,this._overrideRedirectResult=FC}async _openPopup(t,r,s,i){var o;Qn((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await bm(t,r,s,gh(),i);return hP(t,a,jf())}async _openRedirect(t,r,s,i){await this._originValidation(t);const o=await bm(t,r,s,gh(),i);return EC(o),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:i,promise:o}=this.eventManagers[r];return i?Promise.resolve(i):(Qn(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(t);return this.eventManagers[r]={promise:s},s.catch(()=>{delete this.eventManagers[r]}),s}async initAndGetManager(t){const r=await iP(t),s=new HC(t);return r.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=r,s}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(yu,{type:yu},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[yu];a!==void 0&&r(!!a),an(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=GC(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return Nv()||Uf()||fl()}}const yP=_P;var Im="@firebase/auth",Am="1.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wP(n){Xs(new as("auth",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=s.options;ae(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vv(n)},u=new FR(s,i,o,l);return zR(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,s)=>{t.getProvider("auth-internal").initialize()})),Xs(new as("auth-internal",t=>{const r=vs(t.getProvider("auth").getImmediate());return(s=>new vP(s))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(Im,Am,EP(n)),Ir(Im,Am,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=5*60,bP=hv("authIdTokenMaxAge")||TP;let Sm=null;const IP=n=>async t=>{const r=t&&await t.getIdTokenResult(),s=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(s&&s>bP)return;const i=r==null?void 0:r.token;Sm!==i&&(Sm=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gl(n=gv()){const t=Nf(n,"auth");if(t.isInitialized())return t.getImmediate();const r=KR(n,{popupRedirectResolver:yP,persistence:[PC,_C,Wv]}),s=hv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const a=IP(o.toString());hC(r,a,()=>a(r.currentUser)),uC(r,c=>a(c))}}const i=lv("auth");return i&&GR(r,`http://${i}`),r}function AP(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}UR({loadJS(n){return new Promise((t,r)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=t,s.onerror=i=>{const o=Tn("internal-error");o.customData=i,r(o)},s.type="text/javascript",s.charset="UTF-8",AP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wP("Browser");var SP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},X,qf=qf||{},ue=SP||self;function _l(n){var t=typeof n;return t=t!="object"?t:n?Array.isArray(n)?"array":t:"null",t=="array"||t=="object"&&typeof n.length=="number"}function na(n){var t=typeof n;return t=="object"&&n!=null||t=="function"}function RP(n){return Object.prototype.hasOwnProperty.call(n,vu)&&n[vu]||(n[vu]=++CP)}var vu="closure_uid_"+(1e9*Math.random()>>>0),CP=0;function PP(n,t,r){return n.call.apply(n.bind,arguments)}function kP(n,t,r){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function St(n,t,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?St=PP:St=kP,St.apply(null,arguments)}function La(n,t){var r=Array.prototype.slice.call(arguments,1);return function(){var s=r.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function ft(n,t){function r(){}r.prototype=t.prototype,n.$=t.prototype,n.prototype=new r,n.prototype.constructor=n,n.ac=function(s,i,o){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(s,a)}}function Mr(){this.s=this.s,this.o=this.o}var OP=0;Mr.prototype.s=!1;Mr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),OP!=0)&&RP(this)};Mr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Xv=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if(typeof n=="string")return typeof t!="string"||t.length!=1?-1:n.indexOf(t,0);for(let r=0;r<n.length;r++)if(r in n&&n[r]===t)return r;return-1};function Wf(n){const t=n.length;if(0<t){const r=Array(t);for(let s=0;s<t;s++)r[s]=n[s];return r}return[]}function Rm(n,t){for(let r=1;r<arguments.length;r++){const s=arguments[r];if(_l(s)){const i=n.length||0,o=s.length||0;n.length=i+o;for(let a=0;a<o;a++)n[i+a]=s[a]}else n.push(s)}}function Rt(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var xP=function(){if(!ue.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const r=()=>{};ue.addEventListener("test",r,t),ue.removeEventListener("test",r,t)}catch{}return n}();function bo(n){return/^[\s\xa0]*$/.test(n)}function yl(){var n=ue.navigator;return n&&(n=n.userAgent)?n:""}function _n(n){return yl().indexOf(n)!=-1}function Kf(n){return Kf[" "](n),n}Kf[" "]=function(){};function DP(n,t){var r=A1;return Object.prototype.hasOwnProperty.call(r,n)?r[n]:r[n]=t(n)}var NP=_n("Opera"),Zs=_n("Trident")||_n("MSIE"),Zv=_n("Edge"),Eh=Zv||Zs,eE=_n("Gecko")&&!(yl().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge"))&&!(_n("Trident")||_n("MSIE"))&&!_n("Edge"),VP=yl().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge");function tE(){var n=ue.document;return n?n.documentMode:void 0}var wh;e:{var Eu="",wu=function(){var n=yl();if(eE)return/rv:([^\);]+)(\)|;)/.exec(n);if(Zv)return/Edge\/([\d\.]+)/.exec(n);if(Zs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(VP)return/WebKit\/(\S+)/.exec(n);if(NP)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(wu&&(Eu=wu?wu[1]:""),Zs){var Tu=tE();if(Tu!=null&&Tu>parseFloat(Eu)){wh=String(Tu);break e}}wh=Eu}var Th;if(ue.document&&Zs){var Cm=tE();Th=Cm||parseInt(wh,10)||void 0}else Th=void 0;var LP=Th;function Io(n,t){if(Rt.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var r=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(eE){e:{try{Kf(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else r=="mouseover"?t=n.fromElement:r=="mouseout"&&(t=n.toElement);this.relatedTarget=t,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:MP[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Io.$.h.call(this)}}ft(Io,Rt);var MP={2:"touch",3:"pen",4:"mouse"};Io.prototype.h=function(){Io.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ra="closure_listenable_"+(1e6*Math.random()|0),FP=0;function UP(n,t,r,s,i){this.listener=n,this.proxy=null,this.src=t,this.type=r,this.capture=!!s,this.la=i,this.key=++FP,this.fa=this.ia=!1}function vl(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function zf(n,t,r){for(const s in n)t.call(r,n[s],s,n)}function BP(n,t){for(const r in n)t.call(void 0,n[r],r,n)}function nE(n){const t={};for(const r in n)t[r]=n[r];return t}const Pm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rE(n,t){let r,s;for(let i=1;i<arguments.length;i++){s=arguments[i];for(r in s)n[r]=s[r];for(let o=0;o<Pm.length;o++)r=Pm[o],Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])}}function El(n){this.src=n,this.g={},this.h=0}El.prototype.add=function(n,t,r,s,i){var o=n.toString();n=this.g[o],n||(n=this.g[o]=[],this.h++);var a=Ih(n,t,s,i);return-1<a?(t=n[a],r||(t.ia=!1)):(t=new UP(t,this.src,o,!!s,i),t.ia=r,n.push(t)),t};function bh(n,t){var r=t.type;if(r in n.g){var s=n.g[r],i=Xv(s,t),o;(o=0<=i)&&Array.prototype.splice.call(s,i,1),o&&(vl(t),n.g[r].length==0&&(delete n.g[r],n.h--))}}function Ih(n,t,r,s){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==t&&o.capture==!!r&&o.la==s)return i}return-1}var Gf="closure_lm_"+(1e6*Math.random()|0),bu={};function sE(n,t,r,s,i){if(s&&s.once)return oE(n,t,r,s,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)sE(n,t[o],r,s,i);return null}return r=Yf(r),n&&n[ra]?n.O(t,r,na(s)?!!s.capture:!!s,i):iE(n,t,r,!1,s,i)}function iE(n,t,r,s,i,o){if(!t)throw Error("Invalid event type");var a=na(i)?!!i.capture:!!i,c=Jf(n);if(c||(n[Gf]=c=new El(n)),r=c.add(t,r,s,a,o),r.proxy)return r;if(s=$P(),r.proxy=s,s.src=n,s.listener=r,n.addEventListener)xP||(i=a),i===void 0&&(i=!1),n.addEventListener(t.toString(),s,i);else if(n.attachEvent)n.attachEvent(cE(t.toString()),s);else if(n.addListener&&n.removeListener)n.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return r}function $P(){function n(r){return t.call(n.src,n.listener,r)}const t=jP;return n}function oE(n,t,r,s,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)oE(n,t[o],r,s,i);return null}return r=Yf(r),n&&n[ra]?n.P(t,r,na(s)?!!s.capture:!!s,i):iE(n,t,r,!0,s,i)}function aE(n,t,r,s,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)aE(n,t[o],r,s,i);else s=na(s)?!!s.capture:!!s,r=Yf(r),n&&n[ra]?(n=n.i,t=String(t).toString(),t in n.g&&(o=n.g[t],r=Ih(o,r,s,i),-1<r&&(vl(o[r]),Array.prototype.splice.call(o,r,1),o.length==0&&(delete n.g[t],n.h--)))):n&&(n=Jf(n))&&(t=n.g[t.toString()],n=-1,t&&(n=Ih(t,r,s,i)),(r=-1<n?t[n]:null)&&Qf(r))}function Qf(n){if(typeof n!="number"&&n&&!n.fa){var t=n.src;if(t&&t[ra])bh(t.i,n);else{var r=n.type,s=n.proxy;t.removeEventListener?t.removeEventListener(r,s,n.capture):t.detachEvent?t.detachEvent(cE(r),s):t.addListener&&t.removeListener&&t.removeListener(s),(r=Jf(t))?(bh(r,n),r.h==0&&(r.src=null,t[Gf]=null)):vl(n)}}}function cE(n){return n in bu?bu[n]:bu[n]="on"+n}function jP(n,t){if(n.fa)n=!0;else{t=new Io(t,this);var r=n.listener,s=n.la||n.src;n.ia&&Qf(n),n=r.call(s,t)}return n}function Jf(n){return n=n[Gf],n instanceof El?n:null}var Iu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yf(n){return typeof n=="function"?n:(n[Iu]||(n[Iu]=function(t){return n.handleEvent(t)}),n[Iu])}function ht(){Mr.call(this),this.i=new El(this),this.S=this,this.J=null}ft(ht,Mr);ht.prototype[ra]=!0;ht.prototype.removeEventListener=function(n,t,r,s){aE(this,n,t,r,s)};function vt(n,t){var r,s=n.J;if(s)for(r=[];s;s=s.J)r.push(s);if(n=n.S,s=t.type||t,typeof t=="string")t=new Rt(t,n);else if(t instanceof Rt)t.target=t.target||n;else{var i=t;t=new Rt(s,n),rE(t,i)}if(i=!0,r)for(var o=r.length-1;0<=o;o--){var a=t.g=r[o];i=Ma(a,s,!0,t)&&i}if(a=t.g=n,i=Ma(a,s,!0,t)&&i,i=Ma(a,s,!1,t)&&i,r)for(o=0;o<r.length;o++)a=t.g=r[o],i=Ma(a,s,!1,t)&&i}ht.prototype.N=function(){if(ht.$.N.call(this),this.i){var n=this.i,t;for(t in n.g){for(var r=n.g[t],s=0;s<r.length;s++)vl(r[s]);delete n.g[t],n.h--}}this.J=null};ht.prototype.O=function(n,t,r,s){return this.i.add(String(n),t,!1,r,s)};ht.prototype.P=function(n,t,r,s){return this.i.add(String(n),t,!0,r,s)};function Ma(n,t,r,s){if(t=n.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.fa&&a.capture==r){var c=a.listener,l=a.la||a.src;a.ia&&bh(n.i,a),i=c.call(l,s)!==!1&&i}}return i&&!s.defaultPrevented}var Xf=ue.JSON.stringify;class HP{constructor(t,r){this.i=t,this.j=r,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function qP(){var n=Zf;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}class WP{constructor(){this.h=this.g=null}add(t,r){const s=lE.get();s.set(t,r),this.h?this.h.next=s:this.g=s,this.h=s}}var lE=new HP(()=>new KP,n=>n.reset());class KP{constructor(){this.next=this.g=this.h=null}set(t,r){this.h=t,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function zP(n){var t=1;n=n.split(":");const r=[];for(;0<t&&n.length;)r.push(n.shift()),t--;return n.length&&r.push(n.join(":")),r}function GP(n){ue.setTimeout(()=>{throw n},0)}let Ao,So=!1,Zf=new WP,uE=()=>{const n=ue.Promise.resolve(void 0);Ao=()=>{n.then(QP)}};var QP=()=>{for(var n;n=qP();){try{n.h.call(n.g)}catch(r){GP(r)}var t=lE;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}So=!1};function wl(n,t){ht.call(this),this.h=n||1,this.g=t||ue,this.j=St(this.qb,this),this.l=Date.now()}ft(wl,ht);X=wl.prototype;X.ga=!1;X.T=null;X.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vt(this,"tick"),this.ga&&(ed(this),this.start()))}};X.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ed(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}X.N=function(){wl.$.N.call(this),ed(this),delete this.g};function td(n,t,r){if(typeof n=="function")r&&(n=St(n,r));else if(n&&typeof n.handleEvent=="function")n=St(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:ue.setTimeout(n,t||0)}function hE(n){n.g=td(()=>{n.g=null,n.i&&(n.i=!1,hE(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}class JP extends Mr{constructor(t,r){super(),this.m=t,this.j=r,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:hE(this)}N(){super.N(),this.g&&(ue.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ro(n){Mr.call(this),this.h=n,this.g={}}ft(Ro,Mr);var km=[];function fE(n,t,r,s){Array.isArray(r)||(r&&(km[0]=r.toString()),r=km);for(var i=0;i<r.length;i++){var o=sE(t,r[i],s||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function dE(n){zf(n.g,function(t,r){this.g.hasOwnProperty(r)&&Qf(t)},n),n.g={}}Ro.prototype.N=function(){Ro.$.N.call(this),dE(this)};Ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Tl(){this.g=!0}Tl.prototype.Ea=function(){this.g=!1};function YP(n,t,r,s,i,o){n.info(function(){if(n.g)if(o)for(var a="",c=o.split("&"),l=0;l<c.length;l++){var u=c[l].split("=");if(1<u.length){var h=u[0];u=u[1];var f=h.split("_");a=2<=f.length&&f[1]=="type"?a+(h+"="+u+"&"):a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+t+`
`+r+`
`+a})}function XP(n,t,r,s,i,o,a){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+t+`
`+r+`
`+o+" "+a})}function xs(n,t,r,s){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+e1(n,r)+(s?" "+s:"")})}function ZP(n,t){n.info(function(){return"TIMEOUT: "+t})}Tl.prototype.info=function(){};function e1(n,t){if(!n.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(n=0;n<r.length;n++)if(Array.isArray(r[n])){var s=r[n];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return Xf(r)}catch{return t}}var Es={},Om=null;function bl(){return Om=Om||new ht}Es.Ta="serverreachability";function pE(n){Rt.call(this,Es.Ta,n)}ft(pE,Rt);function Co(n){const t=bl();vt(t,new pE(t))}Es.STAT_EVENT="statevent";function mE(n,t){Rt.call(this,Es.STAT_EVENT,n),this.stat=t}ft(mE,Rt);function Ot(n){const t=bl();vt(t,new mE(t,n))}Es.Ua="timingevent";function gE(n,t){Rt.call(this,Es.Ua,n),this.size=t}ft(gE,Rt);function sa(n,t){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return ue.setTimeout(function(){n()},t)}var Il={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_E={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function nd(){}nd.prototype.h=null;function xm(n){return n.h||(n.h=n.i())}function yE(){}var ia={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rd(){Rt.call(this,"d")}ft(rd,Rt);function sd(){Rt.call(this,"c")}ft(sd,Rt);var Ah;function Al(){}ft(Al,nd);Al.prototype.g=function(){return new XMLHttpRequest};Al.prototype.i=function(){return{}};Ah=new Al;function oa(n,t,r,s){this.l=n,this.j=t,this.m=r,this.W=s||1,this.U=new Ro(this),this.P=t1,n=Eh?125:void 0,this.V=new wl(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vE}function vE(){this.i=null,this.g="",this.h=!1}var t1=45e3,EE={},Sh={};X=oa.prototype;X.setTimeout=function(n){this.P=n};function Rh(n,t,r){n.L=1,n.A=Rl(Jn(t)),n.u=r,n.S=!0,wE(n,null)}function wE(n,t){n.G=Date.now(),aa(n),n.B=Jn(n.A);var r=n.B,s=n.W;Array.isArray(s)||(s=[String(s)]),PE(r.i,"t",s),n.o=0,r=n.l.J,n.h=new vE,n.g=JE(n.l,r?t:null,!n.u),0<n.O&&(n.M=new JP(St(n.Pa,n,n.g),n.O)),fE(n.U,n.g,"readystatechange",n.nb),t=n.I?nE(n.I):{},n.u?(n.v||(n.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,t)):(n.v="GET",n.g.ha(n.B,n.v,null,t)),Co(),YP(n.j,n.v,n.B,n.m,n.W,n.u)}X.nb=function(n){n=n.target;const t=this.M;t&&vn(n)==3?t.l():this.Pa(n)};X.Pa=function(n){try{if(n==this.g)e:{const h=vn(this.g);var t=this.g.Ia();const f=this.g.da();if(!(3>h)&&(h!=3||Eh||this.g&&(this.h.h||this.g.ja()||Lm(this.g)))){this.J||h!=4||t==7||(t==8||0>=f?Co(3):Co(2)),Sl(this);var r=this.g.da();this.ca=r;t:if(TE(this)){var s=Lm(this.g);n="";var i=s.length,o=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Zi(this);var a="";break t}this.h.i=new ue.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(s[t],{stream:o&&t==i-1});s.length=0,this.h.g+=n,this.o=0,a=this.h.g}else a=this.g.ja();if(this.i=r==200,XP(this.j,this.v,this.B,this.m,this.W,h,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bo(c)){var u=c;break t}}u=null}if(r=u)xs(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ch(this,r);else{this.i=!1,this.s=3,Ot(12),Gr(this),Zi(this);break e}}this.S?(bE(this,h,a),Eh&&this.i&&h==3&&(fE(this.U,this.V,"tick",this.mb),this.V.start())):(xs(this.j,this.m,a,null),Ch(this,a)),h==4&&Gr(this),this.i&&!this.J&&(h==4?KE(this.l,this):(this.i=!1,aa(this)))}else T1(this.g),r==400&&0<a.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),Gr(this),Zi(this)}}}catch{}finally{}};function TE(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function bE(n,t,r){let s=!0,i;for(;!n.J&&n.o<r.length;)if(i=n1(n,r),i==Sh){t==4&&(n.s=4,Ot(14),s=!1),xs(n.j,n.m,null,"[Incomplete Response]");break}else if(i==EE){n.s=4,Ot(15),xs(n.j,n.m,r,"[Invalid Chunk]"),s=!1;break}else xs(n.j,n.m,i,null),Ch(n,i);TE(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),t!=4||r.length!=0||n.h.h||(n.s=1,Ot(16),s=!1),n.i=n.i&&s,s?0<r.length&&!n.ba&&(n.ba=!0,t=n.l,t.g==n&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+r.length),ud(t),t.M=!0,Ot(11))):(xs(n.j,n.m,r,"[Invalid Chunked Response]"),Gr(n),Zi(n))}X.mb=function(){if(this.g){var n=vn(this.g),t=this.g.ja();this.o<t.length&&(Sl(this),bE(this,n,t),this.i&&n!=4&&aa(this))}};function n1(n,t){var r=n.o,s=t.indexOf(`
`,r);return s==-1?Sh:(r=Number(t.substring(r,s)),isNaN(r)?EE:(s+=1,s+r>t.length?Sh:(t=t.slice(s,s+r),n.o=s+r,t)))}X.cancel=function(){this.J=!0,Gr(this)};function aa(n){n.Y=Date.now()+n.P,IE(n,n.P)}function IE(n,t){if(n.C!=null)throw Error("WatchDog timer not null");n.C=sa(St(n.lb,n),t)}function Sl(n){n.C&&(ue.clearTimeout(n.C),n.C=null)}X.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(ZP(this.j,this.B),this.L!=2&&(Co(),Ot(17)),Gr(this),this.s=2,Zi(this)):IE(this,this.Y-n)};function Zi(n){n.l.H==0||n.J||KE(n.l,n)}function Gr(n){Sl(n);var t=n.M;t&&typeof t.sa=="function"&&t.sa(),n.M=null,ed(n.V),dE(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.sa())}function Ch(n,t){try{var r=n.l;if(r.H!=0&&(r.g==n||Ph(r.i,n))){if(!n.K&&Ph(r.i,n)&&r.H==3){try{var s=r.Ja.g.parse(t)}catch{s=null}if(Array.isArray(s)&&s.length==3){var i=s;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.G+3e3<n.G)xc(r),Ol(r);else break e;ld(r),Ot(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.G&&r.A==0&&!r.v&&(r.v=sa(St(r.ib,r),6e3));if(1>=xE(r.i)&&r.oa){try{r.oa()}catch{}r.oa=void 0}}else Qr(r,11)}else if((n.K||r.g==n)&&xc(r),!bo(t))for(i=r.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(r.V=u[0],u=u[1],r.H==2)if(u[0]=="c"){r.K=u[1],r.pa=u[2];const h=u[3];h!=null&&(r.ra=h,r.l.info("VER="+r.ra));const f=u[4];f!=null&&(r.Ga=f,r.l.info("SVER="+r.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(s=1.5*d,r.L=s,r.l.info("backChannelRequestTimeoutMs_="+s)),s=r;const p=n.g;if(p){const g=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var o=s.i;o.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(id(o,o.h),o.h=null))}if(s.F){const v=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(s.Da=v,Fe(s.I,s.F,v))}}r.H=3,r.h&&r.h.Ba(),r.ca&&(r.S=Date.now()-n.G,r.l.info("Handshake RTT: "+r.S+"ms")),s=r;var a=n;if(s.wa=QE(s,s.J?s.pa:null,s.Y),a.K){DE(s.i,a);var c=a,l=s.L;l&&c.setTimeout(l),c.C&&(Sl(c),aa(c)),s.g=a}else qE(s);0<r.j.length&&xl(r)}else u[0]!="stop"&&u[0]!="close"||Qr(r,7);else r.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Qr(r,7):cd(r):u[0]!="noop"&&r.h&&r.h.Aa(u),r.A=0)}}Co(4)}catch{}}function r1(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(_l(n)){for(var t=[],r=n.length,s=0;s<r;s++)t.push(n[s]);return t}t=[],r=0;for(s in n)t[r++]=n[s];return t}function s1(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(_l(n)||typeof n=="string"){var t=[];n=n.length;for(var r=0;r<n;r++)t.push(r);return t}t=[],r=0;for(const s in n)t[r++]=s;return t}}}function AE(n,t){if(n.forEach&&typeof n.forEach=="function")n.forEach(t,void 0);else if(_l(n)||typeof n=="string")Array.prototype.forEach.call(n,t,void 0);else for(var r=s1(n),s=r1(n),i=s.length,o=0;o<i;o++)t.call(void 0,s[o],r&&r[o],n)}var SE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function i1(n,t){if(n){n=n.split("&");for(var r=0;r<n.length;r++){var s=n[r].indexOf("="),i=null;if(0<=s){var o=n[r].substring(0,s);i=n[r].substring(s+1)}else o=n[r];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ns(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ns){this.h=n.h,kc(this,n.j),this.s=n.s,this.g=n.g,Oc(this,n.m),this.l=n.l;var t=n.i,r=new Po;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),Dm(this,r),this.o=n.o}else n&&(t=String(n).match(SE))?(this.h=!1,kc(this,t[1]||"",!0),this.s=$i(t[2]||""),this.g=$i(t[3]||"",!0),Oc(this,t[4]),this.l=$i(t[5]||"",!0),Dm(this,t[6]||"",!0),this.o=$i(t[7]||"")):(this.h=!1,this.i=new Po(null,this.h))}ns.prototype.toString=function(){var n=[],t=this.j;t&&n.push(ji(t,Nm,!0),":");var r=this.g;return(r||t=="file")&&(n.push("//"),(t=this.s)&&n.push(ji(t,Nm,!0),"@"),n.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&n.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&n.push("/"),n.push(ji(r,r.charAt(0)=="/"?c1:a1,!0))),(r=this.i.toString())&&n.push("?",r),(r=this.o)&&n.push("#",ji(r,u1)),n.join("")};function Jn(n){return new ns(n)}function kc(n,t,r){n.j=r?$i(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Oc(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function Dm(n,t,r){t instanceof Po?(n.i=t,h1(n.i,n.h)):(r||(t=ji(t,l1)),n.i=new Po(t,n.h))}function Fe(n,t,r){n.i.set(t,r)}function Rl(n){return Fe(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function $i(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ji(n,t,r){return typeof n=="string"?(n=encodeURI(n).replace(t,o1),r&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function o1(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var Nm=/[#\/\?@]/g,a1=/[#\?:]/g,c1=/[#\?]/g,l1=/[#\?@]/g,u1=/#/g;function Po(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Fr(n){n.g||(n.g=new Map,n.h=0,n.i&&i1(n.i,function(t,r){n.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}X=Po.prototype;X.add=function(n,t){Fr(this),this.i=null,n=Ei(this,n);var r=this.g.get(n);return r||this.g.set(n,r=[]),r.push(t),this.h+=1,this};function RE(n,t){Fr(n),t=Ei(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function CE(n,t){return Fr(n),t=Ei(n,t),n.g.has(t)}X.forEach=function(n,t){Fr(this),this.g.forEach(function(r,s){r.forEach(function(i){n.call(t,i,s,this)},this)},this)};X.ta=function(){Fr(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let s=0;s<t.length;s++){const i=n[s];for(let o=0;o<i.length;o++)r.push(t[s])}return r};X.Z=function(n){Fr(this);let t=[];if(typeof n=="string")CE(this,n)&&(t=t.concat(this.g.get(Ei(this,n))));else{n=Array.from(this.g.values());for(let r=0;r<n.length;r++)t=t.concat(n[r])}return t};X.set=function(n,t){return Fr(this),this.i=null,n=Ei(this,n),CE(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this};X.get=function(n,t){return n?(n=this.Z(n),0<n.length?String(n[0]):t):t};function PE(n,t,r){RE(n,t),0<r.length&&(n.i=null,n.g.set(Ei(n,t),Wf(r)),n.h+=r.length)}X.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var s=t[r];const o=encodeURIComponent(String(s)),a=this.Z(s);for(s=0;s<a.length;s++){var i=o;a[s]!==""&&(i+="="+encodeURIComponent(String(a[s]))),n.push(i)}}return this.i=n.join("&")};function Ei(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function h1(n,t){t&&!n.j&&(Fr(n),n.i=null,n.g.forEach(function(r,s){var i=s.toLowerCase();s!=i&&(RE(this,s),PE(this,i,r))},n)),n.j=t}var f1=class{constructor(n,t){this.g=n,this.map=t}};function kE(n){this.l=n||d1,ue.PerformanceNavigationTiming?(n=ue.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(ue.g&&ue.g.Ka&&ue.g.Ka()&&ue.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var d1=10;function OE(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function xE(n){return n.h?1:n.g?n.g.size:0}function Ph(n,t){return n.h?n.h==t:n.g?n.g.has(t):!1}function id(n,t){n.g?n.g.add(t):n.h=t}function DE(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}kE.prototype.cancel=function(){if(this.i=NE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function NE(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let t=n.i;for(const r of n.g.values())t=t.concat(r.F);return t}return Wf(n.i)}var p1=class{stringify(n){return ue.JSON.stringify(n,void 0)}parse(n){return ue.JSON.parse(n,void 0)}};function m1(){this.g=new p1}function g1(n,t,r){const s=r||"";try{AE(n,function(i,o){let a=i;na(i)&&(a=Xf(i)),t.push(s+o+"="+encodeURIComponent(a))})}catch(i){throw t.push(s+"type="+encodeURIComponent("_badmap")),i}}function _1(n,t){const r=new Tl;if(ue.Image){const s=new Image;s.onload=La(Fa,r,s,"TestLoadImage: loaded",!0,t),s.onerror=La(Fa,r,s,"TestLoadImage: error",!1,t),s.onabort=La(Fa,r,s,"TestLoadImage: abort",!1,t),s.ontimeout=La(Fa,r,s,"TestLoadImage: timeout",!1,t),ue.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else t(!1)}function Fa(n,t,r,s,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(s)}catch{}}function Cl(n){this.l=n.ec||null,this.j=n.ob||!1}ft(Cl,nd);Cl.prototype.g=function(){return new Pl(this.l,this.j)};Cl.prototype.i=function(n){return function(){return n}}({});function Pl(n,t){ht.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=od,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ft(Pl,ht);var od=0;X=Pl.prototype;X.open=function(n,t){if(this.readyState!=od)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,ko(this)};X.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||ue).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};X.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ca(this)),this.readyState=od};X.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ue.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VE(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function VE(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}X.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?ca(this):ko(this),this.readyState==3&&VE(this)}};X.Za=function(n){this.g&&(this.response=this.responseText=n,ca(this))};X.Ya=function(n){this.g&&(this.response=n,ca(this))};X.ka=function(){this.g&&ca(this)};function ca(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ko(n)}X.setRequestHeader=function(n,t){this.v.append(n,t)};X.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};X.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var r=t.next();!r.done;)r=r.value,n.push(r[0]+": "+r[1]),r=t.next();return n.join(`\r
`)};function ko(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(Pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var y1=ue.JSON.parse;function Qe(n){ht.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=LE,this.L=this.M=!1}ft(Qe,ht);var LE="",v1=/^https?$/i,E1=["POST","PUT"];X=Qe.prototype;X.Oa=function(n){this.M=n};X.ha=function(n,t,r,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ah.g(),this.C=this.u?xm(this.u):xm(Ah),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(o){Vm(this,o);return}if(n=r||"",r=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)r.set(i,s[i]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const o of s.keys())r.set(o,s.get(o));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(r.keys()).find(o=>o.toLowerCase()=="content-type"),i=ue.FormData&&n instanceof ue.FormData,!(0<=Xv(E1,t))||s||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of r)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{UE(this),0<this.B&&((this.L=w1(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=td(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){Vm(this,o)}};function w1(n){return Zs&&typeof n.timeout=="number"&&n.ontimeout!==void 0}X.ua=function(){typeof qf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vt(this,"timeout"),this.abort(8))};function Vm(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,ME(n),kl(n)}function ME(n){n.F||(n.F=!0,vt(n,"complete"),vt(n,"error"))}X.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vt(this,"complete"),vt(this,"abort"),kl(this))};X.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kl(this,!0)),Qe.$.N.call(this)};X.La=function(){this.s||(this.G||this.v||this.l?FE(this):this.kb())};X.kb=function(){FE(this)};function FE(n){if(n.h&&typeof qf<"u"&&(!n.C[1]||vn(n)!=4||n.da()!=2)){if(n.v&&vn(n)==4)td(n.La,0,n);else if(vt(n,"readystatechange"),vn(n)==4){n.h=!1;try{const a=n.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var r;if(!(r=t)){var s;if(s=a===0){var i=String(n.I).match(SE)[1]||null;!i&&ue.self&&ue.self.location&&(i=ue.self.location.protocol.slice(0,-1)),s=!v1.test(i?i.toLowerCase():"")}r=s}if(r)vt(n,"complete"),vt(n,"success");else{n.m=6;try{var o=2<vn(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",ME(n)}}finally{kl(n)}}}}function kl(n,t){if(n.g){UE(n);const r=n.g,s=n.C[0]?()=>{}:null;n.g=null,n.C=null,t||vt(n,"ready");try{r.onreadystatechange=s}catch{}}}function UE(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(ue.clearTimeout(n.A),n.A=null)}X.isActive=function(){return!!this.g};function vn(n){return n.g?n.g.readyState:0}X.da=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}};X.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};X.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&t.indexOf(n)==0&&(t=t.substring(n.length)),y1(t)}};function Lm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case LE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function T1(n){const t={};n=(n.g&&2<=vn(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<n.length;s++){if(bo(n[s]))continue;var r=zP(n[s]);const i=r[0];if(r=r[1],typeof r!="string")continue;r=r.trim();const o=t[i]||[];t[i]=o,o.push(r)}BP(t,function(s){return s.join(", ")})}X.Ia=function(){return this.m};X.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function BE(n){let t="";return zf(n,function(r,s){t+=s,t+=":",t+=r,t+=`\r
`}),t}function ad(n,t,r){e:{for(s in r){var s=!1;break e}s=!0}s||(r=BE(r),typeof n=="string"?r!=null&&encodeURIComponent(String(r)):Fe(n,t,r))}function Oi(n,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[n]||t}function $E(n){this.Ga=0,this.j=[],this.l=new Tl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Oi("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Oi("baseRetryDelayMs",5e3,n),this.hb=Oi("retryDelaySeedMs",1e4,n),this.eb=Oi("forwardChannelMaxRetries",2,n),this.xa=Oi("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new kE(n&&n.concurrentRequestLimit),this.Ja=new m1,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}X=$E.prototype;X.ra=8;X.H=1;function cd(n){if(jE(n),n.H==3){var t=n.W++,r=Jn(n.I);if(Fe(r,"SID",n.K),Fe(r,"RID",t),Fe(r,"TYPE","terminate"),la(n,r),t=new oa(n,n.l,t),t.L=2,t.A=Rl(Jn(r)),r=!1,ue.navigator&&ue.navigator.sendBeacon)try{r=ue.navigator.sendBeacon(t.A.toString(),"")}catch{}!r&&ue.Image&&(new Image().src=t.A,r=!0),r||(t.g=JE(t.l,null),t.g.ha(t.A)),t.G=Date.now(),aa(t)}GE(n)}function Ol(n){n.g&&(ud(n),n.g.cancel(),n.g=null)}function jE(n){Ol(n),n.u&&(ue.clearTimeout(n.u),n.u=null),xc(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&ue.clearTimeout(n.m),n.m=null)}function xl(n){if(!OE(n.i)&&!n.m){n.m=!0;var t=n.Na;Ao||uE(),So||(Ao(),So=!0),Zf.add(t,n),n.C=0}}function b1(n,t){return xE(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=t.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=sa(St(n.Na,n,t),zE(n,n.C)),n.C++,!0)}X.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new oa(this,this.l,n);let o=this.s;if(this.U&&(o?(o=nE(o),rE(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,r=0;r<this.j.length;r++){t:{var s=this.j[r];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(t+=s,4096<t){t=r;break e}if(t===4096||r===this.j.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=HE(this,i,t),r=Jn(this.I),Fe(r,"RID",n),Fe(r,"CVER",22),this.F&&Fe(r,"X-HTTP-Session-Id",this.F),la(this,r),o&&(this.O?t="headers="+encodeURIComponent(String(BE(o)))+"&"+t:this.o&&ad(r,this.o,o)),id(this.i,i),this.bb&&Fe(r,"TYPE","init"),this.P?(Fe(r,"$req",t),Fe(r,"SID","null"),i.aa=!0,Rh(i,r,null)):Rh(i,r,t),this.H=2}}else this.H==3&&(n?Mm(this,n):this.j.length==0||OE(this.i)||Mm(this))};function Mm(n,t){var r;t?r=t.m:r=n.W++;const s=Jn(n.I);Fe(s,"SID",n.K),Fe(s,"RID",r),Fe(s,"AID",n.V),la(n,s),n.o&&n.s&&ad(s,n.o,n.s),r=new oa(n,n.l,r,n.C+1),n.o===null&&(r.I=n.s),t&&(n.j=t.F.concat(n.j)),t=HE(n,r,1e3),r.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),id(n.i,r),Rh(r,s,t)}function la(n,t){n.na&&zf(n.na,function(r,s){Fe(t,s,r)}),n.h&&AE({},function(r,s){Fe(t,s,r)})}function HE(n,t,r){r=Math.min(n.j.length,r);var s=n.h?St(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const a=["count="+r];o==-1?0<r?(o=i[0].g,a.push("ofs="+o)):o=0:a.push("ofs="+o);let c=!0;for(let l=0;l<r;l++){let u=i[l].g;const h=i[l].map;if(u-=o,0>u)o=Math.max(0,i[l].g-100),c=!1;else try{g1(h,a,"req"+u+"_")}catch{s&&s(h)}}if(c){s=a.join("&");break e}}}return n=n.j.splice(0,r),t.F=n,s}function qE(n){if(!n.g&&!n.u){n.ba=1;var t=n.Ma;Ao||uE(),So||(Ao(),So=!0),Zf.add(t,n),n.A=0}}function ld(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=sa(St(n.Ma,n),zE(n,n.A)),n.A++,!0)}X.Ma=function(){if(this.u=null,WE(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=sa(St(this.jb,this),n)}};X.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ot(10),Ol(this),WE(this))};function ud(n){n.B!=null&&(ue.clearTimeout(n.B),n.B=null)}function WE(n){n.g=new oa(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var t=Jn(n.wa);Fe(t,"RID","rpc"),Fe(t,"SID",n.K),Fe(t,"AID",n.V),Fe(t,"CI",n.G?"0":"1"),!n.G&&n.qa&&Fe(t,"TO",n.qa),Fe(t,"TYPE","xmlhttp"),la(n,t),n.o&&n.s&&ad(t,n.o,n.s),n.L&&n.g.setTimeout(n.L);var r=n.g;n=n.pa,r.L=1,r.A=Rl(Jn(t)),r.u=null,r.S=!0,wE(r,n)}X.ib=function(){this.v!=null&&(this.v=null,Ol(this),ld(this),Ot(19))};function xc(n){n.v!=null&&(ue.clearTimeout(n.v),n.v=null)}function KE(n,t){var r=null;if(n.g==t){xc(n),ud(n),n.g=null;var s=2}else if(Ph(n.i,t))r=t.F,DE(n.i,t),s=1;else return;if(n.H!=0){if(t.i)if(s==1){r=t.u?t.u.length:0,t=Date.now()-t.G;var i=n.C;s=bl(),vt(s,new gE(s,r)),xl(n)}else qE(n);else if(i=t.s,i==3||i==0&&0<t.ca||!(s==1&&b1(n,t)||s==2&&ld(n)))switch(r&&0<r.length&&(t=n.i,t.i=t.i.concat(r)),i){case 1:Qr(n,5);break;case 4:Qr(n,10);break;case 3:Qr(n,6);break;default:Qr(n,2)}}}function zE(n,t){let r=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(r*=2),r*t}function Qr(n,t){if(n.l.info("Error code "+t),t==2){var r=null;n.h&&(r=null);var s=St(n.pb,n);r||(r=new ns("//www.google.com/images/cleardot.gif"),ue.location&&ue.location.protocol=="http"||kc(r,"https"),Rl(r)),_1(r.toString(),s)}else Ot(2);n.H=0,n.h&&n.h.za(t),GE(n),jE(n)}X.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ot(2)):(this.l.info("Failed to ping google.com"),Ot(1))};function GE(n){if(n.H=0,n.ma=[],n.h){const t=NE(n.i);(t.length!=0||n.j.length!=0)&&(Rm(n.ma,t),Rm(n.ma,n.j),n.i.i.length=0,Wf(n.j),n.j.length=0),n.h.ya()}}function QE(n,t,r){var s=r instanceof ns?Jn(r):new ns(r);if(s.g!="")t&&(s.g=t+"."+s.g),Oc(s,s.m);else{var i=ue.location;s=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new ns(null);s&&kc(o,s),t&&(o.g=t),i&&Oc(o,i),r&&(o.l=r),s=o}return r=n.F,t=n.Da,r&&t&&Fe(s,r,t),Fe(s,"VER",n.ra),la(n,s),s}function JE(n,t,r){if(t&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n.Ha&&!n.va?new Qe(new Cl({ob:r})):new Qe(n.va),t.Oa(n.J),t}X.isActive=function(){return!!this.h&&this.h.isActive(this)};function YE(){}X=YE.prototype;X.Ba=function(){};X.Aa=function(){};X.za=function(){};X.ya=function(){};X.isActive=function(){return!0};X.Va=function(){};function Dc(){if(Zs&&!(10<=Number(LP)))throw Error("Environmental error: no available transport.")}Dc.prototype.g=function(n,t){return new Gt(n,t)};function Gt(n,t){ht.call(this),this.g=new $E(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!bo(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bo(t)&&(this.g.F=t,n=this.h,n!==null&&t in n&&(n=this.h,t in n&&delete n[t])),this.j=new wi(this)}ft(Gt,ht);Gt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,t=this.l,r=this.h||void 0;Ot(0),n.Y=t,n.na=r||{},n.G=n.aa,n.I=QE(n,null,n.Y),xl(n)};Gt.prototype.close=function(){cd(this.g)};Gt.prototype.u=function(n){var t=this.g;if(typeof n=="string"){var r={};r.__data__=n,n=r}else this.v&&(r={},r.__data__=Xf(n),n=r);t.j.push(new f1(t.fb++,n)),t.H==3&&xl(t)};Gt.prototype.N=function(){this.g.h=null,delete this.j,cd(this.g),delete this.g,Gt.$.N.call(this)};function XE(n){rd.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var t=n.__sm__;if(t){e:{for(const r in t){n=r;break e}n=void 0}(this.i=n)&&(n=this.i,t=t!==null&&n in t?t[n]:void 0),this.data=t}else this.data=n}ft(XE,rd);function ZE(){sd.call(this),this.status=1}ft(ZE,sd);function wi(n){this.g=n}ft(wi,YE);wi.prototype.Ba=function(){vt(this.g,"a")};wi.prototype.Aa=function(n){vt(this.g,new XE(n))};wi.prototype.za=function(n){vt(this.g,new ZE)};wi.prototype.ya=function(){vt(this.g,"b")};function I1(){this.blockSize=-1}function cn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ft(cn,I1);cn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Au(n,t,r){r||(r=0);var s=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)s[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)s[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=n.g[0],r=n.g[1],i=n.g[2];var o=n.g[3],a=t+(o^r&(i^o))+s[0]+3614090360&4294967295;t=r+(a<<7&4294967295|a>>>25),a=o+(i^t&(r^i))+s[1]+3905402710&4294967295,o=t+(a<<12&4294967295|a>>>20),a=i+(r^o&(t^r))+s[2]+606105819&4294967295,i=o+(a<<17&4294967295|a>>>15),a=r+(t^i&(o^t))+s[3]+3250441966&4294967295,r=i+(a<<22&4294967295|a>>>10),a=t+(o^r&(i^o))+s[4]+4118548399&4294967295,t=r+(a<<7&4294967295|a>>>25),a=o+(i^t&(r^i))+s[5]+1200080426&4294967295,o=t+(a<<12&4294967295|a>>>20),a=i+(r^o&(t^r))+s[6]+2821735955&4294967295,i=o+(a<<17&4294967295|a>>>15),a=r+(t^i&(o^t))+s[7]+4249261313&4294967295,r=i+(a<<22&4294967295|a>>>10),a=t+(o^r&(i^o))+s[8]+1770035416&4294967295,t=r+(a<<7&4294967295|a>>>25),a=o+(i^t&(r^i))+s[9]+2336552879&4294967295,o=t+(a<<12&4294967295|a>>>20),a=i+(r^o&(t^r))+s[10]+4294925233&4294967295,i=o+(a<<17&4294967295|a>>>15),a=r+(t^i&(o^t))+s[11]+2304563134&4294967295,r=i+(a<<22&4294967295|a>>>10),a=t+(o^r&(i^o))+s[12]+1804603682&4294967295,t=r+(a<<7&4294967295|a>>>25),a=o+(i^t&(r^i))+s[13]+4254626195&4294967295,o=t+(a<<12&4294967295|a>>>20),a=i+(r^o&(t^r))+s[14]+2792965006&4294967295,i=o+(a<<17&4294967295|a>>>15),a=r+(t^i&(o^t))+s[15]+1236535329&4294967295,r=i+(a<<22&4294967295|a>>>10),a=t+(i^o&(r^i))+s[1]+4129170786&4294967295,t=r+(a<<5&4294967295|a>>>27),a=o+(r^i&(t^r))+s[6]+3225465664&4294967295,o=t+(a<<9&4294967295|a>>>23),a=i+(t^r&(o^t))+s[11]+643717713&4294967295,i=o+(a<<14&4294967295|a>>>18),a=r+(o^t&(i^o))+s[0]+3921069994&4294967295,r=i+(a<<20&4294967295|a>>>12),a=t+(i^o&(r^i))+s[5]+3593408605&4294967295,t=r+(a<<5&4294967295|a>>>27),a=o+(r^i&(t^r))+s[10]+38016083&4294967295,o=t+(a<<9&4294967295|a>>>23),a=i+(t^r&(o^t))+s[15]+3634488961&4294967295,i=o+(a<<14&4294967295|a>>>18),a=r+(o^t&(i^o))+s[4]+3889429448&4294967295,r=i+(a<<20&4294967295|a>>>12),a=t+(i^o&(r^i))+s[9]+568446438&4294967295,t=r+(a<<5&4294967295|a>>>27),a=o+(r^i&(t^r))+s[14]+3275163606&4294967295,o=t+(a<<9&4294967295|a>>>23),a=i+(t^r&(o^t))+s[3]+4107603335&4294967295,i=o+(a<<14&4294967295|a>>>18),a=r+(o^t&(i^o))+s[8]+1163531501&4294967295,r=i+(a<<20&4294967295|a>>>12),a=t+(i^o&(r^i))+s[13]+2850285829&4294967295,t=r+(a<<5&4294967295|a>>>27),a=o+(r^i&(t^r))+s[2]+4243563512&4294967295,o=t+(a<<9&4294967295|a>>>23),a=i+(t^r&(o^t))+s[7]+1735328473&4294967295,i=o+(a<<14&4294967295|a>>>18),a=r+(o^t&(i^o))+s[12]+2368359562&4294967295,r=i+(a<<20&4294967295|a>>>12),a=t+(r^i^o)+s[5]+4294588738&4294967295,t=r+(a<<4&4294967295|a>>>28),a=o+(t^r^i)+s[8]+2272392833&4294967295,o=t+(a<<11&4294967295|a>>>21),a=i+(o^t^r)+s[11]+1839030562&4294967295,i=o+(a<<16&4294967295|a>>>16),a=r+(i^o^t)+s[14]+4259657740&4294967295,r=i+(a<<23&4294967295|a>>>9),a=t+(r^i^o)+s[1]+2763975236&4294967295,t=r+(a<<4&4294967295|a>>>28),a=o+(t^r^i)+s[4]+1272893353&4294967295,o=t+(a<<11&4294967295|a>>>21),a=i+(o^t^r)+s[7]+4139469664&4294967295,i=o+(a<<16&4294967295|a>>>16),a=r+(i^o^t)+s[10]+3200236656&4294967295,r=i+(a<<23&4294967295|a>>>9),a=t+(r^i^o)+s[13]+681279174&4294967295,t=r+(a<<4&4294967295|a>>>28),a=o+(t^r^i)+s[0]+3936430074&4294967295,o=t+(a<<11&4294967295|a>>>21),a=i+(o^t^r)+s[3]+3572445317&4294967295,i=o+(a<<16&4294967295|a>>>16),a=r+(i^o^t)+s[6]+76029189&4294967295,r=i+(a<<23&4294967295|a>>>9),a=t+(r^i^o)+s[9]+3654602809&4294967295,t=r+(a<<4&4294967295|a>>>28),a=o+(t^r^i)+s[12]+3873151461&4294967295,o=t+(a<<11&4294967295|a>>>21),a=i+(o^t^r)+s[15]+530742520&4294967295,i=o+(a<<16&4294967295|a>>>16),a=r+(i^o^t)+s[2]+3299628645&4294967295,r=i+(a<<23&4294967295|a>>>9),a=t+(i^(r|~o))+s[0]+4096336452&4294967295,t=r+(a<<6&4294967295|a>>>26),a=o+(r^(t|~i))+s[7]+1126891415&4294967295,o=t+(a<<10&4294967295|a>>>22),a=i+(t^(o|~r))+s[14]+2878612391&4294967295,i=o+(a<<15&4294967295|a>>>17),a=r+(o^(i|~t))+s[5]+4237533241&4294967295,r=i+(a<<21&4294967295|a>>>11),a=t+(i^(r|~o))+s[12]+1700485571&4294967295,t=r+(a<<6&4294967295|a>>>26),a=o+(r^(t|~i))+s[3]+2399980690&4294967295,o=t+(a<<10&4294967295|a>>>22),a=i+(t^(o|~r))+s[10]+4293915773&4294967295,i=o+(a<<15&4294967295|a>>>17),a=r+(o^(i|~t))+s[1]+2240044497&4294967295,r=i+(a<<21&4294967295|a>>>11),a=t+(i^(r|~o))+s[8]+1873313359&4294967295,t=r+(a<<6&4294967295|a>>>26),a=o+(r^(t|~i))+s[15]+4264355552&4294967295,o=t+(a<<10&4294967295|a>>>22),a=i+(t^(o|~r))+s[6]+2734768916&4294967295,i=o+(a<<15&4294967295|a>>>17),a=r+(o^(i|~t))+s[13]+1309151649&4294967295,r=i+(a<<21&4294967295|a>>>11),a=t+(i^(r|~o))+s[4]+4149444226&4294967295,t=r+(a<<6&4294967295|a>>>26),a=o+(r^(t|~i))+s[11]+3174756917&4294967295,o=t+(a<<10&4294967295|a>>>22),a=i+(t^(o|~r))+s[2]+718787259&4294967295,i=o+(a<<15&4294967295|a>>>17),a=r+(o^(i|~t))+s[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}cn.prototype.j=function(n,t){t===void 0&&(t=n.length);for(var r=t-this.blockSize,s=this.m,i=this.h,o=0;o<t;){if(i==0)for(;o<=r;)Au(this,n,o),o+=this.blockSize;if(typeof n=="string"){for(;o<t;)if(s[i++]=n.charCodeAt(o++),i==this.blockSize){Au(this,s),i=0;break}}else for(;o<t;)if(s[i++]=n[o++],i==this.blockSize){Au(this,s),i=0;break}}this.h=i,this.i+=t};cn.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var r=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=r&255,r/=256;for(this.j(n),n=Array(16),t=r=0;4>t;++t)for(var s=0;32>s;s+=8)n[r++]=this.g[t]>>>s&255;return n};function xe(n,t){this.h=t;for(var r=[],s=!0,i=n.length-1;0<=i;i--){var o=n[i]|0;s&&o==t||(r[i]=o,s=!1)}this.g=r}var A1={};function hd(n){return-128<=n&&128>n?DP(n,function(t){return new xe([t|0],0>t?-1:0)}):new xe([n|0],0>n?-1:0)}function En(n){if(isNaN(n)||!isFinite(n))return qs;if(0>n)return _t(En(-n));for(var t=[],r=1,s=0;n>=r;s++)t[s]=n/r|0,r*=kh;return new xe(t,0)}function ew(n,t){if(n.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(n.charAt(0)=="-")return _t(ew(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=En(Math.pow(t,8)),s=qs,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),a=parseInt(n.substring(i,i+o),t);8>o?(o=En(Math.pow(t,o)),s=s.R(o).add(En(a))):(s=s.R(r),s=s.add(En(a)))}return s}var kh=4294967296,qs=hd(0),Oh=hd(1),Fm=hd(16777216);X=xe.prototype;X.ea=function(){if(Jt(this))return-_t(this).ea();for(var n=0,t=1,r=0;r<this.g.length;r++){var s=this.D(r);n+=(0<=s?s:kh+s)*t,t*=kh}return n};X.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(Bn(this))return"0";if(Jt(this))return"-"+_t(this).toString(n);for(var t=En(Math.pow(n,6)),r=this,s="";;){var i=Vc(r,t).g;r=Nc(r,i.R(t));var o=((0<r.g.length?r.g[0]:r.h)>>>0).toString(n);if(r=i,Bn(r))return o+s;for(;6>o.length;)o="0"+o;s=o+s}};X.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function Bn(n){if(n.h!=0)return!1;for(var t=0;t<n.g.length;t++)if(n.g[t]!=0)return!1;return!0}function Jt(n){return n.h==-1}X.X=function(n){return n=Nc(this,n),Jt(n)?-1:Bn(n)?0:1};function _t(n){for(var t=n.g.length,r=[],s=0;s<t;s++)r[s]=~n.g[s];return new xe(r,~n.h).add(Oh)}X.abs=function(){return Jt(this)?_t(this):this};X.add=function(n){for(var t=Math.max(this.g.length,n.g.length),r=[],s=0,i=0;i<=t;i++){var o=s+(this.D(i)&65535)+(n.D(i)&65535),a=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);s=a>>>16,o&=65535,a&=65535,r[i]=a<<16|o}return new xe(r,r[r.length-1]&-2147483648?-1:0)};function Nc(n,t){return n.add(_t(t))}X.R=function(n){if(Bn(this)||Bn(n))return qs;if(Jt(this))return Jt(n)?_t(this).R(_t(n)):_t(_t(this).R(n));if(Jt(n))return _t(this.R(_t(n)));if(0>this.X(Fm)&&0>n.X(Fm))return En(this.ea()*n.ea());for(var t=this.g.length+n.g.length,r=[],s=0;s<2*t;s++)r[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<n.g.length;i++){var o=this.D(s)>>>16,a=this.D(s)&65535,c=n.D(i)>>>16,l=n.D(i)&65535;r[2*s+2*i]+=a*l,Ua(r,2*s+2*i),r[2*s+2*i+1]+=o*l,Ua(r,2*s+2*i+1),r[2*s+2*i+1]+=a*c,Ua(r,2*s+2*i+1),r[2*s+2*i+2]+=o*c,Ua(r,2*s+2*i+2)}for(s=0;s<t;s++)r[s]=r[2*s+1]<<16|r[2*s];for(s=t;s<2*t;s++)r[s]=0;return new xe(r,0)};function Ua(n,t){for(;(n[t]&65535)!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function xi(n,t){this.g=n,this.h=t}function Vc(n,t){if(Bn(t))throw Error("division by zero");if(Bn(n))return new xi(qs,qs);if(Jt(n))return t=Vc(_t(n),t),new xi(_t(t.g),_t(t.h));if(Jt(t))return t=Vc(n,_t(t)),new xi(_t(t.g),t.h);if(30<n.g.length){if(Jt(n)||Jt(t))throw Error("slowDivide_ only works with positive integers.");for(var r=Oh,s=t;0>=s.X(n);)r=Um(r),s=Um(s);var i=As(r,1),o=As(s,1);for(s=As(s,2),r=As(r,2);!Bn(s);){var a=o.add(s);0>=a.X(n)&&(i=i.add(r),o=a),s=As(s,1),r=As(r,1)}return t=Nc(n,i.R(t)),new xi(i,t)}for(i=qs;0<=n.X(t);){for(r=Math.max(1,Math.floor(n.ea()/t.ea())),s=Math.ceil(Math.log(r)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),o=En(r),a=o.R(t);Jt(a)||0<a.X(n);)r-=s,o=En(r),a=o.R(t);Bn(o)&&(o=Oh),i=i.add(o),n=Nc(n,a)}return new xi(i,n)}X.gb=function(n){return Vc(this,n).h};X.and=function(n){for(var t=Math.max(this.g.length,n.g.length),r=[],s=0;s<t;s++)r[s]=this.D(s)&n.D(s);return new xe(r,this.h&n.h)};X.or=function(n){for(var t=Math.max(this.g.length,n.g.length),r=[],s=0;s<t;s++)r[s]=this.D(s)|n.D(s);return new xe(r,this.h|n.h)};X.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),r=[],s=0;s<t;s++)r[s]=this.D(s)^n.D(s);return new xe(r,this.h^n.h)};function Um(n){for(var t=n.g.length+1,r=[],s=0;s<t;s++)r[s]=n.D(s)<<1|n.D(s-1)>>>31;return new xe(r,n.h)}function As(n,t){var r=t>>5;t%=32;for(var s=n.g.length-r,i=[],o=0;o<s;o++)i[o]=0<t?n.D(o+r)>>>t|n.D(o+r+1)<<32-t:n.D(o+r);return new xe(i,n.h)}Dc.prototype.createWebChannel=Dc.prototype.g;Gt.prototype.send=Gt.prototype.u;Gt.prototype.open=Gt.prototype.m;Gt.prototype.close=Gt.prototype.close;Il.NO_ERROR=0;Il.TIMEOUT=8;Il.HTTP_ERROR=6;_E.COMPLETE="complete";yE.EventType=ia;ia.OPEN="a";ia.CLOSE="b";ia.ERROR="c";ia.MESSAGE="d";ht.prototype.listen=ht.prototype.O;Qe.prototype.listenOnce=Qe.prototype.P;Qe.prototype.getLastError=Qe.prototype.Sa;Qe.prototype.getLastErrorCode=Qe.prototype.Ia;Qe.prototype.getStatus=Qe.prototype.da;Qe.prototype.getResponseJson=Qe.prototype.Wa;Qe.prototype.getResponseText=Qe.prototype.ja;Qe.prototype.send=Qe.prototype.ha;Qe.prototype.setWithCredentials=Qe.prototype.Oa;cn.prototype.digest=cn.prototype.l;cn.prototype.reset=cn.prototype.reset;cn.prototype.update=cn.prototype.j;xe.prototype.add=xe.prototype.add;xe.prototype.multiply=xe.prototype.R;xe.prototype.modulo=xe.prototype.gb;xe.prototype.compare=xe.prototype.X;xe.prototype.toNumber=xe.prototype.ea;xe.prototype.toString=xe.prototype.toString;xe.prototype.getBits=xe.prototype.D;xe.fromNumber=En;xe.fromString=ew;var S1=function(){return new Dc},R1=function(){return bl()},Su=Il,C1=_E,P1=Es,Bm={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ba=yE,k1=Qe,O1=cn,Ws=xe;const $m="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new xf("@firebase/firestore");function Di(){return fs.logLevel}function Y(n,...t){if(fs.logLevel<=be.DEBUG){const r=t.map(fd);fs.debug(`Firestore (${Ti}): ${n}`,...r)}}function Pn(n,...t){if(fs.logLevel<=be.ERROR){const r=t.map(fd);fs.error(`Firestore (${Ti}): ${n}`,...r)}}function ei(n,...t){if(fs.logLevel<=be.WARN){const r=t.map(fd);fs.warn(`Firestore (${Ti}): ${n}`,...r)}}function fd(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(n="Unexpected state"){const t=`FIRESTORE (${Ti}) INTERNAL ASSERTION FAILED: `+n;throw Pn(t),new Error(t)}function Me(n,t){n||le()}function me(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends nr{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class x1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Tt.UNAUTHENTICATED))}shutdown(){}}class D1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class N1{constructor(t){this.t=t,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){let s=this.i;const i=l=>this.i!==s?(s=this.i,r(l)):Promise.resolve();let o=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wn,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=o;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},c=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wn)}},0),a()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==t?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Me(typeof s.accessToken=="string"),new tw(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Me(t===null||typeof t=="string"),new Tt(t)}}class V1{constructor(t,r,s){this.l=t,this.h=r,this.P=s,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class L1{constructor(t,r,s){this.l=t,this.h=r,this.P=s}getToken(){return Promise.resolve(new V1(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class M1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F1{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){const s=o=>{o.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>s(o))};const i=o=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(Me(typeof r.token=="string"),this.R=r.token,new M1(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let s=0;s<n;s++)r[s]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const i=U1(40);for(let o=0;o<i.length;++o)s.length<20&&i[o]<r&&(s+=t.charAt(i[o]%t.length))}return s}}function Ce(n,t){return n<t?-1:n>t?1:0}function ti(n,t,r){return n.length===t.length&&n.every((s,i)=>r(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new Z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ot.fromMillis(Date.now())}static fromDate(t){return ot.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*r));return new ot(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ce(this.nanoseconds,t.nanoseconds):Ce(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.timestamp=t}static fromTimestamp(t){return new de(t)}static min(){return new de(new ot(0,0))}static max(){return new de(new ot(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t,r,s){r===void 0?r=0:r>t.length&&le(),s===void 0?s=t.length-r:s>t.length-r&&le(),this.segments=t,this.offset=r,this.len=s}get length(){return this.len}isEqual(t){return Oo.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Oo?t.forEach(s=>{r.push(s)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,s=this.limit();r<s;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const s=Math.min(t.length,r.length);for(let i=0;i<s;i++){const o=t.get(i),a=r.get(i);if(o<a)return-1;if(o>a)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class Ue extends Oo{construct(t,r,s){return new Ue(t,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const s of t){if(s.indexOf("//")>=0)throw new Z(M.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(i=>i.length>0))}return new Ue(r)}static emptyPath(){return new Ue([])}}const B1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Oo{construct(t,r,s){return new yt(t,r,s)}static isValidIdentifier(t){return B1.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(t){const r=[];let s="",i=0;const o=()=>{if(s.length===0)throw new Z(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let a=!1;for(;i<t.length;){const c=t[i];if(c==="\\"){if(i+1===t.length)throw new Z(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(s+=c,i++):(o(),i++)}if(o(),a)throw new Z(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new yt(r)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.path=t}static fromPath(t){return new se(Ue.fromString(t))}static fromName(t){return new se(Ue.fromString(t).popFirst(5))}static empty(){return new se(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ue.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Ue.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new se(new Ue(t.slice()))}}function $1(n,t){const r=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=de.fromTimestamp(s===1e9?new ot(r+1,0):new ot(r,s));return new kr(i,se.empty(),t)}function j1(n){return new kr(n.readTime,n.key,-1)}class kr{constructor(t,r,s){this.readTime=t,this.documentKey=r,this.largestBatchId=s}static min(){return new kr(de.min(),se.empty(),-1)}static max(){return new kr(de.max(),se.empty(),-1)}}function H1(n,t){let r=n.readTime.compareTo(t.readTime);return r!==0?r:(r=se.comparator(n.documentKey,t.documentKey),r!==0?r:Ce(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class W1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==q1)throw n;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new F((s,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(s,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(s,i)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof F?r:F.resolve(r)}catch(r){return F.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):F.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):F.reject(r)}static resolve(t){return new F((r,s)=>{r(t)})}static reject(t){return new F((r,s)=>{s(t)})}static waitFor(t){return new F((r,s)=>{let i=0,o=0,a=!1;t.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&r()},l=>s(l))}),a=!0,o===i&&r()})}static or(t){let r=F.resolve(!1);for(const s of t)r=r.next(i=>i?F.resolve(i):s());return r}static forEach(t,r){const s=[];return t.forEach((i,o)=>{s.push(r.call(this,i,o))}),this.waitFor(s)}static mapArray(t,r){return new F((s,i)=>{const o=t.length,a=new Array(o);let c=0;for(let l=0;l<o;l++){const u=l;r(t[u]).next(h=>{a[u]=h,++c,c===o&&s(a)},h=>i(h))}})}static doWhile(t,r){return new F((s,i)=>{const o=()=>{t()===!0?r().next(()=>{o()},i):s()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(t,r){this.action=t,this.transaction=r,this.aborted=!1,this.V=new Wn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new eo(t,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const i=pd(s.target.error);this.V.reject(new eo(t,i))}}static open(t,r,s,i){try{return new dd(r,t.transaction(i,s))}catch(o){throw new eo(r,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Y("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const r=this.transaction.objectStore(t);return new z1(r)}}class Jr{constructor(t,r,s){this.name=t,this.version=r,this.p=s,Jr.S(rt())===12.2&&Pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Y("SimpleDb","Removing database:",t),Wr(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!fv())return!1;if(Jr.C())return!0;const t=rt(),r=Jr.S(t),s=0<r&&r<10,i=Jr.v(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||s||o)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,r){return t.store(r)}static S(t){const r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(t){const r=t.match(/Android ([\d.]+)/i),s=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(s)}async O(t){return this.db||(Y("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,s)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const a=o.target.result;r(a)},i.onblocked=()=>{s(new eo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const a=o.target.error;a.name==="VersionError"?s(new Z(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?s(new Z(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):s(new eo(t,a))},i.onupgradeneeded=o=>{Y("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const a=o.target.result;this.p.N(a,i.transaction,o.oldVersion,this.version).next(()=>{Y("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=r=>this.L(r)),this.db}B(t){this.L=t,this.db&&(this.db.onversionchange=r=>t(r))}async runTransaction(t,r,s,i){const o=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.O(t);const c=dd.open(this.db,t,o?"readonly":"readwrite",s),l=i(c).next(u=>(c.g(),u)).catch(u=>(c.abort(u),F.reject(u))).toPromise();return l.catch(()=>{}),await c.m,l}catch(c){const l=c,u=l.name!=="FirebaseError"&&a<3;if(Y("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class K1{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Wr(this.k.delete())}}class eo extends Z{constructor(t,r){super(M.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ha(n){return n.name==="IndexedDbTransactionError"}class z1{constructor(t){this.store=t}put(t,r){let s;return r!==void 0?(Y("SimpleDb","PUT",this.store.name,t,r),s=this.store.put(r,t)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",t),s=this.store.put(t)),Wr(s)}add(t){return Y("SimpleDb","ADD",this.store.name,t,t),Wr(this.store.add(t))}get(t){return Wr(this.store.get(t)).next(r=>(r===void 0&&(r=null),Y("SimpleDb","GET",this.store.name,t,r),r))}delete(t){return Y("SimpleDb","DELETE",this.store.name,t),Wr(this.store.delete(t))}count(){return Y("SimpleDb","COUNT",this.store.name),Wr(this.store.count())}W(t,r){const s=this.options(t,r),i=s.index?this.store.index(s.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(s.range);return new F((a,c)=>{o.onerror=l=>{c(l.target.error)},o.onsuccess=l=>{a(l.target.result)}})}{const o=this.cursor(s),a=[];return this.G(o,(c,l)=>{a.push(l)}).next(()=>a)}}j(t,r){const s=this.store.getAll(t,r===null?void 0:r);return new F((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}H(t,r){Y("SimpleDb","DELETE ALL",this.store.name);const s=this.options(t,r);s.J=!1;const i=this.cursor(s);return this.G(i,(o,a,c)=>c.delete())}Y(t,r){let s;r?s=t:(s={},r=t);const i=this.cursor(s);return this.G(i,r)}Z(t){const r=this.cursor({});return new F((s,i)=>{r.onerror=o=>{const a=pd(o.target.error);i(a)},r.onsuccess=o=>{const a=o.target.result;a?t(a.primaryKey,a.value).next(c=>{c?a.continue():s()}):s()}})}G(t,r){const s=[];return new F((i,o)=>{t.onerror=a=>{o(a.target.error)},t.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const l=new K1(c),u=r(c.primaryKey,c.value,l);if(u instanceof F){const h=u.catch(f=>(l.done(),F.reject(f)));s.push(h)}l.isDone?i():l.$===null?c.continue():c.continue(l.$)}}).next(()=>F.waitFor(s))}options(t,r){let s;return t!==void 0&&(typeof t=="string"?s=t:r=t),{index:s,range:r}}cursor(t){let r="next";if(t.reverse&&(r="prev"),t.index){const s=this.store.index(t.index);return t.J?s.openKeyCursor(t.range,r):s.openCursor(t.range,r)}return this.store.openCursor(t.range,r)}}function Wr(n){return new F((t,r)=>{n.onsuccess=s=>{const i=s.target.result;t(i)},n.onerror=s=>{const i=pd(s.target.error);r(i)}})}let jm=!1;function pd(n){const t=Jr.S(rt());if(t>=12.2&&t<13){const r="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(r)>=0){const s=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jm||(jm=!0,setTimeout(()=>{throw s},0)),s}}return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.se(s),this.oe=s=>r.writeSequenceNumber(s))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}md._e=-1;function Dl(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function G1(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n){let t=0;for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t++;return t}function ws(n,t){for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t(r,n[r])}function rw(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t,r){this.comparator=t,this.root=r||mt.EMPTY}insert(t,r){return new Ge(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(t){return new Ge(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mt.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(t){let r=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return r+s.left.size;i<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,s)=>(t(r,s),!1))}toString(){const t=[];return this.inorderTraversal((r,s)=>(t.push(`${r}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new $a(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new $a(this.root,t,this.comparator,!1)}getReverseIterator(){return new $a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new $a(this.root,t,this.comparator,!0)}}class $a{constructor(t,r,s,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=r?s(t.key,r):1,r&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class mt{constructor(t,r,s,i,o){this.key=t,this.value=r,this.color=s??mt.RED,this.left=i??mt.EMPTY,this.right=o??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,s,i,o){return new mt(t??this.key,r??this.value,s??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let i=this;const o=s(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,r,s),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(t,r,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let s,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(t,i.key)===0){if(i.right.isEmpty())return mt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const t=this.left.check();if(t!==this.right.check())throw le();return t+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(t,r,s,i,o){return this}insert(t,r,s){return new mt(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.comparator=t,this.data=new Ge(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,s)=>(t(r),!1))}forEachInRange(t,r){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;r(i.key)}}forEachWhile(t,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new qm(this.data.getIterator())}getIteratorFrom(t){return new qm(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(s=>{r=r.add(s)}),r}isEqual(t){if(!(t instanceof Et)||this.size!==t.size)return!1;const r=this.data.getIterator(),s=t.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=s.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Et(this.comparator);return r.data=t,r}}class qm{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.fields=t,t.sort(yt.comparator)}static empty(){return new qt([])}unionWith(t){let r=new Et(yt.comparator);for(const s of this.fields)r=r.add(s);for(const s of t)r=r.add(s);return new qt(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return ti(this.fields,t.fields,(r,s)=>r.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new sw("Invalid base64 string: "+o):o}}(t);return new Ct(r)}static fromUint8Array(t){const r=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(t);return new Ct(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ce(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const Q1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(n){if(Me(!!n),typeof n=="string"){let t=0;const r=Q1.exec(n);if(Me(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:et(n.seconds),nanos:et(n.nanos)}}function et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ds(n){return typeof n=="string"?Ct.fromBase64String(n):Ct.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function _d(n){const t=n.mapValue.fields.__previous_value__;return gd(t)?_d(t):t}function xo(n){const t=Or(n.mapValue.fields.__local_write_time__.timestampValue);return new ot(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(t,r,s,i,o,a,c,l,u){this.databaseId=t,this.appId=r,this.persistenceKey=s,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}}class Do{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Do("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Do&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ps(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gd(n)?4:Y1(n)?9007199254740991:10:le()}function kn(n,t){if(n===t)return!0;const r=ps(n);if(r!==ps(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return xo(n).isEqual(xo(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=Or(i.timestampValue),c=Or(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,o){return ds(i.bytesValue).isEqual(ds(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,o){return et(i.geoPointValue.latitude)===et(o.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(o.geoPointValue.longitude)}(n,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return et(i.integerValue)===et(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=et(i.doubleValue),c=et(o.doubleValue);return a===c?Lc(a)===Lc(c):isNaN(a)&&isNaN(c)}return!1}(n,t);case 9:return ti(n.arrayValue.values||[],t.arrayValue.values||[],kn);case 10:return function(i,o){const a=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Hm(a)!==Hm(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!kn(a[l],c[l])))return!1;return!0}(n,t);default:return le()}}function No(n,t){return(n.values||[]).find(r=>kn(r,t))!==void 0}function ni(n,t){if(n===t)return 0;const r=ps(n),s=ps(t);if(r!==s)return Ce(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,t.booleanValue);case 2:return function(o,a){const c=et(o.integerValue||o.doubleValue),l=et(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,t);case 3:return Wm(n.timestampValue,t.timestampValue);case 4:return Wm(xo(n),xo(t));case 5:return Ce(n.stringValue,t.stringValue);case 6:return function(o,a){const c=ds(o),l=ds(a);return c.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(o,a){const c=o.split("/"),l=a.split("/");for(let u=0;u<c.length&&u<l.length;u++){const h=Ce(c[u],l[u]);if(h!==0)return h}return Ce(c.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,a){const c=Ce(et(o.latitude),et(a.latitude));return c!==0?c:Ce(et(o.longitude),et(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(o,a){const c=o.values||[],l=a.values||[];for(let u=0;u<c.length&&u<l.length;++u){const h=ni(c[u],l[u]);if(h)return h}return Ce(c.length,l.length)}(n.arrayValue,t.arrayValue);case 10:return function(o,a){if(o===ja.mapValue&&a===ja.mapValue)return 0;if(o===ja.mapValue)return 1;if(a===ja.mapValue)return-1;const c=o.fields||{},l=Object.keys(c),u=a.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const d=Ce(l[f],h[f]);if(d!==0)return d;const p=ni(c[l[f]],u[h[f]]);if(p!==0)return p}return Ce(l.length,h.length)}(n.mapValue,t.mapValue);default:throw le()}}function Wm(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Ce(n,t);const r=Or(n),s=Or(t),i=Ce(r.seconds,s.seconds);return i!==0?i:Ce(r.nanos,s.nanos)}function ri(n){return xh(n)}function xh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Or(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(r){return ds(r).toBase64()}(n.bytesValue):"referenceValue"in n?function(r){return se.fromName(r).toString()}(n.referenceValue):"geoPointValue"in n?function(r){return`geo(${r.latitude},${r.longitude})`}(n.geoPointValue):"arrayValue"in n?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=xh(o);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${xh(r.fields[a])}`;return i+"}"}(n.mapValue):le()}function Km(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Dh(n){return!!n&&"integerValue"in n}function yd(n){return!!n&&"arrayValue"in n}function zm(n){return!!n&&"nullValue"in n}function Gm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ec(n){return!!n&&"mapValue"in n}function to(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ws(n.mapValue.fields,(r,s)=>t.mapValue.fields[r]=to(s)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(n.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=to(n.arrayValue.values[r]);return t}return Object.assign({},n)}function Y1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t){this.value=t}static empty(){return new Vt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let s=0;s<t.length-1;++s)if(r=(r.mapValue.fields||{})[t.get(s)],!ec(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=to(r)}setAll(t){let r=yt.emptyPath(),s={},i=[];t.forEach((a,c)=>{if(!r.isImmediateParentOf(c)){const l=this.getFieldsMap(r);this.applyChanges(l,s,i),s={},i=[],r=c.popLast()}a?s[c.lastSegment()]=to(a):i.push(c.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,s,i)}delete(t){const r=this.field(t.popLast());ec(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return kn(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=r.mapValue.fields[t.get(s)];ec(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[t.get(s)]=i),r=i}return r.mapValue.fields}applyChanges(t,r,s){ws(r,(i,o)=>t[i]=o);for(const i of s)delete t[i]}clone(){return new Vt(to(this.value))}}function iw(n){const t=[];return ws(n.fields,(r,s)=>{const i=new yt([r]);if(ec(s)){const o=iw(s.mapValue).fields;if(o.length===0)t.push(i);else for(const a of o)t.push(i.child(a))}else t.push(i)}),new qt(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t,r,s,i,o,a,c){this.key=t,this.documentType=r,this.version=s,this.readTime=i,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(t){return new bt(t,0,de.min(),de.min(),de.min(),Vt.empty(),0)}static newFoundDocument(t,r,s,i){return new bt(t,1,r,de.min(),s,i,0)}static newNoDocument(t,r){return new bt(t,2,r,de.min(),de.min(),Vt.empty(),0)}static newUnknownDocument(t,r){return new bt(t,3,r,de.min(),de.min(),Vt.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof bt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(t,r){this.position=t,this.inclusive=r}}function Qm(n,t,r){let s=0;for(let i=0;i<n.position.length;i++){const o=t[i],a=n.position[i];if(o.field.isKeyField()?s=se.comparator(se.fromName(a.referenceValue),r.key):s=ni(a,r.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function Jm(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let r=0;r<n.position.length;r++)if(!kn(n.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,r="asc"){this.field=t,this.dir=r}}function X1(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{}class tt extends ow{constructor(t,r,s){super(),this.field=t,this.op=r,this.value=s}static create(t,r,s){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,s):new ek(t,r,s):r==="array-contains"?new rk(t,s):r==="in"?new sk(t,s):r==="not-in"?new ik(t,s):r==="array-contains-any"?new ok(t,s):new tt(t,r,s)}static createKeyFieldInFilter(t,r,s){return r==="in"?new tk(t,s):new nk(t,s)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(ni(r,this.value)):r!==null&&ps(this.value)===ps(r)&&this.matchesComparison(ni(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends ow{constructor(t,r){super(),this.filters=t,this.op=r,this.ue=null}static create(t,r){return new ln(t,r)}matches(t){return aw(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function aw(n){return n.op==="and"}function cw(n){return Z1(n)&&aw(n)}function Z1(n){for(const t of n.filters)if(t instanceof ln)return!1;return!0}function Nh(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+ri(n.value);if(cw(n))return n.filters.map(t=>Nh(t)).join(",");{const t=n.filters.map(r=>Nh(r)).join(",");return`${n.op}(${t})`}}function lw(n,t){return n instanceof tt?function(s,i){return i instanceof tt&&s.op===i.op&&s.field.isEqual(i.field)&&kn(s.value,i.value)}(n,t):n instanceof ln?function(s,i){return i instanceof ln&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((o,a,c)=>o&&lw(a,i.filters[c]),!0):!1}(n,t):void le()}function uw(n){return n instanceof tt?function(r){return`${r.field.canonicalString()} ${r.op} ${ri(r.value)}`}(n):n instanceof ln?function(r){return r.op.toString()+" {"+r.getFilters().map(uw).join(" ,")+"}"}(n):"Filter"}class ek extends tt{constructor(t,r,s){super(t,r,s),this.key=se.fromName(s.referenceValue)}matches(t){const r=se.comparator(t.key,this.key);return this.matchesComparison(r)}}class tk extends tt{constructor(t,r){super(t,"in",r),this.keys=hw("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class nk extends tt{constructor(t,r){super(t,"not-in",r),this.keys=hw("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function hw(n,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(s=>se.fromName(s.referenceValue))}class rk extends tt{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return yd(r)&&No(r.arrayValue,this.value)}}class sk extends tt{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&No(this.value.arrayValue,r)}}class ik extends tt{constructor(t,r){super(t,"not-in",r)}matches(t){if(No(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!No(this.value.arrayValue,r)}}class ok extends tt{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!yd(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>No(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(t,r=null,s=[],i=[],o=null,a=null,c=null){this.path=t,this.collectionGroup=r,this.orderBy=s,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.ce=null}}function Ym(n,t=null,r=[],s=[],i=null,o=null,a=null){return new ak(n,t,r,s,i,o,a)}function vd(n){const t=me(n);if(t.ce===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(s=>Nh(s)).join(","),r+="|ob:",r+=t.orderBy.map(s=>function(o){return o.field.canonicalString()+o.dir}(s)).join(","),Dl(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>ri(s)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>ri(s)).join(",")),t.ce=r}return t.ce}function Ed(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!X1(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(!lw(n.filters[r],t.filters[r]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Jm(n.startAt,t.startAt)&&Jm(n.endAt,t.endAt)}function Vh(n){return se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,r=null,s=[],i=[],o=null,a="F",c=null,l=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function ck(n,t,r,s,i,o,a,c){return new fa(n,t,r,s,i,o,a,c)}function fw(n){return new fa(n)}function Xm(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dw(n){return n.collectionGroup!==null}function no(n){const t=me(n);if(t.le===null){t.le=[];const r=new Set;for(const o of t.explicitOrderBy)t.le.push(o),r.add(o.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Et(yt.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(t).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||t.le.push(new Fc(o,s))}),r.has(yt.keyField().canonicalString())||t.le.push(new Fc(yt.keyField(),s))}return t.le}function In(n){const t=me(n);return t.he||(t.he=lk(t,no(n))),t.he}function lk(n,t){if(n.limitType==="F")return Ym(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Fc(i.field,o)});const r=n.endAt?new Mc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Mc(n.startAt.position,n.startAt.inclusive):null;return Ym(n.path,n.collectionGroup,t,n.filters,n.limit,r,s)}}function Lh(n,t){const r=n.filters.concat([t]);return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),r,n.limit,n.limitType,n.startAt,n.endAt)}function Mh(n,t,r){return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,r,n.startAt,n.endAt)}function Nl(n,t){return Ed(In(n),In(t))&&n.limitType===t.limitType}function pw(n){return`${vd(In(n))}|lt:${n.limitType}`}function Rs(n){return`Query(target=${function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(i=>uw(i)).join(", ")}]`),Dl(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(i=>ri(i)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(i=>ri(i)).join(",")),`Target(${s})`}(In(n))}; limitType=${n.limitType})`}function Vl(n,t){return t.isFoundDocument()&&function(s,i){const o=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):se.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)}(n,t)&&function(s,i){for(const o of no(s))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,t)&&function(s,i){for(const o of s.filters)if(!o.matches(i))return!1;return!0}(n,t)&&function(s,i){return!(s.startAt&&!function(a,c,l){const u=Qm(a,c,l);return a.inclusive?u<=0:u<0}(s.startAt,no(s),i)||s.endAt&&!function(a,c,l){const u=Qm(a,c,l);return a.inclusive?u>=0:u>0}(s.endAt,no(s),i))}(n,t)}function uk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mw(n){return(t,r)=>{let s=!1;for(const i of no(n)){const o=hk(i,t,r);if(o!==0)return o;s=s||i.field.isKeyField()}return 0}}function hk(n,t,r){const s=n.field.isKeyField()?se.comparator(t.key,r.key):function(o,a,c){const l=a.data.field(o),u=c.data.field(o);return l!==null&&u!==null?ni(l,u):le()}(n.field,t,r);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s!==void 0){for(const[i,o]of s)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,r){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,r]);i.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[r]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ws(this.inner,(r,s)=>{for(const[i,o]of s)t(i,o)})}isEmpty(){return rw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new Ge(se.comparator);function Yn(){return fk}const gw=new Ge(se.comparator);function Hi(...n){let t=gw;for(const r of n)t=t.insert(r.key,r);return t}function _w(n){let t=gw;return n.forEach((r,s)=>t=t.insert(r,s.overlayedDocument)),t}function Yr(){return ro()}function yw(){return ro()}function ro(){return new bi(n=>n.toString(),(n,t)=>n.isEqual(t))}const dk=new Ge(se.comparator),pk=new Et(se.comparator);function Te(...n){let t=pk;for(const r of n)t=t.add(r);return t}const mk=new Et(Ce);function gk(){return mk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(t)?"-0":t}}function Ew(n){return{integerValue:""+n}}function _k(n,t){return G1(t)?Ew(t):vw(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this._=void 0}}function yk(n,t,r){return n instanceof Uc?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&gd(o)&&(o=_d(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(r,t):n instanceof Vo?Tw(n,t):n instanceof Lo?bw(n,t):function(i,o){const a=ww(i,o),c=Zm(a)+Zm(i.Ie);return Dh(a)&&Dh(i.Ie)?Ew(c):vw(i.serializer,c)}(n,t)}function vk(n,t,r){return n instanceof Vo?Tw(n,t):n instanceof Lo?bw(n,t):r}function ww(n,t){return n instanceof Bc?function(s){return Dh(s)||function(o){return!!o&&"doubleValue"in o}(s)}(t)?t:{integerValue:0}:null}class Uc extends Ll{}class Vo extends Ll{constructor(t){super(),this.elements=t}}function Tw(n,t){const r=Iw(t);for(const s of n.elements)r.some(i=>kn(i,s))||r.push(s);return{arrayValue:{values:r}}}class Lo extends Ll{constructor(t){super(),this.elements=t}}function bw(n,t){let r=Iw(t);for(const s of n.elements)r=r.filter(i=>!kn(i,s));return{arrayValue:{values:r}}}class Bc extends Ll{constructor(t,r){super(),this.serializer=t,this.Ie=r}}function Zm(n){return et(n.integerValue||n.doubleValue)}function Iw(n){return yd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Ek(n,t){return n.field.isEqual(t.field)&&function(s,i){return s instanceof Vo&&i instanceof Vo||s instanceof Lo&&i instanceof Lo?ti(s.elements,i.elements,kn):s instanceof Bc&&i instanceof Bc?kn(s.Ie,i.Ie):s instanceof Uc&&i instanceof Uc}(n.transform,t.transform)}class wk{constructor(t,r){this.version=t,this.transformResults=r}}class An{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new An}static exists(t){return new An(void 0,t)}static updateTime(t){return new An(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function tc(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Ml{}function Aw(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Rw(n.key,An.none()):new da(n.key,n.data,An.none());{const r=n.data,s=Vt.empty();let i=new Et(yt.comparator);for(let o of t.fields)if(!i.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?s.delete(o):s.set(o,a),i=i.add(o)}return new Ur(n.key,s,new qt(i.toArray()),An.none())}}function Tk(n,t,r){n instanceof da?function(i,o,a){const c=i.value.clone(),l=tg(i.fieldTransforms,o,a.transformResults);c.setAll(l),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,r):n instanceof Ur?function(i,o,a){if(!tc(i.precondition,o))return void o.convertToUnknownDocument(a.version);const c=tg(i.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(Sw(i)),l.setAll(c),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,r):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,r)}function so(n,t,r,s){return n instanceof da?function(o,a,c,l){if(!tc(o.precondition,a))return c;const u=o.value.clone(),h=ng(o.fieldTransforms,l,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(n,t,r,s):n instanceof Ur?function(o,a,c,l){if(!tc(o.precondition,a))return c;const u=ng(o.fieldTransforms,l,a),h=a.data;return h.setAll(Sw(o)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,t,r,s):function(o,a,c){return tc(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,t,r)}function bk(n,t){let r=null;for(const s of n.fieldTransforms){const i=t.data.field(s.field),o=ww(s.transform,i||null);o!=null&&(r===null&&(r=Vt.empty()),r.set(s.field,o))}return r||null}function eg(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&ti(s,i,(o,a)=>Ek(o,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class da extends Ml{constructor(t,r,s,i=[]){super(),this.key=t,this.value=r,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ur extends Ml{constructor(t,r,s,i,o=[]){super(),this.key=t,this.data=r,this.fieldMask=s,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Sw(n){const t=new Map;return n.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=n.data.field(r);t.set(r,s)}}),t}function tg(n,t,r){const s=new Map;Me(n.length===r.length);for(let i=0;i<r.length;i++){const o=n[i],a=o.transform,c=t.data.field(o.field);s.set(o.field,vk(a,c,r[i]))}return s}function ng(n,t,r){const s=new Map;for(const i of n){const o=i.transform,a=r.data.field(i.field);s.set(i.field,yk(o,a,t))}return s}class Rw extends Ml{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ik extends Ml{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(t,r,s,i){this.batchId=t,this.localWriteTime=r,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,r){const s=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&Tk(o,t,s[i])}}applyToLocalView(t,r){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(r=so(s,t,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(r=so(s,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const s=yw();return this.mutations.forEach(i=>{const o=t.get(i.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=r.has(i.key)?null:c;const l=Aw(a,c);l!==null&&s.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(de.min())}),s}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Te())}isEqual(t){return this.batchId===t.batchId&&ti(this.mutations,t.mutations,(r,s)=>eg(r,s))&&ti(this.baseMutations,t.baseMutations,(r,s)=>eg(r,s))}}class wd{constructor(t,r,s,i){this.batch=t,this.commitVersion=r,this.mutationResults=s,this.docVersions=i}static from(t,r,s){Me(t.mutations.length===s.length);let i=function(){return dk}();const o=t.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,s[a].version);return new wd(t,r,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,Ie;function Ck(n){switch(n){default:return le();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Cw(n){if(n===void 0)return Pn("GRPC error has no .code"),M.UNKNOWN;switch(n){case Ze.OK:return M.OK;case Ze.CANCELLED:return M.CANCELLED;case Ze.UNKNOWN:return M.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return M.INTERNAL;case Ze.UNAVAILABLE:return M.UNAVAILABLE;case Ze.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ze.NOT_FOUND:return M.NOT_FOUND;case Ze.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ze.ABORTED:return M.ABORTED;case Ze.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ze.DATA_LOSS:return M.DATA_LOSS;default:return le()}}(Ie=Ze||(Ze={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Ws([4294967295,4294967295],0);function rg(n){const t=Pk().encode(n),r=new O1;return r.update(t),new Uint8Array(r.digest())}function sg(n){const t=new DataView(n.buffer),r=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ws([r,s],0),new Ws([i,o],0)]}class Td{constructor(t,r,s){if(this.bitmap=t,this.padding=r,this.hashCount=s,r<0||r>=8)throw new qi(`Invalid padding: ${r}`);if(s<0)throw new qi(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new qi(`Invalid hash count: ${s}`);if(t.length===0&&r!==0)throw new qi(`Invalid padding when bitmap length is 0: ${r}`);this.Te=8*t.length-r,this.Ee=Ws.fromNumber(this.Te)}de(t,r,s){let i=t.add(r.multiply(Ws.fromNumber(s)));return i.compare(kk)===1&&(i=new Ws([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const r=rg(t),[s,i]=sg(r);for(let o=0;o<this.hashCount;o++){const a=this.de(s,i,o);if(!this.Ae(a))return!1}return!0}static create(t,r,s){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),a=new Td(o,i,r);return s.forEach(c=>a.insert(c)),a}insert(t){if(this.Te===0)return;const r=rg(t),[s,i]=sg(r);for(let o=0;o<this.hashCount;o++){const a=this.de(s,i,o);this.Re(a)}}Re(t){const r=Math.floor(t/8),s=t%8;this.bitmap[r]|=1<<s}}class qi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,r,s,i,o){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,r,s){const i=new Map;return i.set(t,pa.createSynthesizedTargetChangeForCurrentChange(t,r,s)),new Fl(de.min(),i,new Ge(Ce),Yn(),Te())}}class pa{constructor(t,r,s,i,o){this.resumeToken=t,this.current=r,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,r,s){return new pa(s,r,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t,r,s,i){this.Ve=t,this.removedTargetIds=r,this.key=s,this.me=i}}class Pw{constructor(t,r){this.targetId=t,this.fe=r}}class kw{constructor(t,r,s=Ct.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=r,this.resumeToken=s,this.cause=i}}class ig{constructor(){this.ge=0,this.pe=ag(),this.ye=Ct.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Te(),r=Te(),s=Te();return this.pe.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:r=r.add(i);break;case 1:s=s.add(i);break;default:le()}}),new pa(this.ye,this.we,t,r,s)}Fe(){this.Se=!1,this.pe=ag()}Me(t,r){this.Se=!0,this.pe=this.pe.insert(t,r)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Me(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Ok{constructor(t){this.Be=t,this.ke=new Map,this.qe=Yn(),this.Qe=og(),this.Ke=new Ge(Ce)}$e(t){for(const r of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(r,t.me):this.We(r,t.key,t.me);for(const r of t.removedTargetIds)this.We(r,t.key,t.me)}Ge(t){this.forEachTarget(t,r=>{const s=this.ze(r);switch(t.state){case 0:this.je(r)&&s.Ce(t.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(t.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(r);break;case 3:this.je(r)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.je(r)&&(this.He(r),s.Ce(t.resumeToken));break;default:le()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ke.forEach((s,i)=>{this.je(i)&&r(i)})}Je(t){const r=t.targetId,s=t.fe.count,i=this.Ye(r);if(i){const o=i.target;if(Vh(o))if(s===0){const a=new se(o.path);this.We(r,a,bt.newNoDocument(a,de.min()))}else Me(s===1);else{const a=this.Ze(r);if(a!==s){const c=this.Xe(t),l=c?this.et(c,t,a):1;if(l!==0){this.He(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(r,u)}}}}}Xe(t){const r=t.fe.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:o=0}=r;let a,c;try{a=ds(s).toUint8Array()}catch(l){if(l instanceof sw)return ei("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Td(a,i,o)}catch(l){return ei(l instanceof qi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Te===0?null:c}et(t,r,s){return r.fe.count===s-this.rt(t,r.targetId)?0:2}rt(t,r){const s=this.Be.getRemoteKeysForTarget(r);let i=0;return s.forEach(o=>{const a=this.Be.nt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.mightContain(c)||(this.We(r,o,null),i++)}),i}it(t){const r=new Map;this.ke.forEach((o,a)=>{const c=this.Ye(a);if(c){if(o.current&&Vh(c.target)){const l=new se(c.target.path);this.qe.get(l)!==null||this.st(a,l)||this.We(a,l,bt.newNoDocument(l,t))}o.De&&(r.set(a,o.ve()),o.Fe())}});let s=Te();this.Qe.forEach((o,a)=>{let c=!0;a.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(o))}),this.qe.forEach((o,a)=>a.setReadTime(t));const i=new Fl(t,r,this.Ke,this.qe,s);return this.qe=Yn(),this.Qe=og(),this.Ke=new Ge(Ce),i}Ue(t,r){if(!this.je(t))return;const s=this.st(t,r.key)?2:0;this.ze(t).Me(r.key,s),this.qe=this.qe.insert(r.key,r),this.Qe=this.Qe.insert(r.key,this.ot(r.key).add(t))}We(t,r,s){if(!this.je(t))return;const i=this.ze(t);this.st(t,r)?i.Me(r,1):i.xe(r),this.Qe=this.Qe.insert(r,this.ot(r).delete(t)),s&&(this.qe=this.qe.insert(r,s))}removeTarget(t){this.ke.delete(t)}Ze(t){const r=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let r=this.ke.get(t);return r||(r=new ig,this.ke.set(t,r)),r}ot(t){let r=this.Qe.get(t);return r||(r=new Et(Ce),this.Qe=this.Qe.insert(t,r)),r}je(t){const r=this.Ye(t)!==null;return r||Y("WatchChangeAggregator","Detected inactive target",t),r}Ye(t){const r=this.ke.get(t);return r&&r.be?null:this.Be._t(t)}He(t){this.ke.set(t,new ig),this.Be.getRemoteKeysForTarget(t).forEach(r=>{this.We(t,r,null)})}st(t,r){return this.Be.getRemoteKeysForTarget(t).has(r)}}function og(){return new Ge(se.comparator)}function ag(){return new Ge(se.comparator)}const xk={asc:"ASCENDING",desc:"DESCENDING"},Dk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nk={and:"AND",or:"OR"};class Vk{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Fh(n,t){return n.useProto3Json||Dl(t)?t:{value:t}}function $c(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ow(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Lk(n,t){return $c(n,t.toTimestamp())}function Sn(n){return Me(!!n),de.fromTimestamp(function(r){const s=Or(r);return new ot(s.seconds,s.nanos)}(n))}function bd(n,t){return Uh(n,t).canonicalString()}function Uh(n,t){const r=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?r:r.child(t)}function xw(n){const t=Ue.fromString(n);return Me(Mw(t)),t}function Bh(n,t){return bd(n.databaseId,t.path)}function Ru(n,t){const r=xw(t);if(r.get(1)!==n.databaseId.projectId)throw new Z(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+n.databaseId.projectId);if(r.get(3)!==n.databaseId.database)throw new Z(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+n.databaseId.database);return new se(Nw(r))}function Dw(n,t){return bd(n.databaseId,t)}function Mk(n){const t=xw(n);return t.length===4?Ue.emptyPath():Nw(t)}function $h(n){return new Ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Nw(n){return Me(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function cg(n,t,r){return{name:Bh(n,t),fields:r.value.mapValue.fields}}function Fk(n,t){let r;if("targetChange"in t){t.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:le()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(Me(h===void 0||typeof h=="string"),Ct.fromBase64String(h||"")):(Me(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ct.fromUint8Array(h||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(u){const h=u.code===void 0?M.UNKNOWN:Cw(u.code);return new Z(h,u.message||"")}(a);r=new kw(s,i,o,c||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Ru(n,s.document.name),o=Sn(s.document.updateTime),a=s.document.createTime?Sn(s.document.createTime):de.min(),c=new Vt({mapValue:{fields:s.document.fields}}),l=bt.newFoundDocument(i,o,a,c),u=s.targetIds||[],h=s.removedTargetIds||[];r=new nc(u,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Ru(n,s.document),o=s.readTime?Sn(s.readTime):de.min(),a=bt.newNoDocument(i,o),c=s.removedTargetIds||[];r=new nc([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Ru(n,s.document),o=s.removedTargetIds||[];r=new nc([],o,i,null)}else{if(!("filter"in t))return le();{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:o}=s,a=new Rk(i,o),c=s.targetId;r=new Pw(c,a)}}return r}function Uk(n,t){let r;if(t instanceof da)r={update:cg(n,t.key,t.value)};else if(t instanceof Rw)r={delete:Bh(n,t.key)};else if(t instanceof Ur)r={update:cg(n,t.key,t.data),updateMask:Gk(t.fieldMask)};else{if(!(t instanceof Ik))return le();r={verify:Bh(n,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(s=>function(o,a){const c=a.transform;if(c instanceof Uc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Vo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Lo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bc)return{fieldPath:a.field.canonicalString(),increment:c.Ie};throw le()}(0,s))),t.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Lk(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:le()}(n,t.precondition)),r}function Bk(n,t){return n&&n.length>0?(Me(t!==void 0),n.map(r=>function(i,o){let a=i.updateTime?Sn(i.updateTime):Sn(o);return a.isEqual(de.min())&&(a=Sn(o)),new wk(a,i.transformResults||[])}(r,t))):[]}function $k(n,t){return{documents:[Dw(n,t.path)]}}function jk(n,t){const r={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=Dw(n,i);const o=function(u){if(u.length!==0)return Lw(ln.create(u,"and"))}(t.filters);o&&(r.structuredQuery.where=o);const a=function(u){if(u.length!==0)return u.map(h=>function(d){return{field:Cs(d.field),direction:Wk(d.dir)}}(h))}(t.orderBy);a&&(r.structuredQuery.orderBy=a);const c=Fh(n,t.limit);return c!==null&&(r.structuredQuery.limit=c),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ut:r,parent:i}}function Hk(n){let t=Mk(n.parent);const r=n.structuredQuery,s=r.from?r.from.length:0;let i=null;if(s>0){Me(s===1);const h=r.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let o=[];r.where&&(o=function(f){const d=Vw(f);return d instanceof ln&&cw(d)?d.getFilters():[d]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(d=>function(g){return new Fc(Ps(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(r.orderBy));let c=null;r.limit&&(c=function(f){let d;return d=typeof f=="object"?f.value:f,Dl(d)?null:d}(r.limit));let l=null;r.startAt&&(l=function(f){const d=!!f.before,p=f.values||[];return new Mc(p,d)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const d=!f.before,p=f.values||[];return new Mc(p,d)}(r.endAt)),ck(t,i,a,o,c,"F",l,u)}function qk(n,t){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function Vw(n){return n.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Ps(r.unaryFilter.field);return tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Ps(r.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ps(r.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ps(r.unaryFilter.field);return tt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(n):n.fieldFilter!==void 0?function(r){return tt.create(Ps(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(r.fieldFilter.op),r.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(r){return ln.create(r.compositeFilter.filters.map(s=>Vw(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(r.compositeFilter.op))}(n):le()}function Wk(n){return xk[n]}function Kk(n){return Dk[n]}function zk(n){return Nk[n]}function Cs(n){return{fieldPath:n.canonicalString()}}function Ps(n){return yt.fromServerFormat(n.fieldPath)}function Lw(n){return n instanceof tt?function(r){if(r.op==="=="){if(Gm(r.value))return{unaryFilter:{field:Cs(r.field),op:"IS_NAN"}};if(zm(r.value))return{unaryFilter:{field:Cs(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Gm(r.value))return{unaryFilter:{field:Cs(r.field),op:"IS_NOT_NAN"}};if(zm(r.value))return{unaryFilter:{field:Cs(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(r.field),op:Kk(r.op),value:r.value}}}(n):n instanceof ln?function(r){const s=r.getFilters().map(i=>Lw(i));return s.length===1?s[0]:{compositeFilter:{op:zk(r.op),filters:s}}}(n):le()}function Gk(n){const t=[];return n.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function Mw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t,r,s,i,o=de.min(),a=de.min(),c=Ct.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=r,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(t){return new Er(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(t){this.ct=t}}function Jk(n){const t=Hk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this._n=new Xk}addToCollectionParentIndex(t,r){return this._n.add(r),F.resolve()}getCollectionParents(t,r){return F.resolve(this._n.getEntries(r))}addFieldIndex(t,r){return F.resolve()}deleteFieldIndex(t,r){return F.resolve()}deleteAllFieldIndexes(t){return F.resolve()}createTargetIndexes(t,r){return F.resolve()}getDocumentsMatchingTarget(t,r){return F.resolve(null)}getIndexType(t,r){return F.resolve(0)}getFieldIndexes(t,r){return F.resolve([])}getNextCollectionGroupToUpdate(t){return F.resolve(null)}getMinOffset(t,r){return F.resolve(kr.min())}getMinOffsetFromCollectionGroup(t,r){return F.resolve(kr.min())}updateCollectionGroup(t,r,s){return F.resolve()}updateIndexEntries(t,r){return F.resolve()}}class Xk{constructor(){this.index={}}add(t){const r=t.lastSegment(),s=t.popLast(),i=this.index[r]||new Et(Ue.comparator),o=!i.has(s);return this.index[r]=i.add(s),o}has(t){const r=t.lastSegment(),s=t.popLast(),i=this.index[r];return i&&i.has(s)}getEntries(t){return(this.index[t]||new Et(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new si(0)}static Ln(){return new si(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.changes=new bi(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,bt.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?F.resolve(s):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(t,r,s,i){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,r){let s=null;return this.documentOverlayCache.getOverlay(t,r).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,r))).next(i=>(s!==null&&so(s.mutation,i,qt.empty(),ot.now()),i))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(s=>this.getLocalViewOfDocuments(t,s,Te()).next(()=>s))}getLocalViewOfDocuments(t,r,s=Te()){const i=Yr();return this.populateOverlays(t,i,r).next(()=>this.computeViews(t,r,i,s).next(o=>{let a=Hi();return o.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(t,r){const s=Yr();return this.populateOverlays(t,s,r).next(()=>this.computeViews(t,r,s,Te()))}populateOverlays(t,r,s){const i=[];return s.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((a,c)=>{r.set(a,c)})})}computeViews(t,r,s,i){let o=Yn();const a=ro(),c=function(){return ro()}();return r.forEach((l,u)=>{const h=s.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Ur)?o=o.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),so(h.mutation,u,h.mutation.getFieldMask(),ot.now())):a.set(u.key,qt.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((u,h)=>a.set(u,h)),r.forEach((u,h)=>{var f;return c.set(u,new eO(h,(f=a.get(u))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(t,r){const s=ro();let i=new Ge((a,c)=>a-c),o=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(a=>{for(const c of a)c.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let h=s.get(l)||qt.empty();h=c.applyToLocalView(u,h),s.set(l,h);const f=(i.get(c.batchId)||Te()).add(l);i=i.insert(c.batchId,f)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,h=l.value,f=yw();h.forEach(d=>{if(!o.has(d)){const p=Aw(r.get(d),s.get(d));p!==null&&f.set(d,p),o=o.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(t,u,f))}return F.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,r,s,i){return function(a){return se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):dw(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,s,i):this.getDocumentsMatchingCollectionQuery(t,r,s,i)}getNextDocuments(t,r,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,s,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,s.largestBatchId,i-o.size):F.resolve(Yr());let c=-1,l=o;return a.next(u=>F.forEach(u,(h,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),o.get(h)?F.resolve():this.remoteDocumentCache.getEntry(t,h).next(d=>{l=l.insert(h,d)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,l,u,Te())).next(h=>({batchId:c,changes:_w(h)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new se(r)).next(s=>{let i=Hi();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,r,s,i){const o=r.collectionGroup;let a=Hi();return this.indexManager.getCollectionParents(t,o).next(c=>F.forEach(c,l=>{const u=function(f,d){return new fa(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,s,i).next(h=>{h.forEach((f,d)=>{a=a.insert(f,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,r,s,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,s.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,s,o,i))).next(a=>{o.forEach((l,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,bt.newInvalidDocument(h)))});let c=Hi();return a.forEach((l,u)=>{const h=o.get(l);h!==void 0&&so(h.mutation,u,qt.empty(),ot.now()),Vl(r,u)&&(c=c.insert(l,u))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,r){return F.resolve(this.cr.get(r))}saveBundleMetadata(t,r){return this.cr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Sn(i.createTime)}}(r)),F.resolve()}getNamedQuery(t,r){return F.resolve(this.lr.get(r))}saveNamedQuery(t,r){return this.lr.set(r.name,function(i){return{name:i.name,query:Jk(i.bundledQuery),readTime:Sn(i.readTime)}}(r)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.overlays=new Ge(se.comparator),this.hr=new Map}getOverlay(t,r){return F.resolve(this.overlays.get(r))}getOverlays(t,r){const s=Yr();return F.forEach(r,i=>this.getOverlay(t,i).next(o=>{o!==null&&s.set(i,o)})).next(()=>s)}saveOverlays(t,r,s){return s.forEach((i,o)=>{this.ht(t,r,o)}),F.resolve()}removeOverlaysForBatchId(t,r,s){const i=this.hr.get(s);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(s)),F.resolve()}getOverlaysForCollection(t,r,s){const i=Yr(),o=r.length+1,a=new se(r.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>s&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(t,r,s,i){let o=new Ge((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>s){let h=o.get(u.largestBatchId);h===null&&(h=Yr(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const c=Yr(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>c.set(u,h)),!(c.size()>=i)););return F.resolve(c)}ht(t,r,s){const i=this.overlays.get(s.key);if(i!==null){const a=this.hr.get(i.largestBatchId).delete(s.key);this.hr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new Sk(r,s));let o=this.hr.get(r);o===void 0&&(o=Te(),this.hr.set(r,o)),this.hr.set(r,o.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this.Pr=new Et(ct.Ir),this.Tr=new Et(ct.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,r){const s=new ct(t,r);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(t,r){t.forEach(s=>this.addReference(s,r))}removeReference(t,r){this.Ar(new ct(t,r))}Rr(t,r){t.forEach(s=>this.removeReference(s,r))}Vr(t){const r=new se(new Ue([])),s=new ct(r,t),i=new ct(r,t+1),o=[];return this.Tr.forEachInRange([s,i],a=>{this.Ar(a),o.push(a.key)}),o}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const r=new se(new Ue([])),s=new ct(r,t),i=new ct(r,t+1);let o=Te();return this.Tr.forEachInRange([s,i],a=>{o=o.add(a.key)}),o}containsKey(t){const r=new ct(t,0),s=this.Pr.firstAfterOrEqual(r);return s!==null&&t.isEqual(s.key)}}class ct{constructor(t,r){this.key=t,this.pr=r}static Ir(t,r){return se.comparator(t.key,r.key)||Ce(t.pr,r.pr)}static Er(t,r){return Ce(t.pr,r.pr)||se.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.yr=1,this.wr=new Et(ct.Ir)}checkEmpty(t){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,s,i){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ak(o,r,s,i);this.mutationQueue.push(a);for(const c of i)this.wr=this.wr.add(new ct(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(t,r){return F.resolve(this.Sr(r))}getNextMutationBatchAfterBatchId(t,r){const s=r+1,i=this.br(s),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const s=new ct(r,0),i=new ct(r,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([s,i],a=>{const c=this.Sr(a.pr);o.push(c)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,r){let s=new Et(Ce);return r.forEach(i=>{const o=new ct(i,0),a=new ct(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,a],c=>{s=s.add(c.pr)})}),F.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(t,r){const s=r.path,i=s.length+1;let o=s;se.isDocumentKey(o)||(o=o.child(""));const a=new ct(new se(o),0);let c=new Et(Ce);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===i&&(c=c.add(l.pr)),!0)},a),F.resolve(this.Dr(c))}Dr(t){const r=[];return t.forEach(s=>{const i=this.Sr(s);i!==null&&r.push(i)}),r}removeMutationBatch(t,r){Me(this.Cr(r.batchId,"removed")===0),this.mutationQueue.shift();let s=this.wr;return F.forEach(r.mutations,i=>{const o=new ct(i.key,r.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=s})}Mn(t){}containsKey(t,r){const s=new ct(r,0),i=this.wr.firstAfterOrEqual(s);return F.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,F.resolve()}Cr(t,r){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const r=this.br(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(t){this.vr=t,this.docs=function(){return new Ge(se.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const s=r.key,i=this.docs.get(s),o=i?i.size:0,a=this.vr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const s=this.docs.get(r);return F.resolve(s?s.document.mutableCopy():bt.newInvalidDocument(r))}getEntries(t,r){let s=Yn();return r.forEach(i=>{const o=this.docs.get(i);s=s.insert(i,o?o.document.mutableCopy():bt.newInvalidDocument(i))}),F.resolve(s)}getDocumentsMatchingQuery(t,r,s,i){let o=Yn();const a=r.path,c=new se(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||H1(j1(h),s)<=0||(i.has(h.key)||Vl(r,h))&&(o=o.insert(h.key,h.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(t,r,s,i){le()}Fr(t,r){return F.forEach(this.docs,s=>r(s))}newChangeBuffer(t){return new oO(this)}getSize(t){return F.resolve(this.size)}}class oO extends Zk{constructor(t){super(),this.ar=t}applyChanges(t){const r=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?r.push(this.ar.addEntry(t,i)):this.ar.removeEntry(s)}),F.waitFor(r)}getFromCache(t,r){return this.ar.getEntry(t,r)}getAllFromCache(t,r){return this.ar.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(t){this.persistence=t,this.Mr=new bi(r=>vd(r),Ed),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Id,this.targetCount=0,this.Lr=si.Nn()}forEachTarget(t,r){return this.Mr.forEach((s,i)=>r(i)),F.resolve()}getLastRemoteSnapshotVersion(t){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return F.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(t,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Or&&(this.Or=r),F.resolve()}qn(t){this.Mr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.Lr=new si(r),this.highestTargetId=r),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,r){return this.qn(r),this.targetCount+=1,F.resolve()}updateTargetData(t,r){return this.qn(r),F.resolve()}removeTargetData(t,r){return this.Mr.delete(r.target),this.Nr.Vr(r.targetId),this.targetCount-=1,F.resolve()}removeTargets(t,r,s){let i=0;const o=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=r&&s.get(c.targetId)===null&&(this.Mr.delete(a),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(t){return F.resolve(this.targetCount)}getTargetData(t,r){const s=this.Mr.get(r)||null;return F.resolve(s)}addMatchingKeys(t,r,s){return this.Nr.dr(r,s),F.resolve()}removeMatchingKeys(t,r,s){this.Nr.Rr(r,s);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(a=>{o.push(i.markPotentiallyOrphaned(t,a))}),F.waitFor(o)}removeMatchingKeysForTargetId(t,r){return this.Nr.Vr(r),F.resolve()}getMatchingKeysForTargetId(t,r){const s=this.Nr.gr(r);return F.resolve(s)}containsKey(t,r){return F.resolve(this.Nr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(t,r){this.Br={},this.overlays={},this.kr=new md(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new aO(this),this.indexManager=new Yk,this.remoteDocumentCache=function(i){return new iO(i)}(s=>this.referenceDelegate.Kr(s)),this.serializer=new Qk(r),this.$r=new nO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new rO,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let s=this.Br[t.toKey()];return s||(s=new sO(r,this.referenceDelegate),this.Br[t.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,r,s){Y("MemoryPersistence","Starting transaction:",t);const i=new lO(this.kr.next());return this.referenceDelegate.Ur(),s(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(t,r){return F.or(Object.values(this.Br).map(s=>()=>s.containsKey(t,r)))}}class lO extends W1{constructor(t){super(),this.currentSequenceNumber=t}}class Ad{constructor(t){this.persistence=t,this.zr=new Id,this.jr=null}static Hr(t){return new Ad(t)}get Jr(){if(this.jr)return this.jr;throw le()}addReference(t,r,s){return this.zr.addReference(s,r),this.Jr.delete(s.toString()),F.resolve()}removeReference(t,r,s){return this.zr.removeReference(s,r),this.Jr.add(s.toString()),F.resolve()}markPotentiallyOrphaned(t,r){return this.Jr.add(r.toString()),F.resolve()}removeTarget(t,r){this.zr.Vr(r.targetId).forEach(i=>this.Jr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>s.removeTargetData(t,r))}Ur(){this.jr=new Set}Wr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Jr,s=>{const i=se.fromPath(s);return this.Yr(t,i).next(o=>{o||r.removeEntry(i,de.min())})}).next(()=>(this.jr=null,r.apply(t)))}updateLimboDocument(t,r){return this.Yr(t,r).next(s=>{s?this.Jr.delete(r.toString()):this.Jr.add(r.toString())})}Kr(t){return 0}Yr(t,r){return F.or([()=>F.resolve(this.zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Gr(t,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(t,r,s,i){this.targetId=t,this.fromCache=r,this.qi=s,this.Qi=i}static Ki(t,r){let s=Te(),i=Te();for(const o of r.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Sd(t,r.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return QA()?8:Jr.v(rt())>0?6:4}()}initialize(t,r){this.zi=t,this.indexManager=r,this.$i=!0}getDocumentsMatchingQuery(t,r,s,i){const o={result:null};return this.ji(t,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Hi(t,r,i,s).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new uO;return this.Ji(t,r,a).next(c=>{if(o.result=c,this.Ui)return this.Yi(t,r,a,c.size)})}).next(()=>o.result)}Yi(t,r,s,i){return s.documentReadCount<this.Wi?(Di()<=be.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Rs(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),F.resolve()):(Di()<=be.DEBUG&&Y("QueryEngine","Query:",Rs(r),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Gi*i?(Di()<=be.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Rs(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,In(r))):F.resolve())}ji(t,r){if(Xm(r))return F.resolve(null);let s=In(r);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Mh(r,null,"F"),s=In(r)),this.indexManager.getDocumentsMatchingTarget(t,s).next(o=>{const a=Te(...o);return this.zi.getDocuments(t,a).next(c=>this.indexManager.getMinOffset(t,s).next(l=>{const u=this.Zi(r,c);return this.Xi(r,u,a,l.readTime)?this.ji(t,Mh(r,null,"F")):this.es(t,u,r,l)}))})))}Hi(t,r,s,i){return Xm(r)||i.isEqual(de.min())?F.resolve(null):this.zi.getDocuments(t,s).next(o=>{const a=this.Zi(r,o);return this.Xi(r,a,s,i)?F.resolve(null):(Di()<=be.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rs(r)),this.es(t,a,r,$1(i,-1)).next(c=>c))})}Zi(t,r){let s=new Et(mw(t));return r.forEach((i,o)=>{Vl(t,o)&&(s=s.add(o))}),s}Xi(t,r,s,i){if(t.limit===null)return!1;if(s.size!==r.size)return!0;const o=t.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(t,r,s){return Di()<=be.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Rs(r)),this.zi.getDocumentsMatchingQuery(t,r,kr.min(),s)}es(t,r,s,i){return this.zi.getDocumentsMatchingQuery(t,s,i).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(t,r,s,i){this.persistence=t,this.ts=r,this.serializer=i,this.ns=new Ge(Ce),this.rs=new bi(o=>vd(o),Ed),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(s)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new tO(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.ns))}}function dO(n,t,r,s){return new fO(n,t,r,s)}async function Fw(n,t){const r=me(n);return await r.persistence.runTransaction("Handle user change","readonly",s=>{let i;return r.mutationQueue.getAllMutationBatches(s).next(o=>(i=o,r._s(t),r.mutationQueue.getAllMutationBatches(s))).next(o=>{const a=[],c=[];let l=Te();for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of o){c.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return r.localDocuments.getDocuments(s,l).next(u=>({us:u,removedBatchIds:a,addedBatchIds:c}))})})}function pO(n,t){const r=me(n);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),o=r.os.newChangeBuffer({trackRemovals:!0});return function(c,l,u,h){const f=u.batch,d=f.keys();let p=F.resolve();return d.forEach(g=>{p=p.next(()=>h.getEntry(l,g)).next(v=>{const w=u.docVersions.get(g);Me(w!==null),v.version.compareTo(w)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),p.next(()=>c.mutationQueue.removeMutationBatch(l,f))}(r,s,t,o).next(()=>o.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let l=Te();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(t))).next(()=>r.localDocuments.getDocuments(s,i))})}function Uw(n){const t=me(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Qr.getLastRemoteSnapshotVersion(r))}function mO(n,t){const r=me(n),s=t.snapshotVersion;let i=r.ns;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.os.newChangeBuffer({trackRemovals:!0});i=r.ns;const c=[];t.targetChanges.forEach((h,f)=>{const d=i.get(f);if(!d)return;c.push(r.Qr.removeMatchingKeys(o,h.removedDocuments,f).next(()=>r.Qr.addMatchingKeys(o,h.addedDocuments,f)));let p=d.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Ct.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,s)),i=i.insert(f,p),function(v,w,C){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(d,p,h)&&c.push(r.Qr.updateTargetData(o,p))});let l=Yn(),u=Te();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(gO(o,a,t.documentUpdates).next(h=>{l=h.cs,u=h.ls})),!s.isEqual(de.min())){const h=r.Qr.getLastRemoteSnapshotVersion(o).next(f=>r.Qr.setTargetsMetadata(o,o.currentSequenceNumber,s));c.push(h)}return F.waitFor(c).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(r.ns=i,o))}function gO(n,t,r){let s=Te(),i=Te();return r.forEach(o=>s=s.add(o)),t.getEntries(n,s).next(o=>{let a=Yn();return r.forEach((c,l)=>{const u=o.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(de.min())?(t.removeEntry(c,l.readTime),a=a.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),a=a.insert(c,l)):Y("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{cs:a,ls:i}})}function _O(n,t){const r=me(n);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function yO(n,t){const r=me(n);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return r.Qr.getTargetData(s,t).next(o=>o?(i=o,F.resolve(i)):r.Qr.allocateTargetId(s).next(a=>(i=new Er(t,a,"TargetPurposeListen",s.currentSequenceNumber),r.Qr.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=r.ns.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.ns=r.ns.insert(s.targetId,s),r.rs.set(t,s.targetId)),s})}async function jh(n,t,r){const s=me(n),i=s.ns.get(t),o=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",o,a=>s.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ha(a))throw a;Y("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}s.ns=s.ns.remove(t),s.rs.delete(i.target)}function lg(n,t,r){const s=me(n);let i=de.min(),o=Te();return s.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,h){const f=me(l),d=f.rs.get(h);return d!==void 0?F.resolve(f.ns.get(d)):f.Qr.getTargetData(u,h)}(s,a,In(t)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(a,c.targetId).next(l=>{o=l})}).next(()=>s.ts.getDocumentsMatchingQuery(a,t,r?i:de.min(),r?o:Te())).next(c=>(vO(s,uk(t),c),{documents:c,hs:o})))}function vO(n,t,r){let s=n.ss.get(t)||de.min();r.forEach((i,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)}),n.ss.set(t,s)}class ug{constructor(){this.activeTargetIds=gk()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class EO{constructor(){this.no=new ug,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,s){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,r,s){this.ro[t]=r}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ug,Promise.resolve()}handleUserChange(t,r,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha=null;function Cu(){return Ha===null?Ha=function(){return 268435456+Math.round(2147483648*Math.random())}():Ha++,"0x"+Ha.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class IO extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+r.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(r,s,i,o,a){const c=Cu(),l=this.bo(r,s.toUriEncodedString());Y("RestConnection",`Sending RPC '${r}' ${c}:`,l,i);const u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,o,a),this.Co(r,l,u,i).then(h=>(Y("RestConnection",`Received RPC '${r}' ${c}: `,h),h),h=>{throw ei("RestConnection",`RPC '${r}' ${c} failed with error: `,h,"url: ",l,"request:",i),h})}vo(r,s,i,o,a,c){return this.So(r,s,i,o,a)}Do(r,s,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ti}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((o,a)=>r[a]=o),i&&i.headers.forEach((o,a)=>r[a]=o)}bo(r,s){const i=TO[r];return`${this.fo}/v1/${s}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,r,s,i){const o=Cu();return new Promise((a,c)=>{const l=new k1;l.setWithCredentials(!0),l.listenOnce(C1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Su.NO_ERROR:const h=l.getResponseJson();Y(wt,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(h)),a(h);break;case Su.TIMEOUT:Y(wt,`RPC '${t}' ${o} timed out`),c(new Z(M.DEADLINE_EXCEEDED,"Request time out"));break;case Su.HTTP_ERROR:const f=l.getStatus();if(Y(wt,`RPC '${t}' ${o} failed with status:`,f,"response text:",l.getResponseText()),f>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const g=function(w){const C=w.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(C)>=0?C:M.UNKNOWN}(p.status);c(new Z(g,p.message))}else c(new Z(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Z(M.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{Y(wt,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(i);Y(wt,`RPC '${t}' ${o} sending request:`,i),l.send(r,"POST",u,s,15)})}Fo(t,r,s){const i=Cu(),o=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=S1(),c=R1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,r,s),l.encodeInitMessageHeaders=!0;const h=o.join("");Y(wt,`Creating RPC '${t}' stream ${i}: ${h}`,l);const f=a.createWebChannel(h,l);let d=!1,p=!1;const g=new bO({lo:w=>{p?Y(wt,`Not sending because RPC '${t}' stream ${i} is closed:`,w):(d||(Y(wt,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Y(wt,`RPC '${t}' stream ${i} sending:`,w),f.send(w))},ho:()=>f.close()}),v=(w,C,T)=>{w.listen(C,y=>{try{T(y)}catch(E){setTimeout(()=>{throw E},0)}})};return v(f,Ba.EventType.OPEN,()=>{p||Y(wt,`RPC '${t}' stream ${i} transport opened.`)}),v(f,Ba.EventType.CLOSE,()=>{p||(p=!0,Y(wt,`RPC '${t}' stream ${i} transport closed`),g.Vo())}),v(f,Ba.EventType.ERROR,w=>{p||(p=!0,ei(wt,`RPC '${t}' stream ${i} transport errored:`,w),g.Vo(new Z(M.UNAVAILABLE,"The operation could not be completed")))}),v(f,Ba.EventType.MESSAGE,w=>{var C;if(!p){const T=w.data[0];Me(!!T);const y=T,E=y.error||((C=y[0])===null||C===void 0?void 0:C.error);if(E){Y(wt,`RPC '${t}' stream ${i} received error:`,E);const I=E.status;let S=function(R){const A=Ze[R];if(A!==void 0)return Cw(A)}(I),k=E.message;S===void 0&&(S=M.INTERNAL,k="Unknown error status: "+I+" with message "+E.message),p=!0,g.Vo(new Z(S,k)),f.close()}else Y(wt,`RPC '${t}' stream ${i} received:`,T),g.mo(T)}}),v(c,P1.STAT_EVENT,w=>{w.stat===Bm.PROXY?Y(wt,`RPC '${t}' stream ${i} detected buffering proxy`):w.stat===Bm.NOPROXY&&Y(wt,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}}function Pu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(n){return new Vk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t,r,s=1e3,i=1.5,o=6e4){this.oi=t,this.timerId=r,this.Mo=s,this.xo=i,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const r=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Bo),i=Math.max(0,r-s);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t,r,s,i,o,a,c,l){this.oi=t,this.$o=s,this.Uo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Bw(t,r)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,r){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():r&&r.code===M.RESOURCE_EXHAUSTED?(Pn(r.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):r&&r.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(r)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),r=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Wo===r&&this.o_(s,i)},s=>{t(()=>{const i=new Z(M.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(i)})})}o_(t,r){const s=this.s_(this.Wo);this.stream=this.a_(t,r),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{s(()=>this.__(i))}),this.stream.onMessage(i=>{s(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return Y("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return r=>{this.oi.enqueueAndForget(()=>this.Wo===t?r():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AO extends $w{constructor(t,r,s,i,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,i,a),this.serializer=o}a_(t,r){return this.connection.Fo("Listen",t,r)}onMessage(t){this.jo.reset();const r=Fk(this.serializer,t),s=function(o){if(!("targetChange"in o))return de.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?de.min():a.readTime?Sn(a.readTime):de.min()}(t);return this.listener.u_(r,s)}c_(t){const r={};r.database=$h(this.serializer),r.addTarget=function(o,a){let c;const l=a.target;if(c=Vh(l)?{documents:$k(o,l)}:{query:jk(o,l).ut},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Ow(o,a.resumeToken);const u=Fh(o,a.expectedCount);u!==null&&(c.expectedCount=u)}else if(a.snapshotVersion.compareTo(de.min())>0){c.readTime=$c(o,a.snapshotVersion.toTimestamp());const u=Fh(o,a.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,t);const s=qk(this.serializer,t);s&&(r.labels=s),this.t_(r)}l_(t){const r={};r.database=$h(this.serializer),r.removeTarget=t,this.t_(r)}}class SO extends $w{constructor(t,r,s,i,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,i,a),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,r){return this.connection.Fo("Write",t,r)}onMessage(t){if(Me(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const r=Bk(t.writeResults,t.commitTime),s=Sn(t.commitTime);return this.listener.T_(s,r)}return Me(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=$h(this.serializer),this.t_(t)}I_(t){const r={streamToken:this.lastStreamToken,writes:t.map(s=>Uk(this.serializer,s))};this.t_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO extends class{}{constructor(t,r,s,i){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=s,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Z(M.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.So(t,Uh(r,s),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(M.UNKNOWN,o.toString())})}vo(t,r,s,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(t,Uh(r,s),i,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(M.UNKNOWN,a.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class CO{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Pn(r),this.g_=!1):Y("OnlineStateTracker",r)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(t,r,s,i,o){this.localStore=t,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(a=>{s.enqueueAndForget(async()=>{Ts(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=me(l);u.v_.add(4),await ma(u),u.x_.set("Unknown"),u.v_.delete(4),await Bl(u)}(this))})}),this.x_=new CO(s,i)}}async function Bl(n){if(Ts(n))for(const t of n.F_)await t(!0)}async function ma(n){for(const t of n.F_)await t(!1)}function jw(n,t){const r=me(n);r.C_.has(t.targetId)||(r.C_.set(t.targetId,t),kd(r)?Pd(r):Ii(r).Jo()&&Cd(r,t))}function Rd(n,t){const r=me(n),s=Ii(r);r.C_.delete(t),s.Jo()&&Hw(r,t),r.C_.size===0&&(s.Jo()?s.Xo():Ts(r)&&r.x_.set("Unknown"))}function Cd(n,t){if(n.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(de.min())>0){const r=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Ii(n).c_(t)}function Hw(n,t){n.O_.Oe(t),Ii(n).l_(t)}function Pd(n){n.O_=new Ok({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>n.C_.get(t)||null,nt:()=>n.datastore.serializer.databaseId}),Ii(n).start(),n.x_.p_()}function kd(n){return Ts(n)&&!Ii(n).Ho()&&n.C_.size>0}function Ts(n){return me(n).v_.size===0}function qw(n){n.O_=void 0}async function kO(n){n.C_.forEach((t,r)=>{Cd(n,t)})}async function OO(n,t){qw(n),kd(n)?(n.x_.S_(t),Pd(n)):n.x_.set("Unknown")}async function xO(n,t,r){if(n.x_.set("Online"),t instanceof kw&&t.state===2&&t.cause)try{await async function(i,o){const a=o.cause;for(const c of o.targetIds)i.C_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.C_.delete(c),i.O_.removeTarget(c))}(n,t)}catch(s){Y("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await jc(n,s)}else if(t instanceof nc?n.O_.$e(t):t instanceof Pw?n.O_.Je(t):n.O_.Ge(t),!r.isEqual(de.min()))try{const s=await Uw(n.localStore);r.compareTo(s)>=0&&await function(o,a){const c=o.O_.it(a);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.C_.get(u);h&&o.C_.set(u,h.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,u)=>{const h=o.C_.get(l);if(!h)return;o.C_.set(l,h.withResumeToken(Ct.EMPTY_BYTE_STRING,h.snapshotVersion)),Hw(o,l);const f=new Er(h.target,l,u,h.sequenceNumber);Cd(o,f)}),o.remoteSyncer.applyRemoteEvent(c)}(n,r)}catch(s){Y("RemoteStore","Failed to raise snapshot:",s),await jc(n,s)}}async function jc(n,t,r){if(!ha(t))throw t;n.v_.add(1),await ma(n),n.x_.set("Offline"),r||(r=()=>Uw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await r(),n.v_.delete(1),await Bl(n)})}function Ww(n,t){return t().catch(r=>jc(n,r,t))}async function $l(n){const t=me(n),r=xr(t);let s=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;DO(t);)try{const i=await _O(t.localStore,s);if(i===null){t.D_.length===0&&r.Xo();break}s=i.batchId,NO(t,i)}catch(i){await jc(t,i)}Kw(t)&&zw(t)}function DO(n){return Ts(n)&&n.D_.length<10}function NO(n,t){n.D_.push(t);const r=xr(n);r.Jo()&&r.P_&&r.I_(t.mutations)}function Kw(n){return Ts(n)&&!xr(n).Ho()&&n.D_.length>0}function zw(n){xr(n).start()}async function VO(n){xr(n).d_()}async function LO(n){const t=xr(n);for(const r of n.D_)t.I_(r.mutations)}async function MO(n,t,r){const s=n.D_.shift(),i=wd.from(s,t,r);await Ww(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await $l(n)}async function FO(n,t){t&&xr(n).P_&&await async function(s,i){if(function(a){return Ck(a)&&a!==M.ABORTED}(i.code)){const o=s.D_.shift();xr(s).Zo(),await Ww(s,()=>s.remoteSyncer.rejectFailedWrite(o.batchId,i)),await $l(s)}}(n,t),Kw(n)&&zw(n)}async function fg(n,t){const r=me(n);r.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const s=Ts(r);r.v_.add(3),await ma(r),s&&r.x_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.v_.delete(3),await Bl(r)}async function UO(n,t){const r=me(n);t?(r.v_.delete(2),await Bl(r)):t||(r.v_.add(2),await ma(r),r.x_.set("Unknown"))}function Ii(n){return n.N_||(n.N_=function(r,s,i){const o=me(r);return o.R_(),new AO(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:kO.bind(null,n),To:OO.bind(null,n),u_:xO.bind(null,n)}),n.F_.push(async t=>{t?(n.N_.Zo(),kd(n)?Pd(n):n.x_.set("Unknown")):(await n.N_.stop(),qw(n))})),n.N_}function xr(n){return n.L_||(n.L_=function(r,s,i){const o=me(r);return o.R_(),new SO(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:VO.bind(null,n),To:FO.bind(null,n),E_:LO.bind(null,n),T_:MO.bind(null,n)}),n.F_.push(async t=>{t?(n.L_.Zo(),await $l(n)):(await n.L_.stop(),n.D_.length>0&&(Y("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))})),n.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(t,r,s,i,o){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=s,this.op=i,this.removalCallback=o,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,s,i,o){const a=Date.now()+s,c=new Od(t,r,a,i,o);return c.start(s),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xd(n,t){if(Pn("AsyncQueue",`${t}: ${n}`),ha(n))return new Z(M.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t){this.comparator=t?(r,s)=>t(r,s)||se.comparator(r.key,s.key):(r,s)=>se.comparator(r.key,s.key),this.keyedMap=Hi(),this.sortedSet=new Ge(this.comparator)}static emptySet(t){return new Ks(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,s)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Ks)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=s.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const s=new Ks;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=r,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this.B_=new Ge(se.comparator)}track(t){const r=t.doc.key,s=this.B_.get(r);s?t.type!==0&&s.type===3?this.B_=this.B_.insert(r,t):t.type===3&&s.type!==1?this.B_=this.B_.insert(r,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.B_=this.B_.insert(r,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.B_=this.B_.insert(r,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.B_=this.B_.remove(r):t.type===1&&s.type===2?this.B_=this.B_.insert(r,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.B_=this.B_.insert(r,{type:2,doc:t.doc}):le():this.B_=this.B_.insert(r,t)}k_(){const t=[];return this.B_.inorderTraversal((r,s)=>{t.push(s)}),t}}class ii{constructor(t,r,s,i,o,a,c,l,u){this.query=t,this.docs=r,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,r,s,i,o){const a=[];return r.forEach(c=>{a.push({type:0,doc:c})}),new ii(t,r,Ks.emptySet(r),a,s,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Nl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,s=t.docChanges;if(r.length!==s.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==s[i].type||!r[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(t=>t.U_())}}class $O{constructor(){this.queries=new bi(t=>pw(t),Nl),this.onlineState="Unknown",this.W_=new Set}}async function jO(n,t){const r=me(n);let s=3;const i=t.query;let o=r.queries.get(i);o?!o.K_()&&t.U_()&&(s=2):(o=new BO,s=t.U_()?0:1);try{switch(s){case 0:o.q_=await r.onListen(i,!0);break;case 1:o.q_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const c=xd(a,`Initialization of query '${Rs(t.query)}' failed`);return void t.onError(c)}r.queries.set(i,o),o.Q_.push(t),t.G_(r.onlineState),o.q_&&t.z_(o.q_)&&Dd(r)}async function HO(n,t){const r=me(n),s=t.query;let i=3;const o=r.queries.get(s);if(o){const a=o.Q_.indexOf(t);a>=0&&(o.Q_.splice(a,1),o.Q_.length===0?i=t.U_()?0:1:!o.K_()&&t.U_()&&(i=2))}switch(i){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function qO(n,t){const r=me(n);let s=!1;for(const i of t){const o=i.query,a=r.queries.get(o);if(a){for(const c of a.Q_)c.z_(i)&&(s=!0);a.q_=i}}s&&Dd(r)}function WO(n,t,r){const s=me(n),i=s.queries.get(t);if(i)for(const o of i.Q_)o.onError(r);s.queries.delete(t)}function Dd(n){n.W_.forEach(t=>{t.next()})}var Hh,pg;(pg=Hh||(Hh={})).j_="default",pg.Cache="cache";class KO{constructor(t,r,s){this.query=t,this.H_=r,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=s||{}}z_(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new ii(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),r=!0):this.X_(t,this.onlineState)&&(this.ea(t),r=!0),this.Y_=t,r}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let r=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),r=!0),r}X_(t,r){if(!t.fromCache||!this.U_())return!0;const s=r!=="Offline";return(!this.options.ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Z_(t){if(t.docChanges.length>0)return!0;const r=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ea(t){t=ii.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==Hh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t){this.key=t}}class Qw{constructor(t){this.key=t}}class zO{constructor(t,r){this.query=t,this.ua=r,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Te(),this.mutatedKeys=Te(),this.ha=mw(t),this.Pa=new Ks(this.ha)}get Ia(){return this.ua}Ta(t,r){const s=r?r.Ea:new dg,i=r?r.Pa:this.Pa;let o=r?r.mutatedKeys:this.mutatedKeys,a=i,c=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((h,f)=>{const d=i.get(h),p=Vl(this.query,f)?f:null,g=!!d&&this.mutatedKeys.has(d.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;d&&p?d.data.isEqual(p.data)?g!==v&&(s.track({type:3,doc:p}),w=!0):this.da(d,p)||(s.track({type:2,doc:p}),w=!0,(l&&this.ha(p,l)>0||u&&this.ha(p,u)<0)&&(c=!0)):!d&&p?(s.track({type:0,doc:p}),w=!0):d&&!p&&(s.track({type:1,doc:d}),w=!0,(l||u)&&(c=!0)),w&&(p?(a=a.add(p),o=v?o.add(h):o.delete(h)):(a=a.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),s.track({type:1,doc:h})}return{Pa:a,Ea:s,Xi:c,mutatedKeys:o}}da(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,s,i){const o=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;const a=t.Ea.k_();a.sort((h,f)=>function(p,g){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return v(p)-v(g)}(h.type,f.type)||this.ha(h.doc,f.doc)),this.Aa(s),i=i!=null&&i;const c=r&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,u=l!==this.ca;return this.ca=l,a.length!==0||u?{snapshot:new ii(this.query,t.Pa,o,a,t.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),Va:c}:{Va:c}}G_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new dg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach(r=>this.ua=this.ua.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.ua=this.ua.delete(r)),this.current=t.current)}Ra(){if(!this.current)return[];const t=this.la;this.la=Te(),this.Pa.forEach(s=>{this.ma(s.key)&&(this.la=this.la.add(s.key))});const r=[];return t.forEach(s=>{this.la.has(s)||r.push(new Qw(s))}),this.la.forEach(s=>{t.has(s)||r.push(new Gw(s))}),r}fa(t){this.ua=t.hs,this.la=Te();const r=this.Ta(t.documents);return this.applyChanges(r,!0)}ga(){return ii.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class GO{constructor(t,r,s){this.query=t,this.targetId=r,this.view=s}}class QO{constructor(t){this.key=t,this.pa=!1}}class JO{constructor(t,r,s,i,o,a){this.localStore=t,this.remoteStore=r,this.eventManager=s,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.ya={},this.wa=new bi(c=>pw(c),Nl),this.Sa=new Map,this.ba=new Set,this.Da=new Ge(se.comparator),this.Ca=new Map,this.va=new Id,this.Fa={},this.Ma=new Map,this.xa=si.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function YO(n,t,r=!0){const s=t0(n);let i;const o=s.wa.get(t);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=await Jw(s,t,r,!0),i}async function XO(n,t){const r=t0(n);await Jw(r,t,!0,!1)}async function Jw(n,t,r,s){const i=await yO(n.localStore,In(t)),o=i.targetId,a=r?n.sharedClientState.addLocalQueryTarget(o):"not-current";let c;return s&&(c=await ZO(n,t,o,a==="current",i.resumeToken)),n.isPrimaryClient&&r&&jw(n.remoteStore,i),c}async function ZO(n,t,r,s,i){n.Na=(f,d,p)=>async function(v,w,C,T){let y=w.view.Ta(C);y.Xi&&(y=await lg(v.localStore,w.query,!1).then(({documents:k})=>w.view.Ta(k,y)));const E=T&&T.targetChanges.get(w.targetId),I=T&&T.targetMismatches.get(w.targetId)!=null,S=w.view.applyChanges(y,v.isPrimaryClient,E,I);return gg(v,w.targetId,S.Va),S.snapshot}(n,f,d,p);const o=await lg(n.localStore,t,!0),a=new zO(t,o.hs),c=a.Ta(o.documents),l=pa.createSynthesizedTargetChangeForCurrentChange(r,s&&n.onlineState!=="Offline",i),u=a.applyChanges(c,n.isPrimaryClient,l);gg(n,r,u.Va);const h=new GO(t,r,a);return n.wa.set(t,h),n.Sa.has(r)?n.Sa.get(r).push(t):n.Sa.set(r,[t]),u.snapshot}async function ex(n,t,r){const s=me(n),i=s.wa.get(t),o=s.Sa.get(i.targetId);if(o.length>1)return s.Sa.set(i.targetId,o.filter(a=>!Nl(a,t))),void s.wa.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await jh(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),r&&Rd(s.remoteStore,i.targetId),qh(s,i.targetId)}).catch(ua)):(qh(s,i.targetId),await jh(s.localStore,i.targetId,!0))}async function tx(n,t){const r=me(n),s=r.wa.get(t),i=r.Sa.get(s.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Rd(r.remoteStore,s.targetId))}async function nx(n,t,r){const s=lx(n);try{const i=await function(a,c){const l=me(a),u=ot.now(),h=c.reduce((p,g)=>p.add(g.key),Te());let f,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Yn(),v=Te();return l.os.getEntries(p,h).next(w=>{g=w,g.forEach((C,T)=>{T.isValidDocument()||(v=v.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(w=>{f=w;const C=[];for(const T of c){const y=bk(T,f.get(T.key).overlayedDocument);y!=null&&C.push(new Ur(T.key,y,iw(y.value.mapValue),An.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,C,c)}).next(w=>{d=w;const C=w.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(p,w.batchId,C)})}).then(()=>({batchId:d.batchId,changes:_w(f)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(a,c,l){let u=a.Fa[a.currentUser.toKey()];u||(u=new Ge(Ce)),u=u.insert(c,l),a.Fa[a.currentUser.toKey()]=u}(s,i.batchId,r),await ga(s,i.changes),await $l(s.remoteStore)}catch(i){const o=xd(i,"Failed to persist write");r.reject(o)}}async function Yw(n,t){const r=me(n);try{const s=await mO(r.localStore,t);t.targetChanges.forEach((i,o)=>{const a=r.Ca.get(o);a&&(Me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.pa=!0:i.modifiedDocuments.size>0?Me(a.pa):i.removedDocuments.size>0&&(Me(a.pa),a.pa=!1))}),await ga(r,s,t)}catch(s){await ua(s)}}function mg(n,t,r){const s=me(n);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const i=[];s.wa.forEach((o,a)=>{const c=a.view.G_(t);c.snapshot&&i.push(c.snapshot)}),function(a,c){const l=me(a);l.onlineState=c;let u=!1;l.queries.forEach((h,f)=>{for(const d of f.Q_)d.G_(c)&&(u=!0)}),u&&Dd(l)}(s.eventManager,t),i.length&&s.ya.u_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function rx(n,t,r){const s=me(n);s.sharedClientState.updateQueryState(t,"rejected",r);const i=s.Ca.get(t),o=i&&i.key;if(o){let a=new Ge(se.comparator);a=a.insert(o,bt.newNoDocument(o,de.min()));const c=Te().add(o),l=new Fl(de.min(),new Map,new Ge(Ce),a,c);await Yw(s,l),s.Da=s.Da.remove(o),s.Ca.delete(t),Nd(s)}else await jh(s.localStore,t,!1).then(()=>qh(s,t,r)).catch(ua)}async function sx(n,t){const r=me(n),s=t.batch.batchId;try{const i=await pO(r.localStore,t);Zw(r,s,null),Xw(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await ga(r,i)}catch(i){await ua(i)}}async function ix(n,t,r){const s=me(n);try{const i=await function(a,c){const l=me(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,c).next(f=>(Me(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(s.localStore,t);Zw(s,t,r),Xw(s,t),s.sharedClientState.updateMutationState(t,"rejected",r),await ga(s,i)}catch(i){await ua(i)}}function Xw(n,t){(n.Ma.get(t)||[]).forEach(r=>{r.resolve()}),n.Ma.delete(t)}function Zw(n,t,r){const s=me(n);let i=s.Fa[s.currentUser.toKey()];if(i){const o=i.get(t);o&&(r?o.reject(r):o.resolve(),i=i.remove(t)),s.Fa[s.currentUser.toKey()]=i}}function qh(n,t,r=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.Sa.get(t))n.wa.delete(s),r&&n.ya.La(s,r);n.Sa.delete(t),n.isPrimaryClient&&n.va.Vr(t).forEach(s=>{n.va.containsKey(s)||e0(n,s)})}function e0(n,t){n.ba.delete(t.path.canonicalString());const r=n.Da.get(t);r!==null&&(Rd(n.remoteStore,r),n.Da=n.Da.remove(t),n.Ca.delete(r),Nd(n))}function gg(n,t,r){for(const s of r)s instanceof Gw?(n.va.addReference(s.key,t),ox(n,s)):s instanceof Qw?(Y("SyncEngine","Document no longer in limbo: "+s.key),n.va.removeReference(s.key,t),n.va.containsKey(s.key)||e0(n,s.key)):le()}function ox(n,t){const r=t.key,s=r.path.canonicalString();n.Da.get(r)||n.ba.has(s)||(Y("SyncEngine","New document in limbo: "+r),n.ba.add(s),Nd(n))}function Nd(n){for(;n.ba.size>0&&n.Da.size<n.maxConcurrentLimboResolutions;){const t=n.ba.values().next().value;n.ba.delete(t);const r=new se(Ue.fromString(t)),s=n.xa.next();n.Ca.set(s,new QO(r)),n.Da=n.Da.insert(r,s),jw(n.remoteStore,new Er(In(fw(r.path)),s,"TargetPurposeLimboResolution",md._e))}}async function ga(n,t,r){const s=me(n),i=[],o=[],a=[];s.wa.isEmpty()||(s.wa.forEach((c,l)=>{a.push(s.Na(l,t,r).then(u=>{if((u||r)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const h=Sd.Ki(l.targetId,u);o.push(h)}}))}),await Promise.all(a),s.ya.u_(i),await async function(l,u){const h=me(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(u,d=>F.forEach(d.qi,p=>h.persistence.referenceDelegate.addReference(f,d.targetId,p)).next(()=>F.forEach(d.Qi,p=>h.persistence.referenceDelegate.removeReference(f,d.targetId,p)))))}catch(f){if(!ha(f))throw f;Y("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const d=f.targetId;if(!f.fromCache){const p=h.ns.get(d),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);h.ns=h.ns.insert(d,v)}}}(s.localStore,o))}async function ax(n,t){const r=me(n);if(!r.currentUser.isEqual(t)){Y("SyncEngine","User change. New user:",t.toKey());const s=await Fw(r.localStore,t);r.currentUser=t,function(o,a){o.Ma.forEach(c=>{c.forEach(l=>{l.reject(new Z(M.CANCELLED,a))})}),o.Ma.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await ga(r,s.us)}}function cx(n,t){const r=me(n),s=r.Ca.get(t);if(s&&s.pa)return Te().add(s.key);{let i=Te();const o=r.Sa.get(t);if(!o)return i;for(const a of o){const c=r.wa.get(a);i=i.unionWith(c.view.Ia)}return i}}function t0(n){const t=me(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rx.bind(null,t),t.ya.u_=qO.bind(null,t.eventManager),t.ya.La=WO.bind(null,t.eventManager),t}function lx(n){const t=me(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ix.bind(null,t),t}class _g{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Ul(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return dO(this.persistence,new hO,t.initialUser,this.serializer)}createPersistence(t){return new cO(Ad.Hr,this.serializer)}createSharedClientState(t){return new EO}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ux{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>mg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ax.bind(null,this.syncEngine),await UO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new $O}()}createDatastore(t){const r=Ul(t.databaseInfo.databaseId),s=function(o){return new IO(o)}(t.databaseInfo);return function(o,a,c,l){return new RO(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,s,r)}createRemoteStore(t){return function(s,i,o,a,c){return new PO(s,i,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>mg(this.syncEngine,r,0),function(){return hg.D()?new hg:new wO}())}createSyncEngine(t,r){return function(i,o,a,c,l,u,h){const f=new JO(i,o,a,c,l,u);return h&&(f.Oa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t;await async function(s){const i=me(s);Y("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await ma(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):Pn("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,r){this.muted||setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t,r,s,i){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=i,this.user=Tt.UNAUTHENTICATED,this.clientId=nw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async o=>{Y("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(Y("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=xd(r,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function ku(n,t){n.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const r=n.configuration;await t.initialize(r);let s=r.initialUser;n.setCredentialChangeListener(async i=>{s.isEqual(i)||(await Fw(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function yg(n,t){n.asyncQueue.verifyOperationInProgress();const r=await px(n);Y("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,n.configuration),n.setCredentialChangeListener(s=>fg(t.remoteStore,s)),n.setAppCheckTokenChangeListener((s,i)=>fg(t.remoteStore,i)),n._onlineComponents=t}function dx(n){return n.name==="FirebaseError"?n.code===M.FAILED_PRECONDITION||n.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function px(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await ku(n,n._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!dx(r))throw r;ei("Error using user provided cache. Falling back to memory cache: "+r),await ku(n,new _g)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await ku(n,new _g);return n._offlineComponents}async function n0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await yg(n,n._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await yg(n,new ux))),n._onlineComponents}function mx(n){return n0(n).then(t=>t.syncEngine)}async function gx(n){const t=await n0(n),r=t.eventManager;return r.onListen=YO.bind(null,t.syncEngine),r.onUnlisten=ex.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=XO.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=tx.bind(null,t.syncEngine),r}function _x(n,t,r={}){const s=new Wn;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,c,l,u){const h=new hx({next:d=>{a.enqueueAndForget(()=>HO(o,f)),d.fromCache&&l.source==="server"?u.reject(new Z(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),f=new KO(c,h,{includeMetadataChanges:!0,ta:!0});return jO(o,f)}(await gx(n),n.asyncQueue,t,r,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(n,t,r){if(!r)throw new Z(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function yx(n,t,r,s){if(t===!0&&s===!0)throw new Z(M.INVALID_ARGUMENT,`${n} and ${r} cannot be used together.`)}function Eg(n){if(!se.isDocumentKey(n))throw new Z(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wg(n){if(se.isDocumentKey(n))throw new Z(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":le()}function oi(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Z(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=jl(n);throw new Z(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t){var r,s;if(t.host===void 0){if(t.ssl!==void 0)throw new Z(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Z(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}yx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r0((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Hl{constructor(t,r,s,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Z(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Z(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tg(t),t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new x1;switch(s.type){case"firstParty":return new L1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Z(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=vg.get(r);s&&(Y("ComponentProvider","Removing Datastore"),vg.delete(r),s.terminate())}(this),Promise.resolve()}}function vx(n,t,r,s={}){var i;const o=(n=oi(n,Hl))._getSettings(),a=`${t}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),s.mockUserToken){let c,l;if(typeof s.mockUserToken=="string")c=s.mockUserToken,l=Tt.MOCK_USER;else{c=HA(s.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const u=s.mockUserToken.sub||s.mockUserToken.user_id;if(!u)throw new Z(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tt(u)}n._authCredentials=new D1(new tw(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Ai(this.firestore,t,this._query)}}class zt{constructor(t,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new zt(this.firestore,t,this._key)}}class Ar extends Ai{constructor(t,r,s){super(t,r,fw(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new zt(this.firestore,null,new se(t))}withConverter(t){return new Ar(this.firestore,t,this._path)}}function i0(n,t,...r){if(n=ut(n),s0("collection","path",t),n instanceof Hl){const s=Ue.fromString(t,...r);return wg(s),new Ar(n,null,s)}{if(!(n instanceof zt||n instanceof Ar))throw new Z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ue.fromString(t,...r));return wg(s),new Ar(n.firestore,null,s)}}function rc(n,t,...r){if(n=ut(n),arguments.length===1&&(t=nw.newId()),s0("doc","path",t),n instanceof Hl){const s=Ue.fromString(t,...r);return Eg(s),new zt(n,null,new se(s))}{if(!(n instanceof zt||n instanceof Ar))throw new Z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ue.fromString(t,...r));return Eg(s),new zt(n.firestore,n instanceof Ar?n.converter:null,new se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Bw(this,"async_queue_retry"),this.cu=()=>{const r=Pu();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.jo.Ko()};const t=Pu();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;const r=Pu();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise(()=>{});const r=new Wn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ru.push(t),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!ha(t))throw t;Y("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(t){const r=this.nu.then(()=>(this._u=!0,t().catch(s=>{this.ou=s,this._u=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(s);throw Pn("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this._u=!1,s))));return this.nu=r,r}enqueueAfterDelay(t,r,s){this.lu(),this.uu.indexOf(t)>-1&&(r=0);const i=Od.createAndSchedule(this,t,r,s,o=>this.Iu(o));return this.su.push(i),i}lu(){this.ou&&le()}verifyOperationInProgress(){}async Tu(){let t;do t=this.nu,await t;while(t!==this.nu)}Eu(t){for(const r of this.su)if(r.timerId===t)return!0;return!1}du(t){return this.Tu().then(()=>{this.su.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.su)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tu()})}Au(t){this.uu.push(t)}Iu(t){const r=this.su.indexOf(t);this.su.splice(r,1)}}class ql extends Hl{constructor(t,r,s,i){super(t,r,s,i),this.type="firestore",this._queue=function(){return new Ex}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||a0(this),this._firestoreClient.terminate()}}function Vd(n,t){const r=typeof n=="object"?n:gv(),s=typeof n=="string"?n:t||"(default)",i=Nf(r,"firestore").getImmediate({identifier:s});if(!i._initialized){const o=$A("firestore");o&&vx(i,...o)}return i}function o0(n){return n._firestoreClient||a0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function a0(n){var t,r,s;const i=n._freezeSettings(),o=function(c,l,u,h){return new J1(c,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,r0(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new fx(n._authCredentials,n._appCheckCredentials,n._queue,o),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ai(Ct.fromBase64String(t))}catch(r){throw new Z(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new ai(Ct.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Z(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Z(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Z(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ce(this._lat,t._lat)||Ce(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=/^__.*__$/;class Tx{constructor(t,r,s){this.data=t,this.fieldMask=r,this.fieldTransforms=s}toMutation(t,r){return this.fieldMask!==null?new Ur(t,this.data,this.fieldMask,r,this.fieldTransforms):new da(t,this.data,r,this.fieldTransforms)}}class c0{constructor(t,r,s){this.data=t,this.fieldMask=r,this.fieldTransforms=s}toMutation(t,r){return new Ur(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function l0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Fd{constructor(t,r,s,i,o,a){this.settings=t,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=i,o===void 0&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new Fd(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.mu({path:s,gu:!1});return i.pu(t),i}yu(t){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.mu({path:s,gu:!1});return i.Ru(),i}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return Hc(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(t.length===0)throw this.Su("Document fields must not be empty");if(l0(this.Vu)&&wx.test(t))throw this.Su('Document fields cannot begin and end with "__"')}}class bx{constructor(t,r,s){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=s||Ul(t)}Cu(t,r,s,i=!1){return new Fd({Vu:t,methodName:r,Du:s,path:yt.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ud(n){const t=n._freezeSettings(),r=Ul(n._databaseId);return new bx(n._databaseId,!!t.ignoreUndefinedProperties,r)}function Ix(n,t,r,s,i,o={}){const a=n.Cu(o.merge||o.mergeFields?2:0,t,r,i);Bd("Data must be an object, but it was:",a,s);const c=u0(s,a);let l,u;if(o.merge)l=new qt(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const h=[];for(const f of o.mergeFields){const d=Wh(t,f,r);if(!a.contains(d))throw new Z(M.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);f0(h,d)||h.push(d)}l=new qt(h),u=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=a.fieldTransforms;return new Tx(new Vt(c),l,u)}class Kl extends Ld{_toFieldTransform(t){if(t.Vu!==2)throw t.Vu===1?t.Su(`${this._methodName}() can only appear at the top level of your update data`):t.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Kl}}function Ax(n,t,r,s){const i=n.Cu(1,t,r);Bd("Data must be an object, but it was:",i,s);const o=[],a=Vt.empty();ws(s,(l,u)=>{const h=$d(t,l,r);u=ut(u);const f=i.yu(h);if(u instanceof Kl)o.push(h);else{const d=_a(u,f);d!=null&&(o.push(h),a.set(h,d))}});const c=new qt(o);return new c0(a,c,i.fieldTransforms)}function Sx(n,t,r,s,i,o){const a=n.Cu(1,t,r),c=[Wh(t,s,r)],l=[i];if(o.length%2!=0)throw new Z(M.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)c.push(Wh(t,o[d])),l.push(o[d+1]);const u=[],h=Vt.empty();for(let d=c.length-1;d>=0;--d)if(!f0(u,c[d])){const p=c[d];let g=l[d];g=ut(g);const v=a.yu(p);if(g instanceof Kl)u.push(p);else{const w=_a(g,v);w!=null&&(u.push(p),h.set(p,w))}}const f=new qt(u);return new c0(h,f,a.fieldTransforms)}function Rx(n,t,r,s=!1){return _a(r,n.Cu(s?4:3,t))}function _a(n,t){if(h0(n=ut(n)))return Bd("Unsupported field value:",t,n),u0(n,t);if(n instanceof Ld)return function(s,i){if(!l0(i.Vu))throw i.Su(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.gu&&t.Vu!==4)throw t.Su("Nested arrays are not supported");return function(s,i){const o=[];let a=0;for(const c of s){let l=_a(c,i.wu(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}}(n,t)}return function(s,i){if((s=ut(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return _k(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=ot.fromDate(s);return{timestampValue:$c(i.serializer,o)}}if(s instanceof ot){const o=new ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$c(i.serializer,o)}}if(s instanceof Md)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ai)return{bytesValue:Ow(i.serializer,s._byteString)};if(s instanceof zt){const o=i.databaseId,a=s.firestore._databaseId;if(!a.isEqual(o))throw i.Su(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:bd(s.firestore._databaseId||i.databaseId,s._key.path)}}throw i.Su(`Unsupported field value: ${jl(s)}`)}(n,t)}function u0(n,t){const r={};return rw(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ws(n,(s,i)=>{const o=_a(i,t.fu(s));o!=null&&(r[s]=o)}),{mapValue:{fields:r}}}function h0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof Md||n instanceof ai||n instanceof zt||n instanceof Ld)}function Bd(n,t,r){if(!h0(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const s=jl(r);throw s==="an object"?t.Su(n+" a custom object"):t.Su(n+" "+s)}}function Wh(n,t,r){if((t=ut(t))instanceof Wl)return t._internalPath;if(typeof t=="string")return $d(n,t);throw Hc("Field path arguments must be of type string or ",n,!1,void 0,r)}const Cx=new RegExp("[~\\*/\\[\\]]");function $d(n,t,r){if(t.search(Cx)>=0)throw Hc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,r);try{return new Wl(...t.split("."))._internalPath}catch{throw Hc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,r)}}function Hc(n,t,r,s,i){const o=s&&!s.isEmpty(),a=i!==void 0;let c=`Function ${t}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${s}`),a&&(l+=` in document ${i}`),l+=")"),new Z(M.INVALID_ARGUMENT,c+n+l)}function f0(n,t){return n.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t,r,s,i,o){this._firestore=t,this._userDataWriter=r,this._key=s,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Px(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(jd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Px extends d0{data(){return super.data()}}function jd(n,t){return typeof t=="string"?$d(n,t):t instanceof Wl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Z(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hd{}class Ox extends Hd{}function xx(n,t,...r){let s=[];t instanceof Hd&&s.push(t),s=s.concat(r),function(o){const a=o.filter(l=>l instanceof qd).length,c=o.filter(l=>l instanceof zl).length;if(a>1||a>0&&c>0)throw new Z(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)n=i._apply(n);return n}class zl extends Ox{constructor(t,r,s){super(),this._field=t,this._op=r,this._value=s,this.type="where"}static _create(t,r,s){return new zl(t,r,s)}_apply(t){const r=this._parse(t);return p0(t._query,r),new Ai(t.firestore,t.converter,Lh(t._query,r))}_parse(t){const r=Ud(t.firestore);return function(o,a,c,l,u,h,f){let d;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ig(f,h);const p=[];for(const g of f)p.push(bg(l,o,g));d={arrayValue:{values:p}}}else d=bg(l,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ig(f,h),d=Rx(c,a,f,h==="in"||h==="not-in");return tt.create(u,h,d)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Dx(n,t,r){const s=t,i=jd("where",n);return zl._create(i,s,r)}class qd extends Hd{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new qd(t,r)}_parse(t){const r=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return r.length===1?r[0]:ln.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(i,o){let a=i;const c=o.getFlattenedFilters();for(const l of c)p0(a,l),a=Lh(a,l)}(t._query,r),new Ai(t.firestore,t.converter,Lh(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function bg(n,t,r){if(typeof(r=ut(r))=="string"){if(r==="")throw new Z(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dw(t)&&r.indexOf("/")!==-1)throw new Z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=t.path.child(Ue.fromString(r));if(!se.isDocumentKey(s))throw new Z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Km(n,new se(s))}if(r instanceof zt)return Km(n,r._key);throw new Z(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jl(r)}.`)}function Ig(n,t){if(!Array.isArray(n)||n.length===0)throw new Z(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function p0(n,t){const r=function(i,o){for(const a of i)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Z(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Z(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Nx{convertValue(t,r="none"){switch(ps(t)){case 0:return null;case 1:return t.booleanValue;case 2:return et(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(ds(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 10:return this.convertObject(t.mapValue,r);default:throw le()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const s={};return ws(t,(i,o)=>{s[i]=this.convertValue(o,r)}),s}convertGeoPoint(t){return new Md(et(t.latitude),et(t.longitude))}convertArray(t,r){return(t.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(t,r){switch(r){case"previous":const s=_d(t);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(xo(t));default:return null}}convertTimestamp(t){const r=Or(t);return new ot(r.seconds,r.nanos)}convertDocumentKey(t,r){const s=Ue.fromString(t);Me(Mw(s));const i=new Do(s.get(1),s.get(3)),o=new se(s.popFirst(5));return i.isEqual(r)||Pn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(n,t,r){let s;return s=n?r&&(r.merge||r.mergeFields)?n.toFirestore(t,r):n.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Lx extends d0{constructor(t,r,s,i,o,a){super(t,r,s,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const s=this._document.data.field(jd("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class sc extends Lx{data(t={}){return super.data(t)}}class Mx{constructor(t,r,s,i){this._firestore=t,this._userDataWriter=r,this._snapshot=i,this.metadata=new qa(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(s=>{t.call(r,new sc(this._firestore,this._userDataWriter,s.key,s,new qa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Z(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const l=new sc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new qa(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const l=new sc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new qa(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return c.type!==0&&(u=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),h=a.indexOf(c.doc.key)),{type:Fx(c.type),doc:l,oldIndex:u,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Fx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}class Ux extends Nx{constructor(t){super(),this.firestore=t}convertBytes(t){return new ai(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new zt(this.firestore,null,r)}}function Bx(n){n=oi(n,Ai);const t=oi(n.firestore,ql),r=o0(t),s=new Ux(t);return kx(n._query),_x(r,n._query).then(i=>new Mx(t,s,n,i))}function Ou(n,t,r,...s){n=oi(n,zt);const i=oi(n.firestore,ql),o=Ud(i);let a;return a=typeof(t=ut(t))=="string"||t instanceof Wl?Sx(o,"updateDoc",n._key,t,r,s):Ax(o,"updateDoc",n._key,t),m0(i,[a.toMutation(n._key,An.exists(!0))])}function $x(n,t){const r=oi(n.firestore,ql),s=rc(n),i=Vx(n.converter,t);return m0(r,[Ix(Ud(n.firestore),"addDoc",s._key,i,n.converter!==null,{}).toMutation(s._key,An.exists(!1))]).then(()=>s)}function m0(n,t){return function(s,i){const o=new Wn;return s.asyncQueue.enqueueAndForget(async()=>nx(await mx(s),i,o)),o.promise}(o0(n),t)}(function(t,r=!0){(function(i){Ti=i})(yi),Xs(new as("firestore",(s,{instanceIdentifier:i,options:o})=>{const a=s.getProvider("app").getImmediate(),c=new ql(new N1(s.getProvider("auth-internal")),new F1(s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Z(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(u.options.projectId,h)}(a,i),a);return o=Object.assign({useFetchStreams:r},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ir($m,"4.6.0",t),Ir($m,"4.6.0","esm2017")})();const Si=DA("memberStores",()=>{const n=_e(""),t=_e(""),r=_e(!1),s=_e({});async function i(o){try{const a=Vd(ls),c=await Bx(xx(i0(a,"fireBaseData"),Dx("email","==",o))),l=[];return c.forEach(u=>{l.push({id:u.id,...u.data()})}),l}catch(a){console.error("資料引用錯誤",a)}}return{memberId:n,memberEmail:t,isUserLoggedIn:r,fetchUserData:i,exchangeRates:s}});function g0(n,t){return function(){return n.apply(t,arguments)}}const{toString:jx}=Object.prototype,{getPrototypeOf:Wd}=Object,Gl=(n=>t=>{const r=jx.call(t);return n[r]||(n[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Dn=n=>(n=n.toLowerCase(),t=>Gl(t)===n),Ql=n=>t=>typeof t===n,{isArray:Ri}=Array,Mo=Ql("undefined");function Hx(n){return n!==null&&!Mo(n)&&n.constructor!==null&&!Mo(n.constructor)&&Zt(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const _0=Dn("ArrayBuffer");function qx(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&_0(n.buffer),t}const Wx=Ql("string"),Zt=Ql("function"),y0=Ql("number"),Jl=n=>n!==null&&typeof n=="object",Kx=n=>n===!0||n===!1,ic=n=>{if(Gl(n)!=="object")return!1;const t=Wd(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},zx=Dn("Date"),Gx=Dn("File"),Qx=Dn("Blob"),Jx=Dn("FileList"),Yx=n=>Jl(n)&&Zt(n.pipe),Xx=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Zt(n.append)&&((t=Gl(n))==="formdata"||t==="object"&&Zt(n.toString)&&n.toString()==="[object FormData]"))},Zx=Dn("URLSearchParams"),eD=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ya(n,t,{allOwnKeys:r=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),Ri(n))for(s=0,i=n.length;s<i;s++)t.call(null,n[s],s,n);else{const o=r?Object.getOwnPropertyNames(n):Object.keys(n),a=o.length;let c;for(s=0;s<a;s++)c=o[s],t.call(null,n[c],c,n)}}function v0(n,t){t=t.toLowerCase();const r=Object.keys(n);let s=r.length,i;for(;s-- >0;)if(i=r[s],t===i.toLowerCase())return i;return null}const E0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,w0=n=>!Mo(n)&&n!==E0;function Kh(){const{caseless:n}=w0(this)&&this||{},t={},r=(s,i)=>{const o=n&&v0(t,i)||i;ic(t[o])&&ic(s)?t[o]=Kh(t[o],s):ic(s)?t[o]=Kh({},s):Ri(s)?t[o]=s.slice():t[o]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&ya(arguments[s],r);return t}const tD=(n,t,r,{allOwnKeys:s}={})=>(ya(t,(i,o)=>{r&&Zt(i)?n[o]=g0(i,r):n[o]=i},{allOwnKeys:s}),n),nD=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),rD=(n,t,r,s)=>{n.prototype=Object.create(t.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),r&&Object.assign(n.prototype,r)},sD=(n,t,r,s)=>{let i,o,a;const c={};if(t=t||{},n==null)return t;do{for(i=Object.getOwnPropertyNames(n),o=i.length;o-- >0;)a=i[o],(!s||s(a,n,t))&&!c[a]&&(t[a]=n[a],c[a]=!0);n=r!==!1&&Wd(n)}while(n&&(!r||r(n,t))&&n!==Object.prototype);return t},iD=(n,t,r)=>{n=String(n),(r===void 0||r>n.length)&&(r=n.length),r-=t.length;const s=n.indexOf(t,r);return s!==-1&&s===r},oD=n=>{if(!n)return null;if(Ri(n))return n;let t=n.length;if(!y0(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=n[t];return r},aD=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&Wd(Uint8Array)),cD=(n,t)=>{const s=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=s.next())&&!i.done;){const o=i.value;t.call(n,o[0],o[1])}},lD=(n,t)=>{let r;const s=[];for(;(r=n.exec(t))!==null;)s.push(r);return s},uD=Dn("HTMLFormElement"),hD=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,i){return s.toUpperCase()+i}),Ag=(({hasOwnProperty:n})=>(t,r)=>n.call(t,r))(Object.prototype),fD=Dn("RegExp"),T0=(n,t)=>{const r=Object.getOwnPropertyDescriptors(n),s={};ya(r,(i,o)=>{let a;(a=t(i,o,n))!==!1&&(s[o]=a||i)}),Object.defineProperties(n,s)},dD=n=>{T0(n,(t,r)=>{if(Zt(n)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=n[r];if(Zt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},pD=(n,t)=>{const r={},s=i=>{i.forEach(o=>{r[o]=!0})};return Ri(n)?s(n):s(String(n).split(t)),r},mD=()=>{},gD=(n,t)=>(n=+n,Number.isFinite(n)?n:t),xu="abcdefghijklmnopqrstuvwxyz",Sg="0123456789",b0={DIGIT:Sg,ALPHA:xu,ALPHA_DIGIT:xu+xu.toUpperCase()+Sg},_D=(n=16,t=b0.ALPHA_DIGIT)=>{let r="";const{length:s}=t;for(;n--;)r+=t[Math.random()*s|0];return r};function yD(n){return!!(n&&Zt(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const vD=n=>{const t=new Array(10),r=(s,i)=>{if(Jl(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[i]=s;const o=Ri(s)?[]:{};return ya(s,(a,c)=>{const l=r(a,i+1);!Mo(l)&&(o[c]=l)}),t[i]=void 0,o}}return s};return r(n,0)},ED=Dn("AsyncFunction"),wD=n=>n&&(Jl(n)||Zt(n))&&Zt(n.then)&&Zt(n.catch),L={isArray:Ri,isArrayBuffer:_0,isBuffer:Hx,isFormData:Xx,isArrayBufferView:qx,isString:Wx,isNumber:y0,isBoolean:Kx,isObject:Jl,isPlainObject:ic,isUndefined:Mo,isDate:zx,isFile:Gx,isBlob:Qx,isRegExp:fD,isFunction:Zt,isStream:Yx,isURLSearchParams:Zx,isTypedArray:aD,isFileList:Jx,forEach:ya,merge:Kh,extend:tD,trim:eD,stripBOM:nD,inherits:rD,toFlatObject:sD,kindOf:Gl,kindOfTest:Dn,endsWith:iD,toArray:oD,forEachEntry:cD,matchAll:lD,isHTMLForm:uD,hasOwnProperty:Ag,hasOwnProp:Ag,reduceDescriptors:T0,freezeMethods:dD,toObjectSet:pD,toCamelCase:hD,noop:mD,toFiniteNumber:gD,findKey:v0,global:E0,isContextDefined:w0,ALPHABET:b0,generateString:_D,isSpecCompliantForm:yD,toJSONObject:vD,isAsyncFn:ED,isThenable:wD};function Ae(n,t,r,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),i&&(this.response=i)}L.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const I0=Ae.prototype,A0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{A0[n]={value:n}});Object.defineProperties(Ae,A0);Object.defineProperty(I0,"isAxiosError",{value:!0});Ae.from=(n,t,r,s,i,o)=>{const a=Object.create(I0);return L.toFlatObject(n,a,function(l){return l!==Error.prototype},c=>c!=="isAxiosError"),Ae.call(a,n.message,t,r,s,i),a.cause=n,a.name=n.name,o&&Object.assign(a,o),a};const TD=null;function zh(n){return L.isPlainObject(n)||L.isArray(n)}function S0(n){return L.endsWith(n,"[]")?n.slice(0,-2):n}function Rg(n,t,r){return n?n.concat(t).map(function(i,o){return i=S0(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function bD(n){return L.isArray(n)&&!n.some(zh)}const ID=L.toFlatObject(L,{},null,function(t){return/^is[A-Z]/.test(t)});function Yl(n,t,r){if(!L.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,r=L.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,w){return!L.isUndefined(w[v])});const s=r.metaTokens,i=r.visitor||h,o=r.dots,a=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(t);if(!L.isFunction(i))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(L.isDate(g))return g.toISOString();if(!l&&L.isBlob(g))throw new Ae("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(g)||L.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function h(g,v,w){let C=g;if(g&&!w&&typeof g=="object"){if(L.endsWith(v,"{}"))v=s?v:v.slice(0,-2),g=JSON.stringify(g);else if(L.isArray(g)&&bD(g)||(L.isFileList(g)||L.endsWith(v,"[]"))&&(C=L.toArray(g)))return v=S0(v),C.forEach(function(y,E){!(L.isUndefined(y)||y===null)&&t.append(a===!0?Rg([v],E,o):a===null?v:v+"[]",u(y))}),!1}return zh(g)?!0:(t.append(Rg(w,v,o),u(g)),!1)}const f=[],d=Object.assign(ID,{defaultVisitor:h,convertValue:u,isVisitable:zh});function p(g,v){if(!L.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(g),L.forEach(g,function(C,T){(!(L.isUndefined(C)||C===null)&&i.call(t,C,L.isString(T)?T.trim():T,v,d))===!0&&p(C,v?v.concat(T):[T])}),f.pop()}}if(!L.isObject(n))throw new TypeError("data must be an object");return p(n),t}function Cg(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Kd(n,t){this._pairs=[],n&&Yl(n,this,t)}const R0=Kd.prototype;R0.append=function(t,r){this._pairs.push([t,r])};R0.toString=function(t){const r=t?function(s){return t.call(this,s,Cg)}:Cg;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function AD(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function C0(n,t,r){if(!t)return n;const s=r&&r.encode||AD,i=r&&r.serialize;let o;if(i?o=i(t,r):o=L.isURLSearchParams(t)?t.toString():new Kd(t,r).toString(s),o){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class Pg{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){L.forEach(this.handlers,function(s){s!==null&&t(s)})}}const P0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},SD=typeof URLSearchParams<"u"?URLSearchParams:Kd,RD=typeof FormData<"u"?FormData:null,CD=typeof Blob<"u"?Blob:null,PD={isBrowser:!0,classes:{URLSearchParams:SD,FormData:RD,Blob:CD},protocols:["http","https","file","blob","url","data"]},k0=typeof window<"u"&&typeof document<"u",kD=(n=>k0&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),OD=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:k0,hasStandardBrowserEnv:kD,hasStandardBrowserWebWorkerEnv:OD},Symbol.toStringTag,{value:"Module"})),wn={...xD,...PD};function DD(n,t){return Yl(n,new wn.classes.URLSearchParams,Object.assign({visitor:function(r,s,i,o){return wn.isNode&&L.isBuffer(r)?(this.append(s,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function ND(n){return L.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function VD(n){const t={},r=Object.keys(n);let s;const i=r.length;let o;for(s=0;s<i;s++)o=r[s],t[o]=n[o];return t}function O0(n){function t(r,s,i,o){let a=r[o++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),l=o>=r.length;return a=!a&&L.isArray(i)?i.length:a,l?(L.hasOwnProp(i,a)?i[a]=[i[a],s]:i[a]=s,!c):((!i[a]||!L.isObject(i[a]))&&(i[a]=[]),t(r,s,i[a],o)&&L.isArray(i[a])&&(i[a]=VD(i[a])),!c)}if(L.isFormData(n)&&L.isFunction(n.entries)){const r={};return L.forEachEntry(n,(s,i)=>{t(ND(s),i,r,0)}),r}return null}function LD(n,t,r){if(L.isString(n))try{return(t||JSON.parse)(n),L.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(n)}const zd={transitional:P0,adapter:["xhr","http"],transformRequest:[function(t,r){const s=r.getContentType()||"",i=s.indexOf("application/json")>-1,o=L.isObject(t);if(o&&L.isHTMLForm(t)&&(t=new FormData(t)),L.isFormData(t))return i?JSON.stringify(O0(t)):t;if(L.isArrayBuffer(t)||L.isBuffer(t)||L.isStream(t)||L.isFile(t)||L.isBlob(t))return t;if(L.isArrayBufferView(t))return t.buffer;if(L.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return DD(t,this.formSerializer).toString();if((c=L.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Yl(c?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),LD(t)):t}],transformResponse:[function(t){const r=this.transitional||zd.transitional,s=r&&r.forcedJSONParsing,i=this.responseType==="json";if(t&&L.isString(t)&&(s&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(c){if(a)throw c.name==="SyntaxError"?Ae.from(c,Ae.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wn.classes.FormData,Blob:wn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],n=>{zd.headers[n]={}});const Gd=zd,MD=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FD=n=>{const t={};let r,s,i;return n&&n.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),s=a.substring(i+1).trim(),!(!r||t[r]&&MD[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},kg=Symbol("internals");function Ni(n){return n&&String(n).trim().toLowerCase()}function oc(n){return n===!1||n==null?n:L.isArray(n)?n.map(oc):String(n)}function UD(n){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(n);)t[s[1]]=s[2];return t}const BD=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Du(n,t,r,s,i){if(L.isFunction(s))return s.call(this,t,r);if(i&&(t=r),!!L.isString(t)){if(L.isString(s))return t.indexOf(s)!==-1;if(L.isRegExp(s))return s.test(t)}}function $D(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function jD(n,t){const r=L.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+r,{value:function(i,o,a){return this[s].call(this,t,i,o,a)},configurable:!0})})}class Xl{constructor(t){t&&this.set(t)}set(t,r,s){const i=this;function o(c,l,u){const h=Ni(l);if(!h)throw new Error("header name must be a non-empty string");const f=L.findKey(i,h);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||l]=oc(c))}const a=(c,l)=>L.forEach(c,(u,h)=>o(u,h,l));return L.isPlainObject(t)||t instanceof this.constructor?a(t,r):L.isString(t)&&(t=t.trim())&&!BD(t)?a(FD(t),r):t!=null&&o(r,t,s),this}get(t,r){if(t=Ni(t),t){const s=L.findKey(this,t);if(s){const i=this[s];if(!r)return i;if(r===!0)return UD(i);if(L.isFunction(r))return r.call(this,i,s);if(L.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ni(t),t){const s=L.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Du(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let i=!1;function o(a){if(a=Ni(a),a){const c=L.findKey(s,a);c&&(!r||Du(s,s[c],c,r))&&(delete s[c],i=!0)}}return L.isArray(t)?t.forEach(o):o(t),i}clear(t){const r=Object.keys(this);let s=r.length,i=!1;for(;s--;){const o=r[s];(!t||Du(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const r=this,s={};return L.forEach(this,(i,o)=>{const a=L.findKey(s,o);if(a){r[a]=oc(i),delete r[o];return}const c=t?$D(o):String(o).trim();c!==o&&delete r[o],r[c]=oc(i),s[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return L.forEach(this,(s,i)=>{s!=null&&s!==!1&&(r[i]=t&&L.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[kg]=this[kg]={accessors:{}}).accessors,i=this.prototype;function o(a){const c=Ni(a);s[c]||(jD(i,a),s[c]=!0)}return L.isArray(t)?t.forEach(o):o(t),this}}Xl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(Xl.prototype,({value:n},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(s){this[r]=s}}});L.freezeMethods(Xl);const Kn=Xl;function Nu(n,t){const r=this||Gd,s=t||r,i=Kn.from(s.headers);let o=s.data;return L.forEach(n,function(c){o=c.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function x0(n){return!!(n&&n.__CANCEL__)}function va(n,t,r){Ae.call(this,n??"canceled",Ae.ERR_CANCELED,t,r),this.name="CanceledError"}L.inherits(va,Ae,{__CANCEL__:!0});function HD(n,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?n(r):t(new Ae("Request failed with status code "+r.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const qD=wn.hasStandardBrowserEnv?{write(n,t,r,s,i,o){const a=[n+"="+encodeURIComponent(t)];L.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),L.isString(s)&&a.push("path="+s),L.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function WD(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function KD(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function D0(n,t){return n&&!WD(t)?KD(n,t):t}const zD=wn.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let s;function i(o){let a=o;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=i(window.location.href),function(a){const c=L.isString(a)?i(a):a;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}();function GD(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function QD(n,t){n=n||10;const r=new Array(n),s=new Array(n);let i=0,o=0,a;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),h=s[o];a||(a=u),r[i]=l,s[i]=u;let f=o,d=0;for(;f!==i;)d+=r[f++],f=f%n;if(i=(i+1)%n,i===o&&(o=(o+1)%n),u-a<t)return;const p=h&&u-h;return p?Math.round(d*1e3/p):void 0}}function Og(n,t){let r=0;const s=QD(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,c=o-r,l=s(c),u=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:i};h[t?"download":"upload"]=!0,n(h)}}const JD=typeof XMLHttpRequest<"u",YD=JD&&function(n){return new Promise(function(r,s){let i=n.data;const o=Kn.from(n.headers).normalize();let{responseType:a,withXSRFToken:c}=n,l;function u(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let h;if(L.isFormData(i)){if(wn.hasStandardBrowserEnv||wn.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((h=o.getContentType())!==!1){const[v,...w]=h?h.split(";").map(C=>C.trim()).filter(Boolean):[];o.setContentType([v||"multipart/form-data",...w].join("; "))}}let f=new XMLHttpRequest;if(n.auth){const v=n.auth.username||"",w=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";o.set("Authorization","Basic "+btoa(v+":"+w))}const d=D0(n.baseURL,n.url);f.open(n.method.toUpperCase(),C0(d,n.params,n.paramsSerializer),!0),f.timeout=n.timeout;function p(){if(!f)return;const v=Kn.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),C={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:v,config:n,request:f};HD(function(y){r(y),u()},function(y){s(y),u()},C),f=null}if("onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(p)},f.onabort=function(){f&&(s(new Ae("Request aborted",Ae.ECONNABORTED,n,f)),f=null)},f.onerror=function(){s(new Ae("Network Error",Ae.ERR_NETWORK,n,f)),f=null},f.ontimeout=function(){let w=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const C=n.transitional||P0;n.timeoutErrorMessage&&(w=n.timeoutErrorMessage),s(new Ae(w,C.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,n,f)),f=null},wn.hasStandardBrowserEnv&&(c&&L.isFunction(c)&&(c=c(n)),c||c!==!1&&zD(d))){const v=n.xsrfHeaderName&&n.xsrfCookieName&&qD.read(n.xsrfCookieName);v&&o.set(n.xsrfHeaderName,v)}i===void 0&&o.setContentType(null),"setRequestHeader"in f&&L.forEach(o.toJSON(),function(w,C){f.setRequestHeader(C,w)}),L.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),a&&a!=="json"&&(f.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&f.addEventListener("progress",Og(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",Og(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=v=>{f&&(s(!v||v.type?new va(null,n,f):v),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const g=GD(d);if(g&&wn.protocols.indexOf(g)===-1){s(new Ae("Unsupported protocol "+g+":",Ae.ERR_BAD_REQUEST,n));return}f.send(i||null)})},Gh={http:TD,xhr:YD};L.forEach(Gh,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const xg=n=>`- ${n}`,XD=n=>L.isFunction(n)||n===null||n===!1,N0={getAdapter:n=>{n=L.isArray(n)?n:[n];const{length:t}=n;let r,s;const i={};for(let o=0;o<t;o++){r=n[o];let a;if(s=r,!XD(r)&&(s=Gh[(a=String(r)).toLowerCase()],s===void 0))throw new Ae(`Unknown adapter '${a}'`);if(s)break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(xg).join(`
`):" "+xg(o[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:Gh};function Vu(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new va(null,n)}function Dg(n){return Vu(n),n.headers=Kn.from(n.headers),n.data=Nu.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),N0.getAdapter(n.adapter||Gd.adapter)(n).then(function(s){return Vu(n),s.data=Nu.call(n,n.transformResponse,s),s.headers=Kn.from(s.headers),s},function(s){return x0(s)||(Vu(n),s&&s.response&&(s.response.data=Nu.call(n,n.transformResponse,s.response),s.response.headers=Kn.from(s.response.headers))),Promise.reject(s)})}const Ng=n=>n instanceof Kn?{...n}:n;function ci(n,t){t=t||{};const r={};function s(u,h,f){return L.isPlainObject(u)&&L.isPlainObject(h)?L.merge.call({caseless:f},u,h):L.isPlainObject(h)?L.merge({},h):L.isArray(h)?h.slice():h}function i(u,h,f){if(L.isUndefined(h)){if(!L.isUndefined(u))return s(void 0,u,f)}else return s(u,h,f)}function o(u,h){if(!L.isUndefined(h))return s(void 0,h)}function a(u,h){if(L.isUndefined(h)){if(!L.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function c(u,h,f){if(f in t)return s(u,h);if(f in n)return s(void 0,u)}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(u,h)=>i(Ng(u),Ng(h),!0)};return L.forEach(Object.keys(Object.assign({},n,t)),function(h){const f=l[h]||i,d=f(n[h],t[h],h);L.isUndefined(d)&&f!==c||(r[h]=d)}),r}const V0="1.6.8",Qd={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Qd[n]=function(s){return typeof s===n||"a"+(t<1?"n ":" ")+n}});const Vg={};Qd.transitional=function(t,r,s){function i(o,a){return"[Axios v"+V0+"] Transitional option '"+o+"'"+a+(s?". "+s:"")}return(o,a,c)=>{if(t===!1)throw new Ae(i(a," has been removed"+(r?" in "+r:"")),Ae.ERR_DEPRECATED);return r&&!Vg[a]&&(Vg[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,c):!0}};function ZD(n,t,r){if(typeof n!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const o=s[i],a=t[o];if(a){const c=n[o],l=c===void 0||a(c,o,n);if(l!==!0)throw new Ae("option "+o+" must be "+l,Ae.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ae("Unknown option "+o,Ae.ERR_BAD_OPTION)}}const Qh={assertOptions:ZD,validators:Qd},ar=Qh.validators;class qc{constructor(t){this.defaults=t,this.interceptors={request:new Pg,response:new Pg}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ci(this.defaults,r);const{transitional:s,paramsSerializer:i,headers:o}=r;s!==void 0&&Qh.assertOptions(s,{silentJSONParsing:ar.transitional(ar.boolean),forcedJSONParsing:ar.transitional(ar.boolean),clarifyTimeoutError:ar.transitional(ar.boolean)},!1),i!=null&&(L.isFunction(i)?r.paramsSerializer={serialize:i}:Qh.assertOptions(i,{encode:ar.function,serialize:ar.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=o&&L.merge(o.common,o[r.method]);o&&L.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),r.headers=Kn.concat(a,o);const c=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(l=l&&v.synchronous,c.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let h,f=0,d;if(!l){const g=[Dg.bind(this),void 0];for(g.unshift.apply(g,c),g.push.apply(g,u),d=g.length,h=Promise.resolve(r);f<d;)h=h.then(g[f++],g[f++]);return h}d=c.length;let p=r;for(f=0;f<d;){const g=c[f++],v=c[f++];try{p=g(p)}catch(w){v.call(this,w);break}}try{h=Dg.call(this,p)}catch(g){return Promise.reject(g)}for(f=0,d=u.length;f<d;)h=h.then(u[f++],u[f++]);return h}getUri(t){t=ci(this.defaults,t);const r=D0(t.baseURL,t.url);return C0(r,t.params,t.paramsSerializer)}}L.forEach(["delete","get","head","options"],function(t){qc.prototype[t]=function(r,s){return this.request(ci(s||{},{method:t,url:r,data:(s||{}).data}))}});L.forEach(["post","put","patch"],function(t){function r(s){return function(o,a,c){return this.request(ci(c||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}qc.prototype[t]=r(),qc.prototype[t+"Form"]=r(!0)});const ac=qc;class Jd{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const s=this;this.promise.then(i=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](i);s._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(c=>{s.subscribe(c),o=c}).then(i);return a.cancel=function(){s.unsubscribe(o)},a},t(function(o,a,c){s.reason||(s.reason=new va(o,a,c),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new Jd(function(i){t=i}),cancel:t}}}const eN=Jd;function tN(n){return function(r){return n.apply(null,r)}}function nN(n){return L.isObject(n)&&n.isAxiosError===!0}const Jh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jh).forEach(([n,t])=>{Jh[t]=n});const rN=Jh;function L0(n){const t=new ac(n),r=g0(ac.prototype.request,t);return L.extend(r,ac.prototype,t,{allOwnKeys:!0}),L.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return L0(ci(n,i))},r}const Xe=L0(Gd);Xe.Axios=ac;Xe.CanceledError=va;Xe.CancelToken=eN;Xe.isCancel=x0;Xe.VERSION=V0;Xe.toFormData=Yl;Xe.AxiosError=Ae;Xe.Cancel=Xe.CanceledError;Xe.all=function(t){return Promise.all(t)};Xe.spread=tN;Xe.isAxiosError=nN;Xe.mergeConfig=ci;Xe.AxiosHeaders=Kn;Xe.formToJSON=n=>O0(L.isHTMLForm(n)?new FormData(n):n);Xe.getAdapter=N0.getAdapter;Xe.HttpStatusCode=rN;Xe.default=Xe;const sN="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20data-name='Layer%201'%20id='Layer_1'%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%230baeff;}%3c/style%3e%3c/defs%3e%3ctitle/%3e%3cpath%20class='cls-1'%20d='M49,38a17.5,17.5,0,0,1-35,0C14,22.7,28.22,8.48,31.5,8.48S49,22.7,49,38Z'/%3e%3c/svg%3e",iN="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20data-name='Layer%201'%20id='Layer_1'%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%230baeff;}.cls-2,.cls-3,.cls-4{fill:none;stroke-linecap:round;}.cls-2{stroke:%230baeff;stroke-linejoin:round;stroke-width:12px;}.cls-3{stroke:%231441af;}.cls-3,.cls-4{stroke-miterlimit:10;stroke-width:6px;}.cls-4{stroke:%23f7563c;}.cls-5{fill:url(%23linear-gradient);}%3c/style%3e%3clinearGradient%20gradientTransform='translate(78%2014)%20rotate(90)'%20gradientUnits='userSpaceOnUse'%20id='linear-gradient'%20x1='27.34'%20x2='38.68'%20y1='40.25'%20y2='54.24'%3e%3cstop%20offset='0.02'%20stop-color='%23f7563c'/%3e%3cstop%20offset='1'%20stop-color='%23d43217'/%3e%3c/linearGradient%3e%3c/defs%3e%3ctitle/%3e%3ccircle%20class='cls-1'%20cx='32'%20cy='46'%20r='12'/%3e%3cline%20class='cls-2'%20x1='32'%20x2='32'%20y1='13'%20y2='46'/%3e%3cline%20class='cls-3'%20x1='32'%20x2='32'%20y1='13'%20y2='37'/%3e%3cline%20class='cls-4'%20x1='32'%20x2='32'%20y1='35'%20y2='46'/%3e%3ccircle%20class='cls-5'%20cx='32'%20cy='46'%20r='9'%20transform='translate(-22.49%2059.06)%20rotate(-68.66)'/%3e%3c/svg%3e",oN="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20data-name='Layer%201'%20id='Layer_1'%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23efcc00;}.cls-2{fill:%23353535;}%3c/style%3e%3c/defs%3e%3ctitle/%3e%3cpath%20class='cls-1'%20d='M30.16,11.51,6.84,51.9a2.13,2.13,0,0,0,1.84,3.19H55.32a2.13,2.13,0,0,0,1.84-3.19L33.84,11.51A2.13,2.13,0,0,0,30.16,11.51Z'/%3e%3cpath%20class='cls-2'%20d='M29,46a3,3,0,1,1,3,3A2.88,2.88,0,0,1,29,46Zm1.09-4.66-.76-15h5.26l-.73,15Z'/%3e%3c/svg%3e",aN={class:"flex text-white items-center"},cN={class:"flex"},lN=K("label",{for:"pet-select"},"選擇縣市：",-1),uN=K("option",{value:""},"--縣市--",-1),hN=["value"],fN={key:0,class:"flex gap-3 mx-3"},dN={class:"text-start flex items-center"},pN=["src"],mN={class:"flex items-center"},gN=["src"],_N={class:"flex items-center"},yN=["src"],vN={__name:"Weather",setup(n){const t=_e(null),r=_e([]),s=_e("新北市");async function i(){try{const a=await Xe.get("https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=CWB-D86E32DD-4173-4C38-BF76-04A68E6E5AEF");t.value=a.data,r.value=t._rawValue.records.location,console.log(t.value.records.location),console.log(r)}catch(a){console.error("發生錯誤：",a)}}const o=Ye(()=>r.value.find(a=>a.locationName===s.value));return i(),(a,c)=>(ye(),Se("div",aN,[K("div",cN,[lN,dt(K("select",{name:"cities",id:"city-select","onUpdate:modelValue":c[0]||(c[0]=l=>s.value=l),class:"text-black rounded-md"},[uN,(ye(!0),Se(Ke,null,go(r.value,l=>(ye(),Se("option",{key:l.locationName,value:l.locationName},gt(l.locationName),9,hN))),128))],512),[[vo,s.value]])]),o.value?(ye(),Se("div",fN,[K("p",dN,[K("img",{src:Le(oN),alt:"rain icon",width:"34px",height:"auto"},null,8,pN),je(" "+gt(o.value.weatherElement[0].time[0].parameter.parameterName),1)]),K("p",mN,[K("img",{src:Le(iN),alt:"temp icon",width:"34px",height:"auto"},null,8,gN),je(" "+gt(o.value.weatherElement[2].time[0].parameter.parameterName)+"°C ",1)]),K("p",_N,[K("img",{src:Le(sN),alt:"rain icon",width:"34px",height:"auto"},null,8,yN),je(gt(o.value.weatherElement[1].time[0].parameter.parameterName)+"% ",1)])])):Gn("",!0)]))}},EN={class:"bg-gray-200"},wN={class:"max-w-5xl mx-auto my-0 px-23 flex justify-between items-center gap-2.5 p-3"},TN={key:0,class:"p-2"},bN={__name:"member",setup(n){const t=Si(),{memberId:r,isUserLoggedIn:s}=_i(t),i=gl(ls),o=async()=>{try{await dC(i),document.cookie="id=; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="email=; expires=Thu, 01 Jan 1970 00:00:00 GMT",console.log("已登出")}catch(a){console.error("錯",a.message)}};return(a,c)=>{const l=po("router-link");return ye(),Se("div",EN,[K("div",wN,[oe(vN),Le(s)?Gn("",!0):(ye(),Se("div",TN,[oe(l,{to:"/signup",class:"tab p-2 text-white hover:bg-white hover:text-gray-400 rounded-md"},{default:lt(()=>[je("註冊")]),_:1}),oe(l,{to:"/login",class:"tab p-2 text-white hover:bg-white hover:text-gray-400 rounded-md"},{default:lt(()=>[je("登入")]),_:1})])),Le(s)?(ye(),Se("div",{key:1,onClick:o,class:"tab p-2 text-white hover:bg-white hover:text-gray-400 rounded-md"}," 登出 ")):Gn("",!0)])])}}},M0=(n,t)=>{const r=n.__vccOpts||n;for(const[s,i]of t)r[s]=i;return r},IN={},AN=K("h1",{class:"text-5xl text-white my-8 font-semibold"},"記帳應用",-1),SN=[AN];function RN(n,t){return ye(),Se("div",null,SN)}const CN=M0(IN,[["render",RN]]),PN={class:"flex flex-wrap justify-center"},kN={__name:"App",setup(n){const t=Si(),{memberId:r,memberEmail:s,isUserLoggedIn:i}=_i(t),o=gl(ls),a=c=>{if(c){i.value=!0;const l=c.email;l&&(s.value=l);const u=c.id;u&&(r.value=u)}else i.value=!1};return xn(()=>{fC(o,a);const c=document.cookie.split("; ");let l=null,u=null;c.forEach(h=>{const[f,d]=h.split("=");f==="id"?l=d:f==="email"&&(u=d)}),l&&(r.value=l),u&&(s.value=u)}),(c,l)=>{const u=po("router-link"),h=po("router-view");return ye(),Se(Ke,null,[oe(bN),oe(CN),K("div",PN,[oe(u,{to:"/",class:"nav m-3 text-2xl text-white hover:bg-red cursor-pointer px-4 py-1 bg-gray-400"},{default:lt(()=>[je("即時匯率")]),_:1}),oe(u,{to:"/crud",class:"nav m-3 text-2xl text-white hover:bg-red cursor-pointer px-4 py-1 bg-gray-400"},{default:lt(()=>[je("記帳功能")]),_:1})]),oe(h)],64)}}};/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ks=typeof document<"u";function ON(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const ke=Object.assign;function Lu(n,t){const r={};for(const s in t){const i=t[s];r[s]=un(i)?i.map(n):n(i)}return r}const io=()=>{},un=Array.isArray,F0=/#/g,xN=/&/g,DN=/\//g,NN=/=/g,VN=/\?/g,U0=/\+/g,LN=/%5B/g,MN=/%5D/g,B0=/%5E/g,FN=/%60/g,$0=/%7B/g,UN=/%7C/g,j0=/%7D/g,BN=/%20/g;function Yd(n){return encodeURI(""+n).replace(UN,"|").replace(LN,"[").replace(MN,"]")}function $N(n){return Yd(n).replace($0,"{").replace(j0,"}").replace(B0,"^")}function Yh(n){return Yd(n).replace(U0,"%2B").replace(BN,"+").replace(F0,"%23").replace(xN,"%26").replace(FN,"`").replace($0,"{").replace(j0,"}").replace(B0,"^")}function jN(n){return Yh(n).replace(NN,"%3D")}function HN(n){return Yd(n).replace(F0,"%23").replace(VN,"%3F")}function qN(n){return n==null?"":HN(n).replace(DN,"%2F")}function Fo(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const WN=/\/$/,KN=n=>n.replace(WN,"");function Mu(n,t,r="/"){let s,i={},o="",a="";const c=t.indexOf("#");let l=t.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(s=t.slice(0,l),o=t.slice(l+1,c>-1?c:t.length),i=n(o)),c>-1&&(s=s||t.slice(0,c),a=t.slice(c,t.length)),s=JN(s??t,r),{fullPath:s+(o&&"?")+o+a,path:s,query:i,hash:Fo(a)}}function zN(n,t){const r=t.query?n(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function Lg(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function GN(n,t,r){const s=t.matched.length-1,i=r.matched.length-1;return s>-1&&s===i&&li(t.matched[s],r.matched[i])&&H0(t.params,r.params)&&n(t.query)===n(r.query)&&t.hash===r.hash}function li(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function H0(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const r in n)if(!QN(n[r],t[r]))return!1;return!0}function QN(n,t){return un(n)?Mg(n,t):un(t)?Mg(t,n):n===t}function Mg(n,t){return un(t)?n.length===t.length&&n.every((r,s)=>r===t[s]):n.length===1&&n[0]===t}function JN(n,t){if(n.startsWith("/"))return n;if(!n)return t;const r=t.split("/"),s=n.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let o=r.length-1,a,c;for(a=0;a<s.length;a++)if(c=s[a],c!==".")if(c==="..")o>1&&o--;else break;return r.slice(0,o).join("/")+"/"+s.slice(a).join("/")}var Uo;(function(n){n.pop="pop",n.push="push"})(Uo||(Uo={}));var oo;(function(n){n.back="back",n.forward="forward",n.unknown=""})(oo||(oo={}));function YN(n){if(!n)if(ks){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),KN(n)}const XN=/^[^#]+#/;function ZN(n,t){return n.replace(XN,"#")+t}function eV(n,t){const r=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:t.behavior,left:s.left-r.left-(t.left||0),top:s.top-r.top-(t.top||0)}}const Zl=()=>({left:window.scrollX,top:window.scrollY});function tV(n){let t;if("el"in n){const r=n.el,s=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?s?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=eV(i,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Fg(n,t){return(history.state?history.state.position-t:-1)+n}const Xh=new Map;function nV(n,t){Xh.set(n,t)}function rV(n){const t=Xh.get(n);return Xh.delete(n),t}let sV=()=>location.protocol+"//"+location.host;function q0(n,t){const{pathname:r,search:s,hash:i}=t,o=n.indexOf("#");if(o>-1){let c=i.includes(n.slice(o))?n.slice(o).length:1,l=i.slice(c);return l[0]!=="/"&&(l="/"+l),Lg(l,"")}return Lg(r,n)+s+i}function iV(n,t,r,s){let i=[],o=[],a=null;const c=({state:d})=>{const p=q0(n,location),g=r.value,v=t.value;let w=0;if(d){if(r.value=p,t.value=d,a&&a===g){a=null;return}w=v?d.position-v.position:0}else s(p);i.forEach(C=>{C(r.value,g,{delta:w,type:Uo.pop,direction:w?w>0?oo.forward:oo.back:oo.unknown})})};function l(){a=r.value}function u(d){i.push(d);const p=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return o.push(p),p}function h(){const{history:d}=window;d.state&&d.replaceState(ke({},d.state,{scroll:Zl()}),"")}function f(){for(const d of o)d();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:f}}function Ug(n,t,r,s=!1,i=!1){return{back:n,current:t,forward:r,replaced:s,position:window.history.length,scroll:i?Zl():null}}function oV(n){const{history:t,location:r}=window,s={value:q0(n,r)},i={value:t.state};i.value||o(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,h){const f=n.indexOf("#"),d=f>-1?(r.host&&document.querySelector("base")?n:n.slice(f))+l:sV()+n+l;try{t[h?"replaceState":"pushState"](u,"",d),i.value=u}catch(p){console.error(p),r[h?"replace":"assign"](d)}}function a(l,u){const h=ke({},t.state,Ug(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,h,!0),s.value=l}function c(l,u){const h=ke({},i.value,t.state,{forward:l,scroll:Zl()});o(h.current,h,!0);const f=ke({},Ug(s.value,l,null),{position:h.position+1},u);o(l,f,!1),s.value=l}return{location:s,state:i,push:c,replace:a}}function aV(n){n=YN(n);const t=oV(n),r=iV(n,t.state,t.location,t.replace);function s(o,a=!0){a||r.pauseListeners(),history.go(o)}const i=ke({location:"",base:n,go:s,createHref:ZN.bind(null,n)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function cV(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),aV(n)}function lV(n){return typeof n=="string"||n&&typeof n=="object"}function W0(n){return typeof n=="string"||typeof n=="symbol"}const cr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},K0=Symbol("");var Bg;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Bg||(Bg={}));function ui(n,t){return ke(new Error,{type:n,[K0]:!0},t)}function Nn(n,t){return n instanceof Error&&K0 in n&&(t==null||!!(n.type&t))}const $g="[^/]+?",uV={sensitive:!1,strict:!1,start:!0,end:!0},hV=/[.+*?^${}()[\]/\\]/g;function fV(n,t){const r=ke({},uV,t),s=[];let i=r.start?"^":"";const o=[];for(const u of n){const h=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const d=u[f];let p=40+(r.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(hV,"\\$&"),p+=40;else if(d.type===1){const{value:g,repeatable:v,optional:w,regexp:C}=d;o.push({name:g,repeatable:v,optional:w});const T=C||$g;if(T!==$g){p+=10;try{new RegExp(`(${T})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${g}" (${T}): `+E.message)}}let y=v?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;f||(y=w&&u.length<2?`(?:/${y})`:"/"+y),w&&(y+="?"),i+=y,p+=20,w&&(p+=-8),v&&(p+=-20),T===".*"&&(p+=-50)}h.push(p)}s.push(h)}if(r.strict&&r.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function c(u){const h=u.match(a),f={};if(!h)return null;for(let d=1;d<h.length;d++){const p=h[d]||"",g=o[d-1];f[g.name]=p&&g.repeatable?p.split("/"):p}return f}function l(u){let h="",f=!1;for(const d of n){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const p of d)if(p.type===0)h+=p.value;else if(p.type===1){const{value:g,repeatable:v,optional:w}=p,C=g in u?u[g]:"";if(un(C)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const T=un(C)?C.join("/"):C;if(!T)if(w)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);h+=T}}return h||"/"}return{re:a,score:s,keys:o,parse:c,stringify:l}}function dV(n,t){let r=0;for(;r<n.length&&r<t.length;){const s=t[r]-n[r];if(s)return s;r++}return n.length<t.length?n.length===1&&n[0]===80?-1:1:n.length>t.length?t.length===1&&t[0]===80?1:-1:0}function pV(n,t){let r=0;const s=n.score,i=t.score;for(;r<s.length&&r<i.length;){const o=dV(s[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-s.length)===1){if(jg(s))return 1;if(jg(i))return-1}return i.length-s.length}function jg(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const mV={type:0,value:""},gV=/[a-zA-Z0-9_]/;function _V(n){if(!n)return[[]];if(n==="/")return[[mV]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(p){throw new Error(`ERR (${r})/"${u}": ${p}`)}let r=0,s=r;const i=[];let o;function a(){o&&i.push(o),o=[]}let c=0,l,u="",h="";function f(){u&&(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;c<n.length;){if(l=n[c++],l==="\\"&&r!==2){s=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),r=1):d();break;case 4:d(),r=s;break;case 1:l==="("?r=2:gV.test(l)?d():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:r=3:h+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,h="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function yV(n,t,r){const s=fV(_V(n.path),r),i=ke(s,{record:n,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function vV(n,t){const r=[],s=new Map;t=Wg({strict:!1,end:!0,sensitive:!1},t);function i(h){return s.get(h)}function o(h,f,d){const p=!d,g=EV(h);g.aliasOf=d&&d.record;const v=Wg(t,h),w=[g];if("alias"in h){const y=typeof h.alias=="string"?[h.alias]:h.alias;for(const E of y)w.push(ke({},g,{components:d?d.record.components:g.components,path:E,aliasOf:d?d.record:g}))}let C,T;for(const y of w){const{path:E}=y;if(f&&E[0]!=="/"){const I=f.record.path,S=I[I.length-1]==="/"?"":"/";y.path=f.record.path+(E&&S+E)}if(C=yV(y,f,v),d?d.alias.push(C):(T=T||C,T!==C&&T.alias.push(C),p&&h.name&&!qg(C)&&a(h.name)),g.children){const I=g.children;for(let S=0;S<I.length;S++)o(I[S],C,d&&d.children[S])}d=d||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&l(C)}return T?()=>{a(T)}:io}function a(h){if(W0(h)){const f=s.get(h);f&&(s.delete(h),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(h);f>-1&&(r.splice(f,1),h.record.name&&s.delete(h.record.name),h.children.forEach(a),h.alias.forEach(a))}}function c(){return r}function l(h){let f=0;for(;f<r.length&&pV(h,r[f])>=0&&(h.record.path!==r[f].record.path||!z0(h,r[f]));)f++;r.splice(f,0,h),h.record.name&&!qg(h)&&s.set(h.record.name,h)}function u(h,f){let d,p={},g,v;if("name"in h&&h.name){if(d=s.get(h.name),!d)throw ui(1,{location:h});v=d.record.name,p=ke(Hg(f.params,d.keys.filter(T=>!T.optional).concat(d.parent?d.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),h.params&&Hg(h.params,d.keys.map(T=>T.name))),g=d.stringify(p)}else if(h.path!=null)g=h.path,d=r.find(T=>T.re.test(g)),d&&(p=d.parse(g),v=d.record.name);else{if(d=f.name?s.get(f.name):r.find(T=>T.re.test(f.path)),!d)throw ui(1,{location:h,currentLocation:f});v=d.record.name,p=ke({},f.params,h.params),g=d.stringify(p)}const w=[];let C=d;for(;C;)w.unshift(C.record),C=C.parent;return{name:v,path:g,params:p,matched:w,meta:TV(w)}}return n.forEach(h=>o(h)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:c,getRecordMatcher:i}}function Hg(n,t){const r={};for(const s of t)s in n&&(r[s]=n[s]);return r}function EV(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:wV(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function wV(n){const t={},r=n.props||!1;if("component"in n)t.default=r;else for(const s in n.components)t[s]=typeof r=="object"?r[s]:r;return t}function qg(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function TV(n){return n.reduce((t,r)=>ke(t,r.meta),{})}function Wg(n,t){const r={};for(const s in n)r[s]=s in t?t[s]:n[s];return r}function z0(n,t){return t.children.some(r=>r===n||z0(n,r))}function bV(n){const t={};if(n===""||n==="?")return t;const s=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<s.length;++i){const o=s[i].replace(U0," "),a=o.indexOf("="),c=Fo(a<0?o:o.slice(0,a)),l=a<0?null:Fo(o.slice(a+1));if(c in t){let u=t[c];un(u)||(u=t[c]=[u]),u.push(l)}else t[c]=l}return t}function Kg(n){let t="";for(let r in n){const s=n[r];if(r=jN(r),s==null){s!==void 0&&(t+=(t.length?"&":"")+r);continue}(un(s)?s.map(o=>o&&Yh(o)):[s&&Yh(s)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function IV(n){const t={};for(const r in n){const s=n[r];s!==void 0&&(t[r]=un(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const AV=Symbol(""),zg=Symbol(""),eu=Symbol(""),G0=Symbol(""),Zh=Symbol("");function Vi(){let n=[];function t(s){return n.push(s),()=>{const i=n.indexOf(s);i>-1&&n.splice(i,1)}}function r(){n=[]}return{add:t,list:()=>n.slice(),reset:r}}function mr(n,t,r,s,i,o=a=>a()){const a=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((c,l)=>{const u=d=>{d===!1?l(ui(4,{from:r,to:t})):d instanceof Error?l(d):lV(d)?l(ui(2,{from:t,to:d})):(a&&s.enterCallbacks[i]===a&&typeof d=="function"&&a.push(d),c())},h=o(()=>n.call(s&&s.instances[i],t,r,u));let f=Promise.resolve(h);n.length<3&&(f=f.then(u)),f.catch(d=>l(d))})}function Fu(n,t,r,s,i=o=>o()){const o=[];for(const a of n)for(const c in a.components){let l=a.components[c];if(!(t!=="beforeRouteEnter"&&!a.instances[c]))if(SV(l)){const h=(l.__vccOpts||l)[t];h&&o.push(mr(h,r,s,a,c,i))}else{let u=l();o.push(()=>u.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${c}" at "${a.path}"`));const f=ON(h)?h.default:h;a.components[c]=f;const p=(f.__vccOpts||f)[t];return p&&mr(p,r,s,a,c,i)()}))}}return o}function SV(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Gg(n){const t=Yt(eu),r=Yt(G0),s=Ye(()=>{const l=Le(n.to);return t.resolve(l)}),i=Ye(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],f=r.matched;if(!h||!f.length)return-1;const d=f.findIndex(li.bind(null,h));if(d>-1)return d;const p=Qg(l[u-2]);return u>1&&Qg(h)===p&&f[f.length-1].path!==p?f.findIndex(li.bind(null,l[u-2])):d}),o=Ye(()=>i.value>-1&&kV(r.params,s.value.params)),a=Ye(()=>i.value>-1&&i.value===r.matched.length-1&&H0(r.params,s.value.params));function c(l={}){return PV(l)?t[Le(n.replace)?"replace":"push"](Le(n.to)).catch(io):Promise.resolve()}return{route:s,href:Ye(()=>s.value.href),isActive:o,isExactActive:a,navigate:c}}const RV=Ko({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Gg,setup(n,{slots:t}){const r=Zn(Gg(n)),{options:s}=Yt(eu),i=Ye(()=>({[Jg(n.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[Jg(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return n.custom?o:al("a",{"aria-current":r.isExactActive?n.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),CV=RV;function PV(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function kV(n,t){for(const r in t){const s=t[r],i=n[r];if(typeof s=="string"){if(s!==i)return!1}else if(!un(i)||i.length!==s.length||s.some((o,a)=>o!==i[a]))return!1}return!0}function Qg(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Jg=(n,t,r)=>n??t??r,OV=Ko({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:r}){const s=Yt(Zh),i=Ye(()=>n.route||s.value),o=Yt(zg,0),a=Ye(()=>{let u=Le(o);const{matched:h}=i.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),c=Ye(()=>i.value.matched[a.value]);zi(zg,Ye(()=>a.value+1)),zi(AV,c),zi(Zh,i);const l=_e();return Kt(()=>[l.value,c.value,n.name],([u,h,f],[d,p,g])=>{h&&(h.instances[f]=u,p&&p!==h&&u&&u===d&&(h.leaveGuards.size||(h.leaveGuards=p.leaveGuards),h.updateGuards.size||(h.updateGuards=p.updateGuards))),u&&h&&(!p||!li(h,p)||!d)&&(h.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,h=n.name,f=c.value,d=f&&f.components[h];if(!d)return Yg(r.default,{Component:d,route:u});const p=f.props[h],g=p?p===!0?u.params:typeof p=="function"?p(u):p:null,w=al(d,ke({},g,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return Yg(r.default,{Component:w,route:u})||w}}});function Yg(n,t){if(!n)return null;const r=n(t);return r.length===1?r[0]:r}const xV=OV;function DV(n){const t=vV(n.routes,n),r=n.parseQuery||bV,s=n.stringifyQuery||Kg,i=n.history,o=Vi(),a=Vi(),c=Vi(),l=R_(cr);let u=cr;ks&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Lu.bind(null,D=>""+D),f=Lu.bind(null,qN),d=Lu.bind(null,Fo);function p(D,Q){let O,W;return W0(D)?(O=t.getRecordMatcher(D),W=Q):W=D,t.addRoute(W,O)}function g(D){const Q=t.getRecordMatcher(D);Q&&t.removeRoute(Q)}function v(){return t.getRoutes().map(D=>D.record)}function w(D){return!!t.getRecordMatcher(D)}function C(D,Q){if(Q=ke({},Q||l.value),typeof D=="string"){const _=Mu(r,D,Q.path),P=t.resolve({path:_.path},Q),V=i.createHref(_.fullPath);return ke(_,P,{params:d(P.params),hash:Fo(_.hash),redirectedFrom:void 0,href:V})}let O;if(D.path!=null)O=ke({},D,{path:Mu(r,D.path,Q.path).path});else{const _=ke({},D.params);for(const P in _)_[P]==null&&delete _[P];O=ke({},D,{params:f(_)}),Q.params=f(Q.params)}const W=t.resolve(O,Q),pe=D.hash||"";W.params=h(d(W.params));const ve=zN(s,ke({},D,{hash:$N(pe),path:W.path})),m=i.createHref(ve);return ke({fullPath:ve,hash:pe,query:s===Kg?IV(D.query):D.query||{}},W,{redirectedFrom:void 0,href:m})}function T(D){return typeof D=="string"?Mu(r,D,l.value.path):ke({},D)}function y(D,Q){if(u!==D)return ui(8,{from:Q,to:D})}function E(D){return k(D)}function I(D){return E(ke(T(D),{replace:!0}))}function S(D){const Q=D.matched[D.matched.length-1];if(Q&&Q.redirect){const{redirect:O}=Q;let W=typeof O=="function"?O(D):O;return typeof W=="string"&&(W=W.includes("?")||W.includes("#")?W=T(W):{path:W},W.params={}),ke({query:D.query,hash:D.hash,params:W.path!=null?{}:D.params},W)}}function k(D,Q){const O=u=C(D),W=l.value,pe=D.state,ve=D.force,m=D.replace===!0,_=S(O);if(_)return k(ke(T(_),{state:typeof _=="object"?ke({},pe,_.state):pe,force:ve,replace:m}),Q||O);const P=O;P.redirectedFrom=Q;let V;return!ve&&GN(s,W,O)&&(V=ui(16,{to:P,from:W}),Je(W,W,!0,!1)),(V?Promise.resolve(V):A(P,W)).catch(x=>Nn(x)?Nn(x,2)?x:Ve(x):G(x,P,W)).then(x=>{if(x){if(Nn(x,2))return k(ke({replace:m},T(x.to),{state:typeof x.to=="object"?ke({},pe,x.to.state):pe,force:ve}),Q||P)}else x=N(P,W,!0,m,pe);return U(P,W,x),x})}function b(D,Q){const O=y(D,Q);return O?Promise.reject(O):Promise.resolve()}function R(D){const Q=Pt.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(D):D()}function A(D,Q){let O;const[W,pe,ve]=NV(D,Q);O=Fu(W.reverse(),"beforeRouteLeave",D,Q);for(const _ of W)_.leaveGuards.forEach(P=>{O.push(mr(P,D,Q))});const m=b.bind(null,D,Q);return O.push(m),Be(O).then(()=>{O=[];for(const _ of o.list())O.push(mr(_,D,Q));return O.push(m),Be(O)}).then(()=>{O=Fu(pe,"beforeRouteUpdate",D,Q);for(const _ of pe)_.updateGuards.forEach(P=>{O.push(mr(P,D,Q))});return O.push(m),Be(O)}).then(()=>{O=[];for(const _ of ve)if(_.beforeEnter)if(un(_.beforeEnter))for(const P of _.beforeEnter)O.push(mr(P,D,Q));else O.push(mr(_.beforeEnter,D,Q));return O.push(m),Be(O)}).then(()=>(D.matched.forEach(_=>_.enterCallbacks={}),O=Fu(ve,"beforeRouteEnter",D,Q,R),O.push(m),Be(O))).then(()=>{O=[];for(const _ of a.list())O.push(mr(_,D,Q));return O.push(m),Be(O)}).catch(_=>Nn(_,8)?_:Promise.reject(_))}function U(D,Q,O){c.list().forEach(W=>R(()=>W(D,Q,O)))}function N(D,Q,O,W,pe){const ve=y(D,Q);if(ve)return ve;const m=Q===cr,_=ks?history.state:{};O&&(W||m?i.replace(D.fullPath,ke({scroll:m&&_&&_.scroll},pe)):i.push(D.fullPath,pe)),l.value=D,Je(D,Q,O,m),Ve()}let q;function ge(){q||(q=i.listen((D,Q,O)=>{if(!st.listening)return;const W=C(D),pe=S(W);if(pe){k(ke(pe,{replace:!0}),W).catch(io);return}u=W;const ve=l.value;ks&&nV(Fg(ve.fullPath,O.delta),Zl()),A(W,ve).catch(m=>Nn(m,12)?m:Nn(m,2)?(k(m.to,W).then(_=>{Nn(_,20)&&!O.delta&&O.type===Uo.pop&&i.go(-1,!1)}).catch(io),Promise.reject()):(O.delta&&i.go(-O.delta,!1),G(m,W,ve))).then(m=>{m=m||N(W,ve,!1),m&&(O.delta&&!Nn(m,8)?i.go(-O.delta,!1):O.type===Uo.pop&&Nn(m,20)&&i.go(-1,!1)),U(W,ve,m)}).catch(io)}))}let he=Vi(),$=Vi(),ne;function G(D,Q,O){Ve(D);const W=$.list();return W.length?W.forEach(pe=>pe(D,Q,O)):console.error(D),Promise.reject(D)}function Pe(){return ne&&l.value!==cr?Promise.resolve():new Promise((D,Q)=>{he.add([D,Q])})}function Ve(D){return ne||(ne=!D,ge(),he.list().forEach(([Q,O])=>D?O(D):Q()),he.reset()),D}function Je(D,Q,O,W){const{scrollBehavior:pe}=n;if(!ks||!pe)return Promise.resolve();const ve=!O&&rV(Fg(D.fullPath,0))||(W||!O)&&history.state&&history.state.scroll||null;return _s().then(()=>pe(D,Q,ve)).then(m=>m&&tV(m)).catch(m=>G(m,D,Q))}const We=D=>i.go(D);let Ut;const Pt=new Set,st={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,hasRoute:w,getRoutes:v,resolve:C,options:n,push:E,replace:I,go:We,back:()=>We(-1),forward:()=>We(1),beforeEach:o.add,beforeResolve:a.add,afterEach:c.add,onError:$.add,isReady:Pe,install(D){const Q=this;D.component("RouterLink",CV),D.component("RouterView",xV),D.config.globalProperties.$router=Q,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>Le(l)}),ks&&!Ut&&l.value===cr&&(Ut=!0,E(i.location).catch(pe=>{}));const O={};for(const pe in cr)Object.defineProperty(O,pe,{get:()=>l.value[pe],enumerable:!0});D.provide(eu,Q),D.provide(G0,df(O)),D.provide(Zh,l);const W=D.unmount;Pt.add(D),D.unmount=function(){Pt.delete(D),Pt.size<1&&(u=cr,q&&q(),q=null,l.value=cr,Ut=!1,ne=!1),W()}}};function Be(D){return D.reduce((Q,O)=>Q.then(()=>R(O)),Promise.resolve())}return st}function NV(n,t){const r=[],s=[],i=[],o=Math.max(t.matched.length,n.matched.length);for(let a=0;a<o;a++){const c=t.matched[a];c&&(n.matched.find(u=>li(u,c))?s.push(c):r.push(c));const l=n.matched[a];l&&(t.matched.find(u=>li(u,l))||i.push(l))}return[r,s,i]}function Q0(){return Yt(eu)}const VV={class:"mt-6 text-end"},LV={__name:"NowTime",setup(n){const t=new Date;let r=Zn({hours:t.getHours().toString().padStart(2,"0"),minutes:t.getMinutes().toString().padStart(2,"0"),seconds:t.getSeconds().toString().padStart(2,"0")});return r=`${r.hours}:${r.minutes}:${r.seconds}`,(s,i)=>(ye(),Se("div",null,[K("p",VV,"更新時間："+gt(Le(r)),1)]))}};var MV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function FV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function UV(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),r}var J0={exports:{}};const BV=UV(AA);(function(n,t){(function(s,i){n.exports=i(BV)})(MV,r=>(()=>{var s={878:(c,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.default=(u,h)=>{const f=u.__vccOpts||u;for(const[d,p]of h)f[d]=p;return f}},976:c=>{c.exports=r}},i={};function o(c){var l=i[c];if(l!==void 0)return l.exports;var u=i[c]={exports:{}};return s[c](u,u.exports,o),u.exports}o.d=(c,l)=>{for(var u in l)o.o(l,u)&&!o.o(c,u)&&Object.defineProperty(c,u,{enumerable:!0,get:l[u]})},o.o=(c,l)=>Object.prototype.hasOwnProperty.call(c,l),o.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var a={};return(()=>{o.r(a),o.d(a,{Component:()=>st,LoadingPlugin:()=>D,default:()=>Q,useLoading:()=>Be});var c=o(976);function l(O){var W;typeof O.remove<"u"?O.remove():(W=O.parentNode)==null||W.removeChild(O)}function u(O,W,pe){let ve=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const m=(0,c.h)(O,W,ve),_=document.createElement("div");return _.classList.add("vld-container"),pe.appendChild(_),(0,c.render)(m,_),m.component}function h(){return typeof window<"u"}const f=h()?window.HTMLElement:Object,d=["aria-busy"],p={class:"vl-icon"};function g(O,W,pe,ve,m,_){return(0,c.openBlock)(),(0,c.createBlock)(c.Transition,{name:O.transition},{default:(0,c.withCtx)(()=>[(0,c.withDirectives)((0,c.createElementVNode)("div",{tabindex:"0",class:(0,c.normalizeClass)(["vl-overlay vl-active",{"vl-full-page":O.isFullPage}]),"aria-busy":O.isActive,"aria-label":"Loading",style:(0,c.normalizeStyle)({zIndex:O.zIndex})},[(0,c.createElementVNode)("div",{class:"vl-background",onClick:W[0]||(W[0]=(0,c.withModifiers)(function(){return O.cancel&&O.cancel(...arguments)},["prevent"])),style:(0,c.normalizeStyle)(O.bgStyle)},null,4),(0,c.createElementVNode)("div",p,[(0,c.renderSlot)(O.$slots,"before"),(0,c.renderSlot)(O.$slots,"default",{},()=>[((0,c.openBlock)(),(0,c.createBlock)((0,c.resolveDynamicComponent)(O.loader),{color:O.color,width:O.width,height:O.height},null,8,["color","width","height"]))]),(0,c.renderSlot)(O.$slots,"after")])],14,d),[[c.vShow,O.isActive]])]),_:3},8,["name"])}const v={mounted(){this.enforceFocus&&document.addEventListener("focusin",this.focusIn)},methods:{focusIn(O){if(!this.isActive||O.target===this.$el||this.$el.contains(O.target))return;let W=this.container?this.container:this.isFullPage?null:this.$el.parentElement;(this.isFullPage||W&&W.contains(O.target))&&(O.preventDefault(),this.$el.focus())}},beforeUnmount(){document.removeEventListener("focusin",this.focusIn)}},w=["width","height","stroke"],T=[(0,c.createStaticVNode)('<g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke-opacity=".25" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.8s" repeatCount="indefinite"></animateTransform></path></g></g>',1)];function y(O,W,pe,ve,m,_){return(0,c.openBlock)(),(0,c.createElementBlock)("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:O.width,height:O.height,stroke:O.color},T,8,w)}const E=(0,c.defineComponent)({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});var I=o(878);const k=(0,I.default)(E,[["render",y]]),b=["fill","width","height"],A=[(0,c.createStaticVNode)('<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',3)];function U(O,W,pe,ve,m,_){return(0,c.openBlock)(),(0,c.createElementBlock)("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:O.color,width:O.width,height:O.height},A,8,b)}const N=(0,c.defineComponent)({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}}),ge=(0,I.default)(N,[["render",U]]),he=["height","width","fill"],ne=[(0,c.createStaticVNode)('<rect x="0" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="10" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="20" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate></rect>',3)];function G(O,W,pe,ve,m,_){return(0,c.openBlock)(),(0,c.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:O.height,width:O.width,fill:O.color},ne,8,he)}const Pe=(0,c.defineComponent)({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}}),We={Spinner:k,Dots:ge,Bars:(0,I.default)(Pe,[["render",G]])},Ut=(0,c.defineComponent)({name:"VueLoading",mixins:[v],props:{active:Boolean,programmatic:Boolean,container:[Object,Function,f],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:Boolean,transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,opacity:Number,width:Number,height:Number,zIndex:Number,loader:{type:String,default:"spinner"}},components:We,emits:["hide","update:active"],data(){return{isActive:this.active}},mounted(){document.addEventListener("keyup",this.keyPress)},methods:{cancel(){!this.canCancel||!this.isActive||(this.hide(),this.onCancel.apply(null,arguments))},hide(){this.$emit("hide"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout(()=>{const O=this.$el.parentElement;(0,c.render)(null,O),l(O)},150))},disableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.add("vl-shown")},enableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.remove("vl-shown")},keyPress(O){O.keyCode===27&&this.cancel()}},watch:{active(O){this.isActive=O},isActive:{handler(O){O?this.disableScroll():this.enableScroll()},immediate:!0}},computed:{bgStyle(){return{background:this.backgroundColor,opacity:this.opacity}}},beforeUnmount(){document.removeEventListener("keyup",this.keyPress)}}),st=(0,I.default)(Ut,[["render",g]]);function Be(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{show(){let pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:W;const _={...O,...pe,...{programmatic:!0,lockScroll:!0,isFullPage:!1,active:!0}};let P=_.container;_.container||(P=document.body,_.isFullPage=!0);const V={...W,...ve};return{hide:u(st,_,P,V).ctx.hide}}}}const D=function(O){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const ve=Be(W,pe);O.config.globalProperties.$loading=ve,O.provide("$loading",ve)},Q=st})(),a})())})(J0);var Y0=J0.exports;const $V=FV(Y0),jV={class:"vl-parent"},HV=K("div",{class:"loadingio-spinner-ripple-nq4q5u6dq7r"},[K("div",{class:"ldio-x2uulkbinbj"},[K("div"),K("div")])],-1),Xd={__name:"Loading",setup(n){const t=_e(!0),r=_e(!0);return(s,i)=>(ye(),Se("div",jV,[oe(Le($V),{active:t.value,"onUpdate:active":i[0]||(i[0]=o=>t.value=o),"can-cancel":!1,"is-full-page":r.value},{default:lt(()=>[HV]),_:1},8,["active","is-full-page"])]))}},qV={class:"text-black mx-auto max-w-4xl"},WV={class:"noticeBlock m-8 mx-3"},KV={key:0},zV=Ay('<div class="grid grid-cols-2 list-none p-0 mb-3 items-center bg-red text-white"><p>幣別</p><div class="border-x"><p class="">現金匯率</p><div class="grid grid-cols-2 border-y"><p class="">即時匯率</p><p class="border-l">即時試算</p></div></div></div>',1),GV={class:"p-2.5"},QV={class:"grid grid-cols-2"},JV={class:"p-2.5 break-all text-start"},YV={class:"p-2.5 break-all text-start"},XV={class:"flex mt-4"},ZV=K("p",null,"台幣換算：",-1),eL=K("p",{class:"ml-0.5"},"元",-1),tL={key:1},nL=K("p",null,"Loading...",-1),X0={__name:"Exchange",setup(n){const t=Si(),{exchangeRates:r}=_i(t),s=_e(1);function i(l){return`https://v6.exchangerate-api.com/v6/0e5493a08b815524adb5bc90/latest/${l}`}const o=[{baseCode:"TWD",conversion_rates:"TWD",name:"台幣"},{baseCode:"USD",conversion_rates:"TWD",name:"美金"},{baseCode:"GBP",conversion_rates:"TWD",name:"英鎊"},{baseCode:"EUR",conversion_rates:"TWD",name:"歐元"},{baseCode:"JPY",conversion_rates:"TWD",name:"日幣"},{baseCode:"KRW",conversion_rates:"TWD",name:"韓元"},{baseCode:"HKD",conversion_rates:"TWD",name:"港幣"},{baseCode:"CNY",conversion_rates:"TWD",name:"人民幣"},{baseCode:"SGD",conversion_rates:"TWD",name:"新加坡幣"}],a=_e(null);async function c(){try{for(const l of o){const u=i(l.baseCode),f=(await Xe.get(u)).data;r.value[l.baseCode]=f.conversion_rates.TWD}a.value=!0}catch(l){console.error("請求失敗:",l)}}return c(),(l,u)=>(ye(),Se("div",qV,[K("div",WV,[a.value?(ye(),Se("div",KV,[zV,(ye(),Se(Ke,null,go(o,(h,f)=>K("ul",{key:h.baseCode,class:"grid grid-cols-2 list-none p-0 mb-2 bg-stone-50 items-center"},[K("li",GV,gt(h.name)+"("+gt(o[f].baseCode)+")",1),K("div",QV,[K("li",JV,gt(Le(r)[h.baseCode].toFixed(2)),1),K("li",YV,gt((s.value/Le(r)[h.baseCode]).toFixed(2)),1)])])),64)),K("div",XV,[ZV,dt(K("input",{type:"number","onUpdate:modelValue":u[0]||(u[0]=h=>s.value=h),min:"1",class:"border max-w-20"},null,512),[[Nt,s.value]]),eL]),oe(LV)])):(ye(),Se("div",tL,[oe(Xd),nL]))])]))}},rL={__name:"Home",setup(n){return(t,r)=>(ye(),Go(X0))}},sL={},iL={class:"px-4 py-2 bg-red hover:bg-blue-200 text-white rounded-md",type:"button"};function oL(n,t){return ye(),Se("button",iL,[mc(n.$slots,"default")])}const Kr=M0(sL,[["render",oL]]),aL={class:"max-w-72 m-0 mx-auto"},cL={class:"flex justify-between"},lL={class:"flex justify-between"},Z0={__name:"CustomForm",props:{isSubmit:!1},emits:["submitData"],setup(n,{emit:t}){const r=n,s=t,i=Zn({email:"",password:""});return Kt(()=>r.isSubmit,o=>{if(o)s("submitData",i);else return}),(o,a)=>(ye(),Se("form",aL,[K("div",cL,[dt(K("input",{type:"email",name:"email",class:"email border px-4 py-2 mb-3 w-full rounded-md",placeholder:"請輸入Email",autocomplete:"current-email","onUpdate:modelValue":a[0]||(a[0]=c=>i.email=c)},null,512),[[Nt,i.email]])]),K("div",lL,[dt(K("input",{type:"password",name:"password",class:"password border px-4 py-2 mb-5 w-full rounded-md",placeholder:"請輸入密碼",autocomplete:"current-password","onUpdate:modelValue":a[1]||(a[1]=c=>i.password=c)},null,512),[[Nt,i.password]])])]))}},uL={class:"signInContent mx-auto m-8 max-w-4xl"},hL={key:0,class:"memberBlock"},fL={key:0,class:"text-rose-600 mb-2"},dL=K("br",null,null,-1),pL={key:1,class:"noticeBlock"},mL=K("p",null,"Loading...",-1),gL={__name:"SignUp",setup(n){const t=Vd(ls),r=gl(ls),s=Q0(),i=_e(!1),o=_e(!1),a=_e(!1),c=()=>{i.value=!0,a.value=!1},l=_e({money:[],todoList:[],email:""}),u=Si(),{memberId:h}=_i(u);async function f(){try{const p=i0(t,"fireBaseData"),g=await $x(p,l.value);h.value=g.id,s.push("/crud")}catch{console.error("新增進firebase錯誤",e)}}async function d(p){o.value=!0;try{const g=await cC(r,p.email,p.password);l.value.email=g.user.email,await f(),document.cookie=`id=${h.value}; expires=Fri, 31 Dec 9999 23:59:59 GMT`,document.cookie=`email=${g.user.email}; expires=Fri, 31 Dec 9999 23:59:59 GMT`}catch(g){o.value=!1,a.value=!0,console.log("失敗",g.message)}finally{i.value=!1}}return(p,g)=>(ye(),Se("div",uL,[o.value?(ye(),Se("div",pL,[mL,oe(Xd)])):(ye(),Se("div",hL,[oe(Z0,{isSubmit:i.value,onSubmitData:d},null,8,["isSubmit"]),a.value?(ye(),Se("p",fL,[je(" 帳號或密碼錯誤，請重新輸入"),dL])):Gn("",!0),oe(Kr,{onClick:c,class:"max-w-72 m-0 mx-auto w-full rounded-md"},{default:lt(()=>[je(" 註冊 ")]),_:1})]))]))}},_L={class:"LogInContent mx-auto m-8 max-w-4xl"},yL={key:0,class:"memberBlock"},vL={key:0,class:"text-rose-600 mb-2"},EL=K("br",null,null,-1),wL={key:1,class:"noticeBlock"},TL=K("p",null,"Loading...",-1),bL={__name:"Login",setup(n){const t=Si(),{memberId:r}=_i(t),s=gl(ls),i=Q0(),o=_e(!1),a=_e(!1),c=_e(!1);function l(){o.value=!0,c.value=!1}async function u(h){a.value=!0;try{const f=await lC(s,h.email,h.password),d=await t.fetchUserData(f.user.email);r.value=d[0].id,document.cookie=`id=${d[0].id}; expires=Fri, 31 Dec 9999 23:59:59 GMT`,document.cookie=`email=${d[0].email}; expires=Fri, 31 Dec 9999 23:59:59 GMT`,i.push("/crud")}catch(f){a.value=!1,c.value=!0;const d=f.code;console.log(d);const p=f.message;console.log(p)}finally{o.value=!1}}return(h,f)=>(ye(),Se("div",_L,[a.value?(ye(),Se("div",wL,[TL,oe(Xd)])):(ye(),Se("div",yL,[oe(Z0,{"is-submit":o.value,onSubmitData:u},null,8,["is-submit"]),c.value?(ye(),Se("p",vL,[je(" 帳號或密碼錯誤，請重新輸入"),EL,je(" 若您要加入會員請按「註冊」 ")])):Gn("",!0),oe(Kr,{onClick:l,class:"max-w-72 m-0 mx-auto w-full rounded-md"},{default:lt(()=>[je(" 登入 ")]),_:1})]))]))}},IL={key:0,class:"mx-auto max-w-4xl m-8"},AL=K("div",{class:"noticeBlock"},"請登入",-1),SL=[AL],RL={key:1,class:"mx-auto my-0 m-8 max-w-4xl"},CL={class:"item_nav flex justify-center gap-10 my-7 mx-auto flex-wrap cursor-pointer"},PL=["onClick"],kL={class:"inputBlock text_content"},OL=K("p",{class:"text-start mb-1"},"日期：",-1),xL=K("p",{class:"text-start mb-1"},"類別：",-1),DL=K("option",{value:"pay"},"支出",-1),NL=K("option",{value:"income"},"收入",-1),VL=[DL,NL],LL=K("p",{class:"text-start mb-1"},"金額：",-1),ML=K("p",{class:"text-start mb-1"},"記帳項目：",-1),FL={class:"inputBlock"},UL={class:"flex mb-5"},BL={class:""},$L={class:"text-start break-all"},jL=K("br",null,null,-1),HL=K("br",null,null,-1),qL={class:"flex gap-6 justify-center mt-2"},WL={class:"bg-gray-300 text-blue-400 p-3 border rounded-sm"},KL=K("p",{class:"text-start mb-1"},"日期：",-1),zL=K("p",{class:"text-start mb-1"},"類別：",-1),GL=K("option",{value:"pay"},"支出",-1),QL=K("option",{value:"income"},"收入",-1),JL=[GL,QL],YL=K("p",{class:"text-start mb-1"},"金額：",-1),XL=K("p",{class:"text-start mb-1"},"記帳項目：",-1),ZL={class:"flex justify-between"},eM={style:{"margin-top":"40px"}},tM={class:"text-end"},nM={__name:"CRUD",setup(n){const t=_e(!1),r=Vd(ls),s=Si(),{memberId:i,memberEmail:o,isUserLoggedIn:a}=_i(s),c=_e({}),l=_e(null),u=[{name:"記帳",enName:"accounts"},{name:"查帳",enName:"searchAccounts"}],h=_e("accounts"),f=async k=>{if(h.value=k,k=="searchAccounts"){const b=await s.fetchUserData(o.value);p.value=b[0].money}},d=_e({date:"",type:"pay",amount:"",items:"",id:""}),p=_e([]),g=async()=>{const k=d.value.date==="",b=d.value.amount==="",R=d.value.items==="";if(k||R||b){alert("請填入資料");return}else try{d.value.id=Date.now();const U=(await s.fetchUserData(o.value))[0].money;U.push(d.value),await Ou(rc(r,"fireBaseData",i.value),{money:U}),d.value.date="",d.value.amount="",d.value.items="",d.value.id=""}catch(A){console.error("新增進firebase錯誤",A)}},v=_e(""),w=_e("");function C(){const k=new Date;return`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}`}const T=Ye(()=>{const k=new Date(v.value),b=k.getFullYear(),R=k.getMonth()+1;return w.value=`${b}-${String(R).padStart(2,"0")}`,p.value.filter(A=>{const U=new Date(A.date),N=U.getFullYear(),q=U.getMonth()+1;return N===b&&q===R})}),y=Ye(()=>{const k=T.value.reduce((R,A)=>(A.type=="income"&&(R+=A.amount),R),0),b=T.value.reduce((R,A)=>(A.type=="pay"&&(R+=A.amount),R),0);return k-b});async function E(k,b){const A=(await s.fetchUserData(o.value))[0].money;if(A.length>0){const U=A.findIndex(N=>N.id==k.id);U!==-1&&(c.value={...A[U]},l.value=b,t.value=!0)}}async function I(k,b){try{if(c.value.date!==""&&c.value.type!==""&&c.value.amount!==""&&c.value.items!==""){console.log(c.value.date);const A=(await s.fetchUserData(o.value))[0].money,U=A.findIndex(N=>N.id==k.id);if(U!==-1){A[U]={...c.value},await Ou(rc(r,"fireBaseData",i.value),{money:A}),b();const N=await s.fetchUserData(o.value);p.value=N[0].money}}else alert("請填寫所有欄位")}catch(R){console.error("更新資料時發生錯誤：",R)}}async function S(k){const R=(await s.fetchUserData(o.value))[0].money;if(R.length>0){const A=R.findIndex(U=>U.id==k.id);console.log(A),A!==-1?R.splice(A,1):console.log("刪除未成功")}try{await Ou(rc(r,"fireBaseData",i.value),{money:R});const A=await s.fetchUserData(o.value);p.value=A[0].money}catch(A){console.error("錯誤: ",A)}}return xn(async()=>{const k=C();v.value=k;const b=await s.fetchUserData(o.value);p.value=b[0].money}),(k,b)=>{const R=po("Popper");return ye(),Se(Ke,null,[Le(a)?Gn("",!0):(ye(),Se("div",IL,SL)),Le(a)?(ye(),Se("div",RL,[K("div",CL,[(ye(),Se(Ke,null,go(u,(A,U)=>K("p",{key:U,onClick:N=>f(A.enName),class:gi({"active bg-gray-200 px-7 py-3 text-white rounded-md":h.value===A.enName,"bg-white px-7 py-3 text-black rounded-md hover:bg-gray-200 hover:text-white":h.value!==A.enName})},gt(A.name),11,PL)),64))]),dt(K("div",kL,[K("div",null,[OL,dt(K("input",{type:"date","onUpdate:modelValue":b[0]||(b[0]=A=>d.value.date=A),class:"border w-full mb-2"},null,512),[[Nt,d.value.date]]),xL,dt(K("select",{"onUpdate:modelValue":b[1]||(b[1]=A=>d.value.type=A),class:"border w-full mb-2",name:"type"},VL,512),[[vo,d.value.type]]),LL,dt(K("input",{type:"number","onUpdate:modelValue":b[2]||(b[2]=A=>d.value.amount=A),class:"border w-full mb-2"},null,512),[[Nt,d.value.amount]]),ML,dt(K("textarea",{class:"border w-full mb-2","onUpdate:modelValue":b[3]||(b[3]=A=>d.value.items=A)},null,512),[[Nt,d.value.items]])]),oe(Kr,{onClick:g,class:"mt-3"},{default:lt(()=>[je("送出")]),_:1})],512),[[yo,h.value==="accounts"]]),dt(K("div",FL,[K("div",UL,[dt(K("input",{type:"month","onUpdate:modelValue":b[4]||(b[4]=A=>v.value=A),class:"border w-full max-w-64"},null,512),[[Nt,v.value]])]),(ye(!0),Se(Ke,null,go(T.value,(A,U)=>(ye(),Se("div",{class:"bg-stone-100 mb-4 p-3",key:U},[K("div",BL,[K("p",$L,[je(" 日期："+gt(A.date)+" ",1),jL,je(" "+gt(A.type==="pay"?"支出":"收入")+" ： "+gt(A.amount)+" ",1),HL,je(" 記帳項目："+gt(A.items),1)])]),K("div",qL,[oe(R,{show:t.value&&l.value===U,"onClose:popper":b[9]||(b[9]=N=>t.value=!1)},{content:lt(({close:N})=>[K("div",WL,[K("div",null,[KL,dt(K("input",{type:"date","onUpdate:modelValue":b[5]||(b[5]=q=>c.value.date=q),class:"border w-full mb-2"},null,512),[[Nt,c.value.date]]),zL,dt(K("select",{name:"type","onUpdate:modelValue":b[6]||(b[6]=q=>c.value.type=q),id:"",class:"border w-full mb-2"},JL,512),[[vo,c.value.type]]),YL,dt(K("input",{type:"number","onUpdate:modelValue":b[7]||(b[7]=q=>c.value.amount=q),class:"border w-full mb-2"},null,512),[[Nt,c.value.amount]]),XL,dt(K("textarea",{class:"border w-full mb-2","onUpdate:modelValue":b[8]||(b[8]=q=>c.value.items=q)},null,512),[[Nt,c.value.items]]),K("div",ZL,[oe(Kr,{onClick:q=>I(A,N)},{default:lt(()=>[je("儲存")]),_:2},1032,["onClick"]),oe(Kr,{onClick:N},{default:lt(()=>[je("取消")]),_:2},1032,["onClick"])])])])]),default:lt(()=>[oe(Kr,{onClick:N=>E(A,U)},{default:lt(()=>[je(" 修改 ")]),_:2},1032,["onClick"])]),_:2},1032,["show"]),oe(Kr,{onClick:N=>S(A)},{default:lt(()=>[je("刪除")]),_:2},1032,["onClick"])])]))),128)),K("div",eM,[K("p",tM,"結餘："+gt(y.value),1)])],512),[[yo,h.value==="searchAccounts"]])])):Gn("",!0)],64)}}},rM=[{path:"/",name:"Home",component:rL},{path:"/signup",name:"註冊",component:gL},{path:"/login",name:"登入",component:bL},{path:"/exchange",name:"即時匯率",component:X0},{path:"/crud",name:"即時匯率",component:nM}],sM=DV({history:cV(),routes:rM});function ef(n,t,r){var s,i,o,a,c;t==null&&(t=100);function l(){var h=Date.now()-a;h<t&&h>=0?s=setTimeout(l,t-h):(s=null,r||(c=n.apply(o,i),o=i=null))}var u=function(){o=this,i=arguments,a=Date.now();var h=r&&!s;return s||(s=setTimeout(l,t)),h&&(c=n.apply(o,i),o=i=null),c};return u.clear=function(){s&&(clearTimeout(s),s=null)},u.flush=function(){s&&(c=n.apply(o,i),o=i=null,clearTimeout(s),s=null)},u}ef.debounce=ef;var Uu=ef;function iM(n,t,r){ze(n)?Kt(n,(s,i)=>{i==null||i.removeEventListener(t,r),s==null||s.addEventListener(t,r)}):xn(()=>{n.addEventListener(t,r)}),ys(()=>{var s;(s=Le(n))===null||s===void 0||s.removeEventListener(t,r)})}function oM(n,t){const r="pointerdown";return typeof window>"u"||!window?void 0:iM(window,r,i=>{const o=Le(n);o&&(o===i.target||i.composedPath().includes(o)||t(i))})}function aM(n,t,r){let s=null;const i=_e(!1);xn(()=>{(n.content!==void 0||r.value)&&(i.value=!0),s=new MutationObserver(o),s.observe(t.value,{childList:!0,subtree:!0})}),ys(()=>s.disconnect()),Kt(r,a=>{a?i.value=!0:i.value=!1});const o=()=>{n.content?i.value=!0:i.value=!1};return{hasContent:i}}function hi(n,t){var r=n.getBoundingClientRect(),s=1,i=1;return{width:r.width/s,height:r.height/i,top:r.top/i,right:r.right/s,bottom:r.bottom/i,left:r.left/s,x:r.left/s,y:r.top/i}}function dn(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Zd(n){var t=dn(n),r=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:r,scrollTop:s}}function Bo(n){var t=dn(n).Element;return n instanceof t||n instanceof Element}function en(n){var t=dn(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function eT(n){if(typeof ShadowRoot>"u")return!1;var t=dn(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function cM(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function lM(n){return n===dn(n)||!en(n)?Zd(n):cM(n)}function On(n){return n?(n.nodeName||"").toLowerCase():null}function Br(n){return((Bo(n)?n.ownerDocument:n.document)||window.document).documentElement}function ep(n){return hi(Br(n)).left+Zd(n).scrollLeft}function Xn(n){return dn(n).getComputedStyle(n)}function tp(n){var t=Xn(n),r=t.overflow,s=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+s)}function uM(n){var t=n.getBoundingClientRect(),r=t.width/n.offsetWidth||1,s=t.height/n.offsetHeight||1;return r!==1||s!==1}function hM(n,t,r){r===void 0&&(r=!1);var s=en(t);en(t)&&uM(t);var i=Br(t),o=hi(n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!r)&&((On(t)!=="body"||tp(i))&&(a=lM(t)),en(t)?(c=hi(t),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=ep(i))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function np(n){var t=hi(n),r=n.offsetWidth,s=n.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:n.offsetLeft,y:n.offsetTop,width:r,height:s}}function tu(n){return On(n)==="html"?n:n.assignedSlot||n.parentNode||(eT(n)?n.host:null)||Br(n)}function tT(n){return["html","body","#document"].indexOf(On(n))>=0?n.ownerDocument.body:en(n)&&tp(n)?n:tT(tu(n))}function ao(n,t){var r;t===void 0&&(t=[]);var s=tT(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=dn(s),a=i?[o].concat(o.visualViewport||[],tp(s)?s:[]):s,c=t.concat(a);return i?c:c.concat(ao(tu(a)))}function fM(n){return["table","td","th"].indexOf(On(n))>=0}function Xg(n){return!en(n)||Xn(n).position==="fixed"?null:n.offsetParent}function dM(n){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&en(n)){var s=Xn(n);if(s.position==="fixed")return null}for(var i=tu(n);en(i)&&["html","body"].indexOf(On(i))<0;){var o=Xn(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Ea(n){for(var t=dn(n),r=Xg(n);r&&fM(r)&&Xn(r).position==="static";)r=Xg(r);return r&&(On(r)==="html"||On(r)==="body"&&Xn(r).position==="static")?t:r||dM(n)||t}var tn="top",hn="bottom",fn="right",nn="left",rp="auto",wa=[tn,hn,fn,nn],fi="start",$o="end",pM="clippingParents",nT="viewport",Li="popper",mM="reference",Zg=wa.reduce(function(n,t){return n.concat([t+"-"+fi,t+"-"+$o])},[]),rT=[].concat(wa,[rp]).reduce(function(n,t){return n.concat([t,t+"-"+fi,t+"-"+$o])},[]),gM="beforeRead",_M="read",yM="afterRead",vM="beforeMain",EM="main",wM="afterMain",TM="beforeWrite",bM="write",IM="afterWrite",AM=[gM,_M,yM,vM,EM,wM,TM,bM,IM];function SM(n){var t=new Map,r=new Set,s=[];n.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(c){if(!r.has(c)){var l=t.get(c);l&&i(l)}}),s.push(o)}return n.forEach(function(o){r.has(o.name)||i(o)}),s}function RM(n){var t=SM(n);return AM.reduce(function(r,s){return r.concat(t.filter(function(i){return i.phase===s}))},[])}function CM(n){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(n())})})),t}}function Rn(n){return n.split("-")[0]}function PM(n){var t=n.reduce(function(r,s){var i=r[s.name];return r[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,r},{});return Object.keys(t).map(function(r){return t[r]})}function kM(n){var t=dn(n),r=Br(n),s=t.visualViewport,i=r.clientWidth,o=r.clientHeight,a=0,c=0;return s&&(i=s.width,o=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=s.offsetLeft,c=s.offsetTop)),{width:i,height:o,x:a+ep(n),y:c}}var Sr=Math.max,jo=Math.min,Wa=Math.round;function OM(n){var t,r=Br(n),s=Zd(n),i=(t=n.ownerDocument)==null?void 0:t.body,o=Sr(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Sr(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),c=-s.scrollLeft+ep(n),l=-s.scrollTop;return Xn(i||r).direction==="rtl"&&(c+=Sr(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:c,y:l}}function sT(n,t){var r=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(r&&eT(r)){var s=t;do{if(s&&n.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function tf(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function xM(n){var t=hi(n);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function e_(n,t){return t===nT?tf(kM(n)):en(t)?xM(t):tf(OM(Br(n)))}function DM(n){var t=ao(tu(n)),r=["absolute","fixed"].indexOf(Xn(n).position)>=0,s=r&&en(n)?Ea(n):n;return Bo(s)?t.filter(function(i){return Bo(i)&&sT(i,s)&&On(i)!=="body"}):[]}function NM(n,t,r){var s=t==="clippingParents"?DM(n):[].concat(t),i=[].concat(s,[r]),o=i[0],a=i.reduce(function(c,l){var u=e_(n,l);return c.top=Sr(u.top,c.top),c.right=jo(u.right,c.right),c.bottom=jo(u.bottom,c.bottom),c.left=Sr(u.left,c.left),c},e_(n,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function di(n){return n.split("-")[1]}function sp(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function iT(n){var t=n.reference,r=n.element,s=n.placement,i=s?Rn(s):null,o=s?di(s):null,a=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2,l;switch(i){case tn:l={x:a,y:t.y-r.height};break;case hn:l={x:a,y:t.y+t.height};break;case fn:l={x:t.x+t.width,y:c};break;case nn:l={x:t.x-r.width,y:c};break;default:l={x:t.x,y:t.y}}var u=i?sp(i):null;if(u!=null){var h=u==="y"?"height":"width";switch(o){case fi:l[u]=l[u]-(t[h]/2-r[h]/2);break;case $o:l[u]=l[u]+(t[h]/2-r[h]/2);break}}return l}function oT(){return{top:0,right:0,bottom:0,left:0}}function aT(n){return Object.assign({},oT(),n)}function cT(n,t){return t.reduce(function(r,s){return r[s]=n,r},{})}function ip(n,t){t===void 0&&(t={});var r=t,s=r.placement,i=s===void 0?n.placement:s,o=r.boundary,a=o===void 0?pM:o,c=r.rootBoundary,l=c===void 0?nT:c,u=r.elementContext,h=u===void 0?Li:u,f=r.altBoundary,d=f===void 0?!1:f,p=r.padding,g=p===void 0?0:p,v=aT(typeof g!="number"?g:cT(g,wa)),w=h===Li?mM:Li,C=n.rects.popper,T=n.elements[d?w:h],y=NM(Bo(T)?T:T.contextElement||Br(n.elements.popper),a,l),E=hi(n.elements.reference),I=iT({reference:E,element:C,strategy:"absolute",placement:i}),S=tf(Object.assign({},C,I)),k=h===Li?S:E,b={top:y.top-k.top+v.top,bottom:k.bottom-y.bottom+v.bottom,left:y.left-k.left+v.left,right:k.right-y.right+v.right},R=n.modifiersData.offset;if(h===Li&&R){var A=R[i];Object.keys(b).forEach(function(U){var N=[fn,hn].indexOf(U)>=0?1:-1,q=[tn,hn].indexOf(U)>=0?"y":"x";b[U]+=A[q]*N})}return b}var t_={placement:"bottom",modifiers:[],strategy:"absolute"};function n_(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function VM(n){n===void 0&&(n={});var t=n,r=t.defaultModifiers,s=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?t_:i;return function(c,l,u){u===void 0&&(u=o);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},t_,o),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},f=[],d=!1,p={state:h,setOptions:function(C){var T=typeof C=="function"?C(h.options):C;v(),h.options=Object.assign({},o,h.options,T),h.scrollParents={reference:Bo(c)?ao(c):c.contextElement?ao(c.contextElement):[],popper:ao(l)};var y=RM(PM([].concat(s,h.options.modifiers)));return h.orderedModifiers=y.filter(function(E){return E.enabled}),g(),p.update()},forceUpdate:function(){if(!d){var C=h.elements,T=C.reference,y=C.popper;if(n_(T,y)){h.rects={reference:hM(T,Ea(y),h.options.strategy==="fixed"),popper:np(y)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(A){return h.modifiersData[A.name]=Object.assign({},A.data)});for(var E=0;E<h.orderedModifiers.length;E++){if(h.reset===!0){h.reset=!1,E=-1;continue}var I=h.orderedModifiers[E],S=I.fn,k=I.options,b=k===void 0?{}:k,R=I.name;typeof S=="function"&&(h=S({state:h,options:b,name:R,instance:p})||h)}}}},update:CM(function(){return new Promise(function(w){p.forceUpdate(),w(h)})}),destroy:function(){v(),d=!0}};if(!n_(c,l))return p;p.setOptions(u).then(function(w){!d&&u.onFirstUpdate&&u.onFirstUpdate(w)});function g(){h.orderedModifiers.forEach(function(w){var C=w.name,T=w.options,y=T===void 0?{}:T,E=w.effect;if(typeof E=="function"){var I=E({state:h,name:C,instance:p,options:y}),S=function(){};f.push(I||S)}})}function v(){f.forEach(function(w){return w()}),f=[]}return p}}var Ka={passive:!0};function LM(n){var t=n.state,r=n.instance,s=n.options,i=s.scroll,o=i===void 0?!0:i,a=s.resize,c=a===void 0?!0:a,l=dn(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(h){h.addEventListener("scroll",r.update,Ka)}),c&&l.addEventListener("resize",r.update,Ka),function(){o&&u.forEach(function(h){h.removeEventListener("scroll",r.update,Ka)}),c&&l.removeEventListener("resize",r.update,Ka)}}var MM={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:LM,data:{}};function FM(n){var t=n.state,r=n.name;t.modifiersData[r]=iT({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var UM={name:"popperOffsets",enabled:!0,phase:"read",fn:FM,data:{}},BM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $M(n){var t=n.x,r=n.y,s=window,i=s.devicePixelRatio||1;return{x:Wa(Wa(t*i)/i)||0,y:Wa(Wa(r*i)/i)||0}}function r_(n){var t,r=n.popper,s=n.popperRect,i=n.placement,o=n.variation,a=n.offsets,c=n.position,l=n.gpuAcceleration,u=n.adaptive,h=n.roundOffsets,f=h===!0?$M(a):typeof h=="function"?h(a):a,d=f.x,p=d===void 0?0:d,g=f.y,v=g===void 0?0:g,w=a.hasOwnProperty("x"),C=a.hasOwnProperty("y"),T=nn,y=tn,E=window;if(u){var I=Ea(r),S="clientHeight",k="clientWidth";I===dn(r)&&(I=Br(r),Xn(I).position!=="static"&&c==="absolute"&&(S="scrollHeight",k="scrollWidth")),I=I,(i===tn||(i===nn||i===fn)&&o===$o)&&(y=hn,v-=I[S]-s.height,v*=l?1:-1),(i===nn||(i===tn||i===hn)&&o===$o)&&(T=fn,p-=I[k]-s.width,p*=l?1:-1)}var b=Object.assign({position:c},u&&BM);if(l){var R;return Object.assign({},b,(R={},R[y]=C?"0":"",R[T]=w?"0":"",R.transform=(E.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",R))}return Object.assign({},b,(t={},t[y]=C?v+"px":"",t[T]=w?p+"px":"",t.transform="",t))}function jM(n){var t=n.state,r=n.options,s=r.gpuAcceleration,i=s===void 0?!0:s,o=r.adaptive,a=o===void 0?!0:o,c=r.roundOffsets,l=c===void 0?!0:c,u={placement:Rn(t.placement),variation:di(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,r_(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,r_(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var HM={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jM,data:{}};function qM(n){var t=n.state;Object.keys(t.elements).forEach(function(r){var s=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!en(o)||!On(o)||(Object.assign(o.style,s),Object.keys(i).forEach(function(a){var c=i[a];c===!1?o.removeAttribute(a):o.setAttribute(a,c===!0?"":c)}))})}function WM(n){var t=n.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(s){var i=t.elements[s],o=t.attributes[s]||{},a=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:r[s]),c=a.reduce(function(l,u){return l[u]="",l},{});!en(i)||!On(i)||(Object.assign(i.style,c),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}var KM={name:"applyStyles",enabled:!0,phase:"write",fn:qM,effect:WM,requires:["computeStyles"]},zM=[MM,UM,HM,KM],GM=VM({defaultModifiers:zM});function QM(n){return n==="x"?"y":"x"}function cc(n,t,r){return Sr(n,jo(t,r))}function JM(n){var t=n.state,r=n.options,s=n.name,i=r.mainAxis,o=i===void 0?!0:i,a=r.altAxis,c=a===void 0?!1:a,l=r.boundary,u=r.rootBoundary,h=r.altBoundary,f=r.padding,d=r.tether,p=d===void 0?!0:d,g=r.tetherOffset,v=g===void 0?0:g,w=ip(t,{boundary:l,rootBoundary:u,padding:f,altBoundary:h}),C=Rn(t.placement),T=di(t.placement),y=!T,E=sp(C),I=QM(E),S=t.modifiersData.popperOffsets,k=t.rects.reference,b=t.rects.popper,R=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,A={x:0,y:0};if(S){if(o||c){var U=E==="y"?tn:nn,N=E==="y"?hn:fn,q=E==="y"?"height":"width",ge=S[E],he=S[E]+w[U],$=S[E]-w[N],ne=p?-b[q]/2:0,G=T===fi?k[q]:b[q],Pe=T===fi?-b[q]:-k[q],Ve=t.elements.arrow,Je=p&&Ve?np(Ve):{width:0,height:0},We=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:oT(),Ut=We[U],Pt=We[N],st=cc(0,k[q],Je[q]),Be=y?k[q]/2-ne-st-Ut-R:G-st-Ut-R,D=y?-k[q]/2+ne+st+Pt+R:Pe+st+Pt+R,Q=t.elements.arrow&&Ea(t.elements.arrow),O=Q?E==="y"?Q.clientTop||0:Q.clientLeft||0:0,W=t.modifiersData.offset?t.modifiersData.offset[t.placement][E]:0,pe=S[E]+Be-W-O,ve=S[E]+D-W;if(o){var m=cc(p?jo(he,pe):he,ge,p?Sr($,ve):$);S[E]=m,A[E]=m-ge}if(c){var _=E==="x"?tn:nn,P=E==="x"?hn:fn,V=S[I],x=V+w[_],j=V-w[P],J=cc(p?jo(x,pe):x,V,p?Sr(j,ve):j);S[I]=J,A[I]=J-V}}t.modifiersData[s]=A}}var YM={name:"preventOverflow",enabled:!0,phase:"main",fn:JM,requiresIfExists:["offset"]},XM={left:"right",right:"left",bottom:"top",top:"bottom"};function lc(n){return n.replace(/left|right|bottom|top/g,function(t){return XM[t]})}var ZM={start:"end",end:"start"};function s_(n){return n.replace(/start|end/g,function(t){return ZM[t]})}function e2(n,t){t===void 0&&(t={});var r=t,s=r.placement,i=r.boundary,o=r.rootBoundary,a=r.padding,c=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?rT:l,h=di(s),f=h?c?Zg:Zg.filter(function(g){return di(g)===h}):wa,d=f.filter(function(g){return u.indexOf(g)>=0});d.length===0&&(d=f);var p=d.reduce(function(g,v){return g[v]=ip(n,{placement:v,boundary:i,rootBoundary:o,padding:a})[Rn(v)],g},{});return Object.keys(p).sort(function(g,v){return p[g]-p[v]})}function t2(n){if(Rn(n)===rp)return[];var t=lc(n);return[s_(n),t,s_(t)]}function n2(n){var t=n.state,r=n.options,s=n.name;if(!t.modifiersData[s]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,a=r.altAxis,c=a===void 0?!0:a,l=r.fallbackPlacements,u=r.padding,h=r.boundary,f=r.rootBoundary,d=r.altBoundary,p=r.flipVariations,g=p===void 0?!0:p,v=r.allowedAutoPlacements,w=t.options.placement,C=Rn(w),T=C===w,y=l||(T||!g?[lc(w)]:t2(w)),E=[w].concat(y).reduce(function(Pt,st){return Pt.concat(Rn(st)===rp?e2(t,{placement:st,boundary:h,rootBoundary:f,padding:u,flipVariations:g,allowedAutoPlacements:v}):st)},[]),I=t.rects.reference,S=t.rects.popper,k=new Map,b=!0,R=E[0],A=0;A<E.length;A++){var U=E[A],N=Rn(U),q=di(U)===fi,ge=[tn,hn].indexOf(N)>=0,he=ge?"width":"height",$=ip(t,{placement:U,boundary:h,rootBoundary:f,altBoundary:d,padding:u}),ne=ge?q?fn:nn:q?hn:tn;I[he]>S[he]&&(ne=lc(ne));var G=lc(ne),Pe=[];if(o&&Pe.push($[N]<=0),c&&Pe.push($[ne]<=0,$[G]<=0),Pe.every(function(Pt){return Pt})){R=U,b=!1;break}k.set(U,Pe)}if(b)for(var Ve=g?3:1,Je=function(st){var Be=E.find(function(D){var Q=k.get(D);if(Q)return Q.slice(0,st).every(function(O){return O})});if(Be)return R=Be,"break"},We=Ve;We>0;We--){var Ut=Je(We);if(Ut==="break")break}t.placement!==R&&(t.modifiersData[s]._skip=!0,t.placement=R,t.reset=!0)}}var r2={name:"flip",enabled:!0,phase:"main",fn:n2,requiresIfExists:["offset"],data:{_skip:!1}};function s2(n,t,r){var s=Rn(n),i=[nn,tn].indexOf(s)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:n})):r,a=o[0],c=o[1];return a=a||0,c=(c||0)*i,[nn,fn].indexOf(s)>=0?{x:c,y:a}:{x:a,y:c}}function i2(n){var t=n.state,r=n.options,s=n.name,i=r.offset,o=i===void 0?[0,0]:i,a=rT.reduce(function(h,f){return h[f]=s2(f,t.rects,o),h},{}),c=a[t.placement],l=c.x,u=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[s]=a}var o2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:i2},a2=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,aT(typeof t!="number"?t:cT(t,wa))};function c2(n){var t,r=n.state,s=n.name,i=n.options,o=r.elements.arrow,a=r.modifiersData.popperOffsets,c=Rn(r.placement),l=sp(c),u=[nn,fn].indexOf(c)>=0,h=u?"height":"width";if(!(!o||!a)){var f=a2(i.padding,r),d=np(o),p=l==="y"?tn:nn,g=l==="y"?hn:fn,v=r.rects.reference[h]+r.rects.reference[l]-a[l]-r.rects.popper[h],w=a[l]-r.rects.reference[l],C=Ea(o),T=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,y=v/2-w/2,E=f[p],I=T-d[h]-f[g],S=T/2-d[h]/2+y,k=cc(E,S,I),b=l;r.modifiersData[s]=(t={},t[b]=k,t.centerOffset=k-S,t)}}function l2(n){var t=n.state,r=n.options,s=r.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||sT(t.elements.popper,i)&&(t.elements.arrow=i))}var u2={name:"arrow",enabled:!0,phase:"main",fn:c2,effect:l2,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};const Bu=n=>parseInt(n,10);function h2({arrowPadding:n,emit:t,locked:r,offsetDistance:s,offsetSkid:i,placement:o,popperNode:a,triggerNode:c}){const l=Zn({isOpen:!1,popperInstance:null}),u=v=>{var w;(w=l.popperInstance)===null||w===void 0||w.setOptions(C=>({...C,modifiers:[...C.modifiers,{name:"eventListeners",enabled:v}]}))},h=()=>u(!0),f=()=>u(!1),d=()=>{l.isOpen&&(l.isOpen=!1,t("close:popper"))},p=()=>{l.isOpen||(l.isOpen=!0,t("open:popper"))};Kt([()=>l.isOpen,o],async([v])=>{v?(await g(),h()):f()});const g=async()=>{await _s(),l.popperInstance=GM(c.value,a.value,{placement:o.value,modifiers:[YM,r2,{name:"flip",enabled:!r.value},u2,{name:"arrow",options:{padding:Bu(n.value)}},o2,{name:"offset",options:{offset:[Bu(i.value),Bu(s.value)]}}]}),l.popperInstance.update()};return ys(()=>{var v;(v=l.popperInstance)===null||v===void 0||v.destroy()}),{...Xc(l),open:p,close:d}}const f2={id:"arrow","data-popper-arrow":""};function d2(n,t){return ye(),Se("div",f2)}function lT(n,t){t===void 0&&(t={});var r=t.insertAt;if(!(!n||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var p2=`
#arrow[data-v-20b7fd4a],
  #arrow[data-v-20b7fd4a]::before {
    transition: background 250ms ease-in-out;
    position: absolute;
    width: calc(10px - var(--popper-theme-border-width, 0px));
    height: calc(10px - var(--popper-theme-border-width, 0px));
    box-sizing: border-box;
    background: var(--popper-theme-background-color);
}
#arrow[data-v-20b7fd4a] {
    visibility: hidden;
}
#arrow[data-v-20b7fd4a]::before {
    visibility: visible;
    content: "";
    transform: rotate(45deg);
}

  /* Top arrow */
.popper[data-popper-placement^="top"] > #arrow[data-v-20b7fd4a] {
    bottom: -5px;
}
.popper[data-popper-placement^="top"] > #arrow[data-v-20b7fd4a]::before {
    border-right: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-bottom: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Bottom arrow */
.popper[data-popper-placement^="bottom"] > #arrow[data-v-20b7fd4a] {
    top: -5px;
}
.popper[data-popper-placement^="bottom"] > #arrow[data-v-20b7fd4a]::before {
    border-left: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-top: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Left arrow */
.popper[data-popper-placement^="left"] > #arrow[data-v-20b7fd4a] {
    right: -5px;
}
.popper[data-popper-placement^="left"] > #arrow[data-v-20b7fd4a]::before {
    border-right: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
    border-top: var(--popper-theme-border-width)
      var(--popper-theme-border-style) var(--popper-theme-border-color);
}

  /* Right arrow */
.popper[data-popper-placement^="right"] > #arrow[data-v-20b7fd4a] {
    left: -5px;
}
`;lT(p2);const op={};op.render=d2;op.__scopeId="data-v-20b7fd4a";var m2=op;const g2=["onKeyup"];var uT={props:{placement:{type:String,default:"bottom",validator:function(n){return["auto","auto-start","auto-end","top","top-start","top-end","bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end"].includes(n)}},disableClickAway:{type:Boolean,default:!1},offsetSkid:{type:String,default:"0"},offsetDistance:{type:String,default:"12"},hover:{type:Boolean,default:!1},show:{type:Boolean,default:null},disabled:{type:Boolean,default:!1},openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:9999},arrow:{type:Boolean,default:!1},arrowPadding:{type:String,default:"0"},interactive:{type:Boolean,default:!0},locked:{type:Boolean,default:!1},content:{type:String,default:null}},emits:["open:popper","close:popper"],setup(n,{emit:t}){const r=n;By(G=>({c81fc0a4:n.zIndex}));const s=ry(),i=_e(null),o=_e(null),a=_e(null),c=_e(!1);xn(()=>{const G=s.default();if(G&&G.length>1)return console.error(`[Popper]: The <Popper> component expects only one child element at its root. You passed ${G.length} child nodes.`)});const{arrowPadding:l,closeDelay:u,content:h,disableClickAway:f,disabled:d,interactive:p,locked:g,offsetDistance:v,offsetSkid:w,openDelay:C,placement:T,show:y}=Xc(r),{isOpen:E,open:I,close:S}=h2({arrowPadding:l,emit:t,locked:g,offsetDistance:v,offsetSkid:w,placement:T,popperNode:o,triggerNode:a}),{hasContent:k}=aM(s,o,h),b=Ye(()=>y.value!==null),R=Ye(()=>d.value||!k.value),A=Ye(()=>E.value&&!R.value),U=Ye(()=>!f.value&&!b.value),N=Ye(()=>p.value?`border: ${v.value}px solid transparent; margin: -${v.value}px;`:null),q=Uu.debounce(I,C.value),ge=Uu.debounce(S,u.value),he=async()=>{R.value||b.value||(ge.clear(),q())},$=async()=>{b.value||(q.clear(),ge())},ne=()=>{E.value?$():he()};return Kt([k,d],([G,Pe])=>{E.value&&(!G||Pe)&&S()}),Kt(E,G=>{G?c.value=!0:Uu.debounce(()=>{c.value=!1},200)}),Ku(()=>{b.value&&(y.value?q():ge())}),Ku(()=>{U.value&&oM(i,$)}),(G,Pe)=>(ye(),Se("div",{class:"inline-block",style:mi(Le(N)),onMouseleave:Pe[2]||(Pe[2]=Ve=>n.hover&&$()),ref:(Ve,Je)=>{Je.popperContainerNode=Ve,i.value=Ve}},[K("div",{ref:(Ve,Je)=>{Je.triggerNode=Ve,a.value=Ve},onMouseover:Pe[0]||(Pe[0]=Ve=>n.hover&&he()),onClick:ne,onFocus:he,onKeyup:Gy($,["esc"])},[mc(G.$slots,"default")],40,g2),oe(cl,{name:"fade"},{default:lt(()=>[dt(K("div",{onClick:Pe[1]||(Pe[1]=Ve=>!Le(p)&&$()),class:"popper",ref:(Ve,Je)=>{Je.popperNode=Ve,o.value=Ve}},[mc(G.$slots,"content",{close:Le(S),isOpen:c.value},()=>[je(gt(Le(h)),1)]),n.arrow?(ye(),Go(m2,{key:0})):Gn("",!0)],512),[[yo,Le(A)]])]),_:3})],36))}},_2=`
.inline-block[data-v-5784ed69] {
    display: inline-block;
}
.popper[data-v-5784ed69] {
    transition: background 250ms ease-in-out;
    background: var(--popper-theme-background-color);
    padding: var(--popper-theme-padding);
    color: var(--popper-theme-text-color);
    border-radius: var(--popper-theme-border-radius);
    border-width: var(--popper-theme-border-width);
    border-style: var(--popper-theme-border-style);
    border-color: var(--popper-theme-border-color);
    box-shadow: var(--popper-theme-box-shadow);
    z-index: var(--c81fc0a4);
}
.popper[data-v-5784ed69]:hover,
  .popper:hover > #arrow[data-v-5784ed69]::before {
    background: var(--popper-theme-background-color-hover);
}
.inline-block[data-v-5784ed69] {
    display: inline-block;
}
.fade-enter-active[data-v-5784ed69],
  .fade-leave-active[data-v-5784ed69] {
    transition: opacity 0.2s ease;
}
.fade-enter-from[data-v-5784ed69],
  .fade-leave-to[data-v-5784ed69] {
    opacity: 0;
}
`;lT(_2);uT.__scopeId="data-v-5784ed69";var y2=(()=>{const n=uT;return n.install=t=>{t.component("Popper",n)},n})();const v2=RA(),Ta=Zy(kN);Ta.use(sM);Ta.use(v2);Ta.component("Popper",y2);Ta.mount("#app");Ta.use(Y0.LoadingPlugin);
